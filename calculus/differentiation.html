<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Minh H·ªça T∆∞∆°ng T√°c ƒê·∫°o H√†m</title>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script src="../math-simple.js"></script>
  <style>
    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      color: #ffffff;
      text-align: center;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 30px;
      font-size: 20px;
      line-height: 1.8;
    }
    canvas {
      background: #000;
      margin-top: 10px;
      display: block;
      margin-left: auto;
      margin-right: auto;
      border: 1px solid #444;
    }
    .controls {
      margin: 30px 0;
      padding: 25px;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 15px;
      display: inline-block;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .controls label {
      color: #00FFFF;
      font-weight: 700;
      margin-right: 15px;
      font-size: 1.2em;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
    }
    .controls select, .controls button {
      background: rgba(255, 255, 255, 0.1);
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.3);
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 1.1em;
      margin: 0 8px;
      font-weight: 600;
      backdrop-filter: blur(5px);
    }
    .controls button:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.05);
      box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2);
    }
    .controls input[type="range"] {
      width: 300px;
      margin: 0 10px;
    }
    .view-controls {
      margin: 10px 0;
      padding: 10px;
      background: #333;
      border-radius: 8px;
    }
    .view-controls label {
      margin-right: 15px;
    }
    .view-controls input[type="radio"] {
      margin-right: 5px;
    }
    .info-panel {
      position: absolute;
      top: 30px;
      left: 30px;
      background: rgba(0, 0, 0, 0.8);
      padding: 25px;
      border-radius: 15px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      min-width: 280px;
      max-width: 380px;
      backdrop-filter: blur(10px);
      font-size: 1.1em;
      line-height: 1.6;
    }
    .function-info {
      margin: 10px 0;
      padding: 10px;
      background: rgba(0, 255, 255, 0.1);
      border-radius: 5px;
      text-align: left;
    }
    .legend {
      margin-top: 10px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 5px;
      text-align: left;
      font-size: 12px;
    }
    .legend-item {
      margin: 3px 0;
    }
    
    .formula-box {
      background: linear-gradient(145deg, rgba(15, 15, 40, 0.9), rgba(25, 25, 60, 0.7));
      padding: 25px 35px;
      border-radius: 15px;
      font-family: 'KaTeX_Main', 'Times New Roman', serif;
      font-size: 20px;
      line-height: 1.8;
      text-align: center;
      margin: 25px 0;
      border: 2px solid rgba(100, 200, 255, 0.4);
      box-shadow: 0 8px 25px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.1);
      position: relative;
      overflow: hidden;
      letter-spacing: 0.5px;
    }

    .formula-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #00d4ff, #7c4dff, #ff6b6b, #4ecdc4);
      opacity: 0.8;
    }

    .formula-box .main-formula {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #ffffff;
      text-shadow: 0 0 10px rgba(255,255,255,0.3);
    }

    .formula-box .sub-formula {
      font-size: 16px;
      color: #b8e6ff;
      font-style: italic;
      margin-top: 8px;
    }

    .formula-box .formula-label {
      font-size: 14px;
      color: #ffeb3b;
      font-weight: 600;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .inline-formula {
      background: rgba(0, 0, 0, 0.3);
      padding: 4px 8px;
      border-radius: 6px;
      font-family: 'Times New Roman', serif;
      font-size: 16px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      display: inline-block;
      margin: 0 2px;
      color: #e8f4fd;
    }
  </style>
</head>
<body>
  <h2 style="font-size: 3.2em; font-weight: 900; text-shadow: 4px 4px 8px rgba(0,0,0,0.8); margin-bottom: 40px; letter-spacing: 1px;">üìê ƒê·∫°o H√†m - L√Ω Thuy·∫øt & Minh H·ªça T∆∞∆°ng T√°c</h2>
  
  <!-- ===========================================
       PH·∫¶N L√ù THUY·∫æT (THEORY SECTION)
       =========================================== -->
  
  <div style="background: linear-gradient(145deg, rgba(25, 25, 60, 0.9), rgba(15, 15, 40, 0.7)); padding: 30px; border-radius: 15px; margin: 30px auto; max-width: 1000px; text-align: left; border: 2px solid rgba(100, 200, 255, 0.4);">
    <h2 style="color: #00d4ff; font-size: 2.5em; margin-bottom: 20px; text-align: center; text-shadow: 2px 2px 4px rgba(0,0,0,0.8);">üìñ L√ù THUY·∫æT V·ªÄ ƒê·∫†O H√ÄM</h2>
    
    <!-- L·ªãch s·ª≠ ƒê·∫°o h√†m -->
    <div style="background: rgba(255, 215, 0, 0.1); padding: 25px; border-radius: 15px; margin-bottom: 30px; border-left: 5px solid #FFD700;">
      <h3 style="color: #FFD700; font-size: 2.2em; margin-bottom: 20px; text-align: center;">üìö L·ªãch S·ª≠ Ph√°t Tri·ªÉn ƒê·∫°o H√†m</h3>
      
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
        <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px;">
          <h4 style="color: #00d4ff; margin-bottom: 15px;">üß† Newton vs Leibniz (1660s-1670s)</h4>
          <p><strong>Isaac Newton (1643-1727):</strong> Ph√°t tri·ªÉn "method of fluxions" khi nghi√™n c·ª©u chuy·ªÉn ƒë·ªông. G·ªçi ƒë·∫°o h√†m l√† "fluxion" - t·ªëc ƒë·ªô thay ƒë·ªïi.</p>
          <p><strong>Gottfried Leibniz (1646-1716):</strong> Ph√°t tri·ªÉn k√Ω hi·ªáu dy/dx v√† kh√°i ni·ªám vi ph√¢n. Tranh c√£i v·ªÅ quy·ªÅn ∆∞u ti√™n k√©o d√†i su·ªët ƒë·ªùi.</p>
        </div>
        <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px;">
          <h4 style="color: #ff6b6b; margin-bottom: 15px;">‚ö° Cu·ªôc C√°ch M·∫°ng To√°n H·ªçc</h4>
          <p><strong>Pierre Fermat (1601-1665):</strong> ƒê·∫∑t n·ªÅn m√≥ng v·ªõi ph∆∞∆°ng ph√°p t√¨m c·ª±c tr·ªã b·∫±ng "adequality".</p>
          <p><strong>Rene Descartes (1596-1650):</strong> Ph∆∞∆°ng ph√°p t√¨m ti·∫øp tuy·∫øn b·∫±ng h√¨nh h·ªçc gi·∫£i t√≠ch.</p>
        </div>
      </div>

      <div style="background: rgba(76, 175, 80, 0.15); padding: 20px; border-radius: 10px; margin: 20px 0;">
        <h4 style="color: #4caf50; margin-bottom: 15px;">üåü Ph√°t Tri·ªÉn Hi·ªán ƒê·∫°i</h4>
        <ul style="color: #ffffff; line-height: 1.8;">
          <li><strong>Augustin-Louis Cauchy (1789-1857):</strong> ƒê∆∞a ra ƒë·ªãnh nghƒ©a nghi√™m ng·∫∑t c·ªßa gi·ªõi h·∫°n v√† ƒë·∫°o h√†m</li>
          <li><strong>Karl Weierstrass (1815-1897):</strong> Ph√°t tri·ªÉn l√Ω thuy·∫øt epsilon-delta cho s·ª± li√™n t·ª•c v√† ƒë·∫°o h√†m</li>
          <li><strong>Th·∫ø k·ª∑ 20:</strong> T·ªïng qu√°t h√≥a th√†nh ƒë·∫°o h√†m ri√™ng, ƒë·∫°o h√†m theo h∆∞·ªõng, v√† vi ph√¢n</li>
        </ul>
      </div>

      <div style="text-align: center; background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px;">
        <p style="font-style: italic; color: #FFD700; font-size: 1.2em;">"Ph√©p t√≠nh vi ph√¢n l√† m·ªôt trong nh·ªØng th√†nh t·ª±u vƒ© ƒë·∫°i nh·∫•t c·ªßa tr√≠ tu·ªá con ng∆∞·ªùi" - G.W. Leibniz</p>
      </div>
    </div>
    
    <div class="formula-container">
      <div class="formula-title">ƒê·ªãnh Nghƒ©a ƒê·∫°o H√†m</div>
      <div class="math-environment">
        $$f'(x) = \lim_{h \to 0} \frac{f(x+h) - f(x)}{h}$$
      </div>
      <div class="formula-description">T·ªëc ƒë·ªô thay ƒë·ªïi t·ª©c th·ªùi c·ªßa h√†m s·ªë</div>
    </div>

    <div style="background: rgba(255, 215, 0, 0.1); padding: 20px; border-radius: 10px; margin: 25px 0;">
      <h3 style="font-size: 1.8em; font-weight: 800; color: #FFD700; margin-bottom: 15px;">üîç √ù Nghƒ©a To√°n H·ªçc</h3>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
          <p><strong>√ù Nghƒ©a H√¨nh H·ªçc:</strong> ƒê·ªô d·ªëc c·ªßa ƒë∆∞·ªùng ti·∫øp tuy·∫øn v·ªõi ƒë∆∞·ªùng cong t·∫°i ƒëi·ªÉm $(x, f(x))$</p>
          <p><strong>√ù Nghƒ©a V·∫≠t L√Ω:</strong> V·∫≠n t·ªëc l√† ƒë·∫°o h√†m c·ªßa v·ªã tr√≠, gia t·ªëc l√† ƒë·∫°o h√†m c·ªßa v·∫≠n t·ªëc</p>
        </div>
        <div>
          <p><strong>√ù Nghƒ©a Kinh T·∫ø:</strong> T·ªëc ƒë·ªô thay ƒë·ªïi bi√™n c·ªßa c√°c ƒë·∫°i l∆∞·ª£ng kinh t·∫ø</p>
          <p><strong>·ª®ng D·ª•ng:</strong> T·ªëi ∆∞u h√≥a, ph√¢n t√≠ch xu h∆∞·ªõng, m√¥ h√¨nh h√≥a</p>
        </div>
      </div>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
      <div style="background: rgba(255, 215, 0, 0.1); padding: 15px; border-radius: 8px;">
        <h4 style="color: #ffd700;">‚ö° Quy T·∫Øc C∆° B·∫£n</h4>
        <div class="formula-container">
          <div class="formula-title">Quy t·∫Øc L≈©y th·ª´a</div>
          <div class="math-environment">$$\frac{d}{dx}[x^n] = n \cdot x^{n-1}$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">Quy t·∫Øc T·ªïng</div>
          <div class="math-environment">$$\frac{d}{dx}[f + g] = f' + g'$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">Quy t·∫Øc T√≠ch</div>
          <div class="math-environment">$$\frac{d}{dx}[fg] = f'g + fg'$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">Quy t·∫Øc D√¢y chuy·ªÅn</div>
          <div class="math-environment">$$\frac{d}{dx}[f(g(x))] = f'(g(x)) \cdot g'(x)$$</div>
        </div>
      </div>
      
      <div style="background: rgba(0, 123, 255, 0.1); padding: 15px; border-radius: 8px;">
        <h4 style="color: #007bff;">üìê H√†m L∆∞·ª£ng Gi√°c</h4>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m Sin</div>
          <div class="math-environment">$$\frac{d}{dx}[\sin(x)] = \cos(x)$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m Cos</div>
          <div class="math-environment">$$\frac{d}{dx}[\cos(x)] = -\sin(x)$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m Tan</div>
          <div class="math-environment">$$\frac{d}{dx}[\tan(x)] = \sec^2(x)$$</div>
        </div>
      </div>
      
      <div style="background: rgba(40, 167, 69, 0.1); padding: 15px; border-radius: 8px;">
        <h4 style="color: #28a745;">üî¢ H√†m M≈© & Logarithm</h4>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m $e^x$</div>
          <div class="math-environment">$$\frac{d}{dx}[e^x] = e^x$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m $a^x$</div>
          <div class="math-environment">$$\frac{d}{dx}[a^x] = a^x \ln(a)$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m Logarithm t·ª± nhi√™n</div>
          <div class="math-environment">$$\frac{d}{dx}[\ln(x)] = \frac{1}{x}$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m Log c∆° s·ªë a</div>
          <div class="math-environment">$$\frac{d}{dx}[\log_a(x)] = \frac{1}{x \ln(a)}$$</div>
        </div>
      </div>
    </div>
    
    <div style="background: rgba(220, 53, 69, 0.1); padding: 20px; border-radius: 8px; margin-top: 20px;">
      <h4 style="color: #dc3545; font-size: 1.6em; margin-bottom: 15px;">üéØ ·ª®ng D·ª•ng Th·ª±c Ti·ªÖn</h4>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
        <div>
          <h5 style="color: #ff6b6b; font-size: 1.3em;">V·∫≠t L√Ω:</h5>
          <ul style="font-size: 14px; line-height: 1.6;">
            <li>V·∫≠n t·ªëc = $\frac{dx}{dt}$ (ƒë·∫°o h√†m c·ªßa v·ªã tr√≠)</li>
            <li>Gia t·ªëc = $\frac{dv}{dt}$ (ƒë·∫°o h√†m c·ªßa v·∫≠n t·ªëc)</li>
            <li>Tr∆∞·ªùng ƒëi·ªán = $-\frac{dV}{dx}$ (gradient √¢m c·ªßa th·∫ø nƒÉng)</li>
            <li>C√¥ng su·∫•t = $\frac{dW}{dt}$ (ƒë·∫°o h√†m c·ªßa c√¥ng)</li>
          </ul>
        </div>
        <div>
          <h5 style="color: #4ecdc4; font-size: 1.3em;">Kinh T·∫ø:</h5>
          <ul style="font-size: 14px; line-height: 1.6;">
            <li>Chi ph√≠ bi√™n = $\frac{dC}{dq}$ (ƒë·∫°o h√†m c·ªßa h√†m chi ph√≠)</li>
            <li>Doanh thu bi√™n = $\frac{dR}{dq}$ (ƒë·∫°o h√†m c·ªßa doanh thu)</li>
            <li>ƒê√†n h·ªìi li√™n quan ƒë·∫øn ƒë·∫°o h√†m c·ªßa c·∫ßu</li>
            <li>T·ªëi ∆∞u h√≥a l·ª£i nhu·∫≠n v√† chi ph√≠</li>
          </ul>
        </div>
        <div>
          <h5 style="color: #7c4dff; font-size: 1.3em;">H√¨nh H·ªçc & K·ªπ Thu·∫≠t:</h5>
          <ul style="font-size: 14px; line-height: 1.6;">
            <li>ƒê·ªô d·ªëc c·ªßa ƒë∆∞·ªùng ti·∫øp tuy·∫øn t·∫°i b·∫•t k·ª≥ ƒëi·ªÉm n√†o</li>
            <li>T·ªëc ƒë·ªô thay ƒë·ªïi c·ªßa di·ªán t√≠ch ho·∫∑c th·ªÉ t√≠ch</li>
            <li>Ph√¢n t√≠ch ƒë·ªô cong v√† t√≠nh l√µm</li>
            <li>Thi·∫øt k·∫ø ƒë∆∞·ªùng cong t·ªëi ∆∞u</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  
  <!-- ===========================================
       PH·∫¶N MINH H·ªåA T∆Ø∆†NG T√ÅC (INTERACTIVE ILLUSTRATION)
       =========================================== -->
  
  <div style="background: linear-gradient(145deg, rgba(15, 40, 15, 0.9), rgba(25, 60, 25, 0.7)); padding: 30px; border-radius: 15px; margin: 30px auto; border: 2px solid rgba(76, 175, 80, 0.4);">
    <h2 style="color: #4caf50; font-size: 2.5em; margin-bottom: 20px; text-align: center; text-shadow: 2px 2px 4px rgba(0,0,0,0.8);">üéÆ MINH H·ªåA T∆Ø∆†NG T√ÅC</h2>
    
    <div style="text-align: center; margin-bottom: 20px; background: rgba(76, 175, 80, 0.1); padding: 15px; border-radius: 10px;">
      <p style="font-size: 18px; color: #81c784; margin: 0;">Kh√°m ph√° tr·ª±c quan c√°c kh√°i ni·ªám ƒë·∫°o h√†m th√¥ng qua bi·ªÉu di·ªÖn ƒë·ªì th·ªã ƒë·ªông v√† t∆∞∆°ng t√°c</p>
    </div>

    <div class="controls">
      <label for="functionSelect">Ch·ªçn H√†m:</label>
      <select id="functionSelect">
        <option value="sin">f(x) = sin(x) ‚Üí f'(x) = cos(x)</option>
        <option value="cos">f(x) = cos(x) ‚Üí f'(x) = -sin(x)</option>
        <option value="polynomial">f(x) = x¬≤ ‚Üí f'(x) = 2x</option>
        <option value="cubic">f(x) = x¬≥ ‚Üí f'(x) = 3x¬≤</option>
        <option value="exp">f(x) = eÀ£ ‚Üí f'(x) = eÀ£</option>
        <option value="ln">f(x) = ln(x) ‚Üí f'(x) = 1/x</option>
        <option value="sqrt">f(x) = ‚àöx ‚Üí f'(x) = 1/(2‚àöx)</option>
        <option value="tan">f(x) = tan(x) ‚Üí f'(x) = sec¬≤(x)</option>
        <option value="rational">f(x) = 1/x ‚Üí f'(x) = -1/x¬≤</option>
        <option value="quartic">f(x) = x‚Å¥ ‚Üí f'(x) = 4x¬≥</option>
      </select>
    </div>
    
    <div class="view-controls">
      <label><input type="radio" name="viewMode" value="single" checked> Ch·∫ø ƒê·ªô ƒê∆°n</label>
      <label><input type="radio" name="viewMode" value="split"> Ch·∫ø ƒê·ªô T√°ch (H√†m & ƒê·∫°o H√†m)</label>
    </div>
    
    <div class="controls">
      <label>x = </label>
      <input type="range" id="xSlider" min="-628" max="628" value="0" step="1">
      <span id="xValueDisplay">0.00</span>
      <button id="playPauseBtn">‚ñ∂ Ch∆°i</button>
      <button id="resetBtn">Kh·ªüi ƒê·ªông L·∫°i</button>
    </div>
    
    <canvas id="canvas" width="900" height="600"></canvas>
  </div>

  <div style="background: rgba(0, 0, 0, 0.8); padding: 20px; border-radius: 10px; margin: 20px auto; max-width: 1000px; text-align: left;">
    <h3 style="color: #0ff;">üìö T·ªïng K·∫øt & Ghi Nh·ªõ</h3>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
      <div style="background: rgba(255, 215, 0, 0.1); padding: 15px; border-radius: 8px;">
        <h4 style="color: #ffd700;">‚ö° Quy T·∫Øc C∆° B·∫£n</h4>
        <div class="formula-container">
          <div class="formula-title">Quy t·∫Øc L≈©y th·ª´a</div>
          <div class="math-environment">$$\frac{d}{dx}[x^n] = n \cdot x^{n-1}$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">Quy t·∫Øc T·ªïng</div>
          <div class="math-environment">$$\frac{d}{dx}[f + g] = f' + g'$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">Quy t·∫Øc T√≠ch</div>
          <div class="math-environment">$$\frac{d}{dx}[fg] = f'g + fg'$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">Quy t·∫Øc D√¢y chuy·ªÅn</div>
          <div class="math-environment">$$\frac{d}{dx}[f(g(x))] = f'(g(x)) \cdot g'(x)$$</div>
        </div>
      </div>
      
      <div style="background: rgba(0, 123, 255, 0.1); padding: 15px; border-radius: 8px;">
        <h4 style="color: #007bff;">üìê H√†m L∆∞·ª£ng Gi√°c</h4>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m Sin</div>
          <div class="math-environment">$$\frac{d}{dx}[\sin(x)] = \cos(x)$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m Cos</div>
          <div class="math-environment">$$\frac{d}{dx}[\cos(x)] = -\sin(x)$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m Tan</div>
          <div class="math-environment">$$\frac{d}{dx}[\tan(x)] = \sec^2(x)$$</div>
        </div>
      </div>
      
      <div style="background: rgba(40, 167, 69, 0.1); padding: 15px; border-radius: 8px;">
        <h4 style="color: #28a745;">üî¢ H√†m M≈© & Logarithm</h4>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m $e^x$</div>
          <div class="math-environment">$$\frac{d}{dx}[e^x] = e^x$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m $a^x$</div>
          <div class="math-environment">$$\frac{d}{dx}[a^x] = a^x \ln(a)$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m Logarithm t·ª± nhi√™n</div>
          <div class="math-environment">$$\frac{d}{dx}[\ln(x)] = \frac{1}{x}$$</div>
        </div>
        <div class="formula-container">
          <div class="formula-title">ƒê·∫°o h√†m Log c∆° s·ªë a</div>
          <div class="math-environment">$$\frac{d}{dx}[\log_a(x)] = \frac{1}{x \ln(a)}$$</div>
        </div>
      </div>
    </div>
    
    <div style="background: rgba(220, 53, 69, 0.1); padding: 15px; border-radius: 8px; margin-top: 20px;">
      <h4 style="color: #dc3545;">üéØ ·ª®ng D·ª•ng To√°n H·ªçc</h4>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
        <div>
          <h5>V·∫≠t L√Ω:</h5>
          <ul style="font-size: 13px;">
            <li>V·∫≠n t·ªëc = $\frac{dx}{dt}$ (ƒë·∫°o h√†m c·ªßa v·ªã tr√≠)</li>
            <li>Gia t·ªëc = $\frac{dv}{dt}$ (ƒë·∫°o h√†m c·ªßa v·∫≠n t·ªëc)</li>
            <li>Tr∆∞·ªùng ƒëi·ªán = $-\frac{dV}{dx}$ (gradient √¢m c·ªßa th·∫ø nƒÉng)</li>
          </ul>
        </div>
        <div>
          <h5>Kinh T·∫ø:</h5>
          <ul style="font-size: 13px;">
            <li>Chi ph√≠ bi√™n = $\frac{dC}{dq}$ (ƒë·∫°o h√†m c·ªßa h√†m chi ph√≠)</li>
            <li>Doanh thu bi√™n = $\frac{dR}{dq}$ (ƒë·∫°o h√†m c·ªßa doanh thu)</li>
            <li>ƒê√†n h·ªìi li√™n quan ƒë·∫øn ƒë·∫°o h√†m c·ªßa c·∫ßu</li>
          </ul>
        </div>
        <div>
          <h5>H√¨nh H·ªçc:</h5>
          <ul style="font-size: 13px;">
            <li>ƒê·ªô d·ªëc c·ªßa ƒë∆∞·ªùng ti·∫øp tuy·∫øn t·∫°i b·∫•t k·ª≥ ƒëi·ªÉm n√†o</li>
            <li>T·ªëc ƒë·ªô thay ƒë·ªïi c·ªßa di·ªán t√≠ch ho·∫∑c th·ªÉ t√≠ch</li>
            <li>Ph√¢n t√≠ch ƒë·ªô cong v√† t√≠nh l√µm</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  
  <div class="info-panel" id="infoPanel">
    <div style="color: #0ff; font-weight: bold;">Ph√¢n T√≠ch H√†m</div>
    <div id="functionInfo" class="function-info">
      f(x) = sin(x)<br>
      f'(x) = cos(x)
    </div>
    <div style="color: #ff0; margin-top: 10px;">
      <div>ƒêi·ªÉm: (<span id="xValue">0.00</span>, <span id="yValue">0.00</span>)</div>
      <div>ƒê·ªô d·ªëc: <span id="slopeValue">0.00</span></div>
      <div id="slopeInterpretation" style="font-size: 12px; margin-top: 5px;"></div>
    </div>
    <div class="legend">
      <div class="legend-item" style="color: #0ff;">‚óè H√†m f(x)</div>
      <div class="legend-item" style="color: #f90;">‚óè ƒê·∫°o h√†m f'(x)</div>
      <div class="legend-item" style="color: #ff0;">‚Äî ƒê∆∞·ªùng Ti·∫øp Tuy·∫øn</div>
      <div class="legend-item" style="color: #f00;">‚óè ƒêi·ªÉm Hi·ªán T·∫°i</div>
    </div>
    <div style="background: rgba(0, 123, 255, 0.1); padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 11px;">
      <div style="color: #0ff; font-weight: bold;">Quy T·∫Øc To√°n H·ªçc:</div>
      <div id="derivativeRule" style="margin-top: 5px;"></div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const functionSelect = document.getElementById('functionSelect');
    const functionInfo = document.getElementById('functionInfo');
    const xValue = document.getElementById('xValue');
    const yValue = document.getElementById('yValue');
    const slopeValue = document.getElementById('slopeValue');
    const xSlider = document.getElementById('xSlider');
    const xValueDisplay = document.getElementById('xValueDisplay');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const resetBtn = document.getElementById('resetBtn');
    const viewModeRadios = document.querySelectorAll('input[name="viewMode"]');

    const width = canvas.width;
    const height = canvas.height;
    const centerX = width / 2;
    const centerY = height / 2;

    // Set scaling for axes
    const scaleX = 60; // 1 unit = 60 pixels
    const scaleY = 60;

    let currentX = 0;
    let currentFunction = 'sin';
    let viewMode = 'single';
    let isPlaying = false;
    let animationFrame;

    // View mode positions
    const singleViewCenterY = centerY;
    const splitViewTopY = height / 4;
    const splitViewBottomY = (3 * height) / 4;

    // Function definitions
    const functions = {
      sin: {
        f: (x) => Math.sin(x),
        df: (x) => Math.cos(x),
        name: 'f(x) = sin(x)',
        derivative: "f'(x) = cos(x)",
        domain: [-2 * Math.PI, 2 * Math.PI],
        range: [-1.5, 1.5],
        rule: "Trigonometric rule: d/dx[sin(x)] = cos(x)"
      },
      cos: {
        f: (x) => Math.cos(x),
        df: (x) => -Math.sin(x),
        name: 'f(x) = cos(x)',
        derivative: "f'(x) = -sin(x)",
        domain: [-2 * Math.PI, 2 * Math.PI],
        range: [-1.5, 1.5],
        rule: "Trigonometric rule: d/dx[cos(x)] = -sin(x)"
      },
      polynomial: {
        f: (x) => x * x,
        df: (x) => 2 * x,
        name: 'f(x) = x¬≤',
        derivative: "f'(x) = 2x",
        domain: [-4, 4],
        range: [-1, 16],
        rule: "Power rule: d/dx[x¬≤] = 2x¬π = 2x"
      },
      cubic: {
        f: (x) => x * x * x,
        df: (x) => 3 * x * x,
        name: 'f(x) = x¬≥',
        derivative: "f'(x) = 3x¬≤",
        domain: [-3, 3],
        range: [-27, 27],
        rule: "Power rule: d/dx[x¬≥] = 3x¬≤ "
      },
      exp: {
        f: (x) => Math.exp(x),
        df: (x) => Math.exp(x),
        name: 'f(x) = eÀ£',
        derivative: "f'(x) = eÀ£",
        domain: [-2, 2],
        range: [0, 8],
        rule: "Exponential rule: d/dx[eÀ£] = eÀ£ (unique property!)"
      },
      ln: {
        f: (x) => x > 0 ? Math.log(x) : NaN,
        df: (x) => x > 0 ? 1/x : NaN,
        name: 'f(x) = ln(x)',
        derivative: "f'(x) = 1/x",
        domain: [0.1, 4],
        range: [-3, 2],
        rule: "Logarithmic rule: d/dx[ln(x)] = 1/x"
      },
      sqrt: {
        f: (x) => x >= 0 ? Math.sqrt(x) : NaN,
        df: (x) => x > 0 ? 1/(2 * Math.sqrt(x)) : NaN,
        name: 'f(x) = ‚àöx',
        derivative: "f'(x) = 1/(2‚àöx)",
        domain: [0, 4],
        range: [0, 2],
        rule: "Power rule: d/dx[x^(1/2)] = (1/2)x^(-1/2)"
      },
      tan: {
        f: (x) => Math.tan(x),
        df: (x) => 1 / (Math.cos(x) * Math.cos(x)),
        name: 'f(x) = tan(x)',
        derivative: "f'(x) = sec¬≤(x)",
        domain: [-Math.PI/2 + 0.1, Math.PI/2 - 0.1],
        range: [-5, 5],
        rule: "Trigonometric rule: d/dx[tan(x)] = sec¬≤(x)"
      },
      rational: {
        f: (x) => x !== 0 ? 1/x : NaN,
        df: (x) => x !== 0 ? -1/(x*x) : NaN,
        name: 'f(x) = 1/x',
        derivative: "f'(x) = -1/x¬≤",
        domain: [-3, -0.1].concat([0.1, 3]),
        range: [-5, 5],
        rule: "Power rule: d/dx[x‚Åª¬π] = -1¬∑x‚Åª¬≤"
      },
      quartic: {
        f: (x) => x * x * x * x,
        df: (x) => 4 * x * x * x,
        name: 'f(x) = x‚Å¥',
        derivative: "f'(x) = 4x¬≥",
        domain: [-2, 2],
        range: [-1, 16],
        rule: "Power rule: d/dx[x‚Åø] = n¬∑x‚Åø‚Åª¬π"
      }
    };

    function f(x) {
      return functions[currentFunction].f(x);
    }

    function df(x) {
      return functions[currentFunction].df(x);
    }

    function updateFunctionInfo() {
      const func = functions[currentFunction];
      functionInfo.innerHTML = `${func.name}<br>${func.derivative}`;
      document.getElementById('derivativeRule').innerHTML = func.rule || 'Mathematical rule not specified';
    }

    functionSelect.addEventListener('change', function() {
      currentFunction = this.value;
      updateFunctionInfo();
      // Reset t to start of domain
      const domain = functions[currentFunction].domain;
      t = domain[0];
    });

    function drawAxes(centerYPos) {
      ctx.strokeStyle = "#555";
      ctx.lineWidth = 1;

      // X-axis
      ctx.beginPath();
      ctx.moveTo(0, centerYPos);
      ctx.lineTo(width, centerYPos);
      ctx.stroke();

      // Y-axis
      ctx.beginPath();
      ctx.moveTo(centerX, 0);
      ctx.lineTo(centerX, height);
      ctx.stroke();

      // Grid lines
      ctx.strokeStyle = "#333";
      ctx.lineWidth = 0.5;
      
      // Vertical grid lines
      for (let x = -10; x <= 10; x++) {
        const cx = toCanvasX(x);
        if (cx >= 0 && cx <= width) {
          ctx.beginPath();
          ctx.moveTo(cx, 0);
          ctx.lineTo(cx, height);
          ctx.stroke();
        }
      }
      
      // Horizontal grid lines (only around the center)
      for (let y = -10; y <= 10; y++) {
        const cy = toCanvasY(y, centerYPos);
        if (cy >= 0 && cy <= height) {
          ctx.beginPath();
          ctx.moveTo(0, cy);
          ctx.lineTo(width, cy);
          ctx.stroke();
        }
      }
    }

    function toCanvasX(x) {
      return centerX + x * scaleX;
    }

    function toCanvasY(y, centerYPos = centerY) {
      return centerYPos - y * scaleY;
    }

    function drawFunction(fn, centerYPos, color, lineWidth = 2) {
      const func = functions[currentFunction];
      const domain = func.domain;
      
      ctx.strokeStyle = color;
      ctx.lineWidth = lineWidth;
      ctx.beginPath();
      
      let started = false;
      for (let x = domain[0]; x <= domain[1]; x += 0.01) {
        const y = fn(x);
        if (!isNaN(y) && isFinite(y)) {
          const cx = toCanvasX(x);
          const cy = toCanvasY(y, centerYPos);
          
          if (cx >= 0 && cx <= width && cy >= 0 && cy <= height) {
            if (!started) {
              ctx.moveTo(cx, cy);
              started = true;
            } else {
              ctx.lineTo(cx, cy);
            }
          }
        }
      }
      ctx.stroke();
    }

    function drawVisualization(x) {
      ctx.clearRect(0, 0, width, height);
      
      if (viewMode === 'single') {
        drawSingleView(x);
      } else {
        drawSplitView(x);
      }
      
      updateInfoPanel(x);
    }

    function drawSingleView(x) {
      const y = f(x);
      const slope = df(x);

      if (isNaN(y) || isNaN(slope) || !isFinite(y) || !isFinite(slope)) return;

      drawAxes(singleViewCenterY);
      drawFunction(f, singleViewCenterY, "#0ff");

      // Tangent line
      const cx = toCanvasX(x);
      const cy = toCanvasY(y, singleViewCenterY);
      const dx = 1;
      const x1 = x - dx;
      const x2 = x + dx;
      const y1 = y - slope * dx;
      const y2 = y + slope * dx;

      ctx.strokeStyle = "#ff0";
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(toCanvasX(x1), toCanvasY(y1, singleViewCenterY));
      ctx.lineTo(toCanvasX(x2), toCanvasY(y2, singleViewCenterY));
      ctx.stroke();

      // Point on curve
      ctx.fillStyle = "red";
      ctx.beginPath();
      ctx.arc(cx, cy, 6, 0, 2 * Math.PI);
      ctx.fill();
    }

    function drawSplitView(x) {
      const y = f(x);
      const slope = df(x);

      if (isNaN(y) || isNaN(slope) || !isFinite(y) || !isFinite(slope)) return;

      // Draw both axes
      drawAxes(splitViewTopY);
      drawAxes(splitViewBottomY);

      // Draw function and derivative
      drawFunction(f, splitViewTopY, "#0ff");
      drawFunction(df, splitViewBottomY, "#f90");

      const cx = toCanvasX(x);
      
      // Points
      const cy1 = toCanvasY(y, splitViewTopY);
      const cy2 = toCanvasY(slope, splitViewBottomY);

      // Tangent line on function
      const dx = 0.5;
      const x1 = x - dx;
      const x2 = x + dx;
      const y1 = y - slope * dx;
      const y2 = y + slope * dx;

      ctx.strokeStyle = "#ff0";
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(toCanvasX(x1), toCanvasY(y1, splitViewTopY));
      ctx.lineTo(toCanvasX(x2), toCanvasY(y2, splitViewTopY));
      ctx.stroke();

      // Points on both graphs
      ctx.fillStyle = "red";
      ctx.beginPath();
      ctx.arc(cx, cy1, 5, 0, 2 * Math.PI);
      ctx.fill();

      ctx.fillStyle = "cyan";
      ctx.beginPath();
      ctx.arc(cx, cy2, 5, 0, 2 * Math.PI);
      ctx.fill();

      // Connection line
      ctx.strokeStyle = "#aaa";
      ctx.lineWidth = 1;
      ctx.setLineDash([5, 5]);
      ctx.beginPath();
      ctx.moveTo(cx, cy1);
      ctx.lineTo(cx, cy2);
      ctx.stroke();
      ctx.setLineDash([]);

      // Labels
      ctx.fillStyle = "white";
      ctx.font = "16px sans-serif";
      ctx.fillText("f(x)", 20, splitViewTopY - 100);
      ctx.fillText("f'(x)", 20, splitViewBottomY - 100);
    }

    function updateInfoPanel(x) {
      const y = f(x);
      const slope = df(x);
      
      xValue.textContent = x.toFixed(3);
      yValue.textContent = y.toFixed(3);
      slopeValue.textContent = slope.toFixed(3);
      xValueDisplay.textContent = x.toFixed(2);
      
      // Slope interpretation
      const slopeInterpretation = document.getElementById('slopeInterpretation');
      let interpretation = '';
      if (Math.abs(slope) < 0.001) {
        interpretation = 'Horizontal tangent (critical point)';
      } else if (slope > 0) {
        interpretation = `Increasing (slope = ${slope.toFixed(3)})`;
      } else {
        interpretation = `Decreasing (slope = ${slope.toFixed(3)})`;
      }
      slopeInterpretation.textContent = interpretation;
    }

    function updateSliderFromX(x) {
      const domain = functions[currentFunction].domain;
      const normalizedX = ((x - domain[0]) / (domain[1] - domain[0])) * 1256 - 628;
      xSlider.value = Math.round(normalizedX);
    }

    function getXFromSlider() {
      const domain = functions[currentFunction].domain;
      const normalizedValue = (parseInt(xSlider.value) + 628) / 1256;
      return domain[0] + normalizedValue * (domain[1] - domain[0]);
    }

    // Event listeners
    functionSelect.addEventListener('change', function() {
      currentFunction = this.value;
      updateFunctionInfo();
      const domain = functions[currentFunction].domain;
      currentX = domain[0];
      updateSliderFromX(currentX);
      drawVisualization(currentX);
    });

    viewModeRadios.forEach(radio => {
      radio.addEventListener('change', function() {
        if (this.checked) {
          viewMode = this.value;
          drawVisualization(currentX);
        }
      });
    });

    xSlider.addEventListener('input', function() {
      currentX = getXFromSlider();
      drawVisualization(currentX);
    });

    playPauseBtn.addEventListener('click', function() {
      isPlaying = !isPlaying;
      if (isPlaying) {
        this.textContent = "‚è∏ Pause";
        animate();
      } else {
        this.textContent = "‚ñ∂ Play";
        cancelAnimationFrame(animationFrame);
      }
    });

    resetBtn.addEventListener('click', function() {
      const domain = functions[currentFunction].domain;
      currentX = domain[0];
      updateSliderFromX(currentX);
      drawVisualization(currentX);
    });

    function animate() {
      if (!isPlaying) return;
      
      const domain = functions[currentFunction].domain;
      const step = (domain[1] - domain[0]) / 300;
      currentX += step;
      
      if (currentX > domain[1]) {
        currentX = domain[0];
      }
      
      updateSliderFromX(currentX);
      drawVisualization(currentX);
      
      animationFrame = requestAnimationFrame(animate);
    }

    // Initialize
    updateFunctionInfo();
    drawVisualization(currentX);
  </script>
</body>
</html>

