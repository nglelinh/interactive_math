<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minh h·ªça Gradient Descent</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .control-group {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .control-group h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #fff;
        }
        .control-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .control-row label {
            min-width: 120px;
            margin-right: 10px;
        }
        input[type="range"] {
            flex: 1;
            margin-right: 10px;
        }
        input[type="number"] {
            width: 80px;
            padding: 5px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }
        button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
        }
        button:hover {
            transform: scale(1.05);
        }
        .canvas-container {
            text-align: center;
            margin: 20px 0;
        }
        canvas {
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            background: white;
        }
        .info-panel {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .info-panel h3 {
            margin-top: 0;
            color: #fff;
        }
        .formula {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }
        .optimization-info {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: bold;
        }
        .iteration-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .iteration-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .iteration-card.current {
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }
        .function-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        .function-selector button {
            flex: 1;
            padding: 8px 15px;
            font-size: 0.9em;
        }
        .function-selector button.active {
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }
    </style>





</head>
<body>
    <div class="container">
        <h1>üìâ Minh h·ªça Gradient Descent</h1>
        
        <div class="controls">
            <div class="control-group">
                <h3>üìä H√†m m·ª•c ti√™u</h3>
                <div class="function-selector">
                    <button onclick="setFunction('quadratic')" class="active">f(x) = x¬≤ + 2</button>
                    <button onclick="setFunction('rosenbrock')">Rosenbrock</button>
                    <button onclick="setFunction('himmelblau')">Himmelblau</button>
                </div>
                <div class="formula">
                    <strong>C√¥ng th·ª©c c·∫≠p nh·∫≠t: </strong> x_{t+1} = x_t - Œ±‚àáf(x_t)
                </div>
            </div>
            
            <div class="control-group">
                <h3>‚öôÔ∏è Tham s·ªë t·ªëi ∆∞u h√≥a</h3>
                <div class="control-row">
                    <label>Learning rate (Œ±):</label>
                    <input type="range" id="learningRate" min="0.01" max="0.5" value="0.1" step="0.01">
                    <input type="number" id="learningRateValue" value="0.1" min="0.01" max="0.5" step="0.01">
                </div>
                <div class="control-row">
                    <label>ƒêi·ªÉm b·∫Øt ƒë·∫ßu (x):</label>
                    <input type="range" id="startX" min="-5" max="5" value="-3" step="0.1">
                    <input type="number" id="startXValue" value="-3" min="-5" max="5" step="0.1">
                </div>
                <div class="control-row">
                    <label>S·ªë b∆∞·ªõc t·ªëi ƒëa:</label>
                    <input type="range" id="maxIterations" min="10" max="100" value="50" step="5">
                    <input type="number" id="maxIterationsValue" value="50" min="10" max="100" step="5">
                </div>
            </div>
            
            <div class="control-group">
                <h3>üéÆ ƒêi·ªÅu khi·ªÉn</h3>
                <div class="control-row">
                    <button onclick="startOptimization()">‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu</button>
                    <button onclick="stepOptimization()">‚è≠Ô∏è B∆∞·ªõc ti·∫øp</button>
                    <button onclick="resetOptimization()">üîÑ L√†m l·∫°i</button>
                </div>
                <div class="control-row">
                    <button onclick="setAutoPlay()">üîÑ T·ª± ƒë·ªông</button>
                    <button onclick="stopAutoPlay()">‚èπÔ∏è D·ª´ng</button>
                </div>
                <div class="optimization-info">
                    <strong>Tr·∫°ng th√°i:</strong> <span id="optimizationStatus">S·∫µn s√†ng</span>
                </div>
            </div>
        </div>
        
        <div class="canvas-container">
            <canvas id="gdCanvas" width="800" height="600"></canvas>
        </div>
        
        <div class="info-panel">
            <h3>üìà Th√¥ng tin t·ªëi ∆∞u h√≥a</h3>
            <div class="iteration-info" id="iterationInfo">
                <!-- Iteration information will be displayed here -->
            </div>
            
            <h4>üìä Th√¥ng tin chi ti·∫øt:</h4>
            <div id="detailInfo">
                <p><strong>H√†m hi·ªán t·∫°i:</strong> <span id="currentFunction">f(x) = x¬≤ + 2</span></p>
                <p><strong>ƒê·∫°o h√†m:</strong> <span id="derivativeFormula">f'(x) = 2x</span></p>
                <p><strong>ƒêi·ªÉm hi·ªán t·∫°i:</strong> <span id="currentPoint">x = -3.0</span></p>
                <p><strong>Gi√° tr·ªã h√†m:</strong> <span id="currentValue">f(x) = 11.0</span></p>
                <p><strong>Gradient:</strong> <span id="currentGradient">‚àáf(x) = -6.0</span></p>
                <p><strong>B∆∞·ªõc c·∫≠p nh·∫≠t:</strong> <span id="updateStep">Œîx = 0.6</span></p>
            </div>
        </div>
    </div>

    <script>
        // Canvas setup
        const canvas = document.getElementById('gdCanvas');
        const ctx = canvas.getContext('2d');
        
        // Optimization state
        let currentFunction = 'quadratic';
        let learningRate = 0.1;
        let startX = -3;
        let maxIterations = 50;
        let currentIteration = 0;
        let currentX = startX;
        let optimizationHistory = [];
        let isRunning = false;
        let autoPlayInterval = null;
        
        // Function definitions
        const functions = {
            quadratic: {
                name: 'f(x) = x¬≤ + 2',
                derivativeString: 'f\'(x) = 2x',
                evaluate: (x) => x * x + 2,
                derivative: (x) => 2 * x
            },
            rosenbrock: {
                name: 'f(x) = (1-x)¬≤ + 100(x¬≤-x)¬≤',
                derivativeString: 'f\'(x) = -2(1-x) + 400x(x¬≤-x)',
                evaluate: (x) => Math.pow(1 - x, 2) + 100 * Math.pow(x * x - x, 2),
                derivative: (x) => -2 * (1 - x) + 400 * x * (x * x - x)
            },
            himmelblau: {
                name: 'f(x) = (x¬≤+x-11)¬≤ + (x+x¬≤-7)¬≤',
                derivativeString: 'f\'(x) = 2(x¬≤+x-11)(2x+1) + 2(x+x¬≤-7)(1+2x)',
                evaluate: (x) => Math.pow(x * x + x - 11, 2) + Math.pow(x + x * x - 7, 2),
                derivative: (x) => 2 * (x * x + x - 11) * (2 * x + 1) + 2 * (x + x * x - 7) * (1 + 2 * x)
            }
        };
        
        // Update parameters
        function updateParameters() {
            learningRate = parseFloat(document.getElementById('learningRateValue').value);
            startX = parseFloat(document.getElementById('startXValue').value);
            maxIterations = parseInt(document.getElementById('maxIterationsValue').value);
        }
        
        // Set function
        function setFunction(funcName) {
            currentFunction = funcName;
            document.querySelectorAll('.function-selector button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            resetOptimization();
            drawOptimization();
        }
        
        // Start optimization
        function startOptimization() {
            updateParameters();
            resetOptimization();
            stepOptimization();
        }
        
        // Step optimization
        function stepOptimization() {
            if (currentIteration >= maxIterations) {
                document.getElementById('optimizationStatus').textContent = 'Ho√†n th√†nh';
                return;
            }
            
            const currentFunc = functions[currentFunction];
            const currentValue = currentFunc.evaluate(currentX);
            const gradient = currentFunc.derivative(currentX);
            const updateStep = learningRate * gradient;
            const newX = currentX - updateStep;
            
            optimizationHistory.push({
                iteration: currentIteration,
                x: currentX,
                value: currentValue,
                gradient: gradient,
                updateStep: updateStep
            });
            
            currentX = newX;
            currentIteration++;
            
            updateDisplay();
            drawOptimization();
        }
        
        // Reset optimization
        function resetOptimization() {
            currentIteration = 0;
            currentX = startX;
            optimizationHistory = [];
            isRunning = false;
            if (autoPlayInterval) {
                clearInterval(autoPlayInterval);
                autoPlayInterval = null;
            }
            document.getElementById('optimizationStatus').textContent = 'S·∫µn s√†ng';
            updateDisplay();
            drawOptimization();
        }
        
        // Auto play
        function setAutoPlay() {
            if (autoPlayInterval) {
                clearInterval(autoPlayInterval);
            }
            autoPlayInterval = setInterval(() => {
                if (currentIteration < maxIterations) {
                    stepOptimization();
                } else {
                    stopAutoPlay();
                }
            }, 500);
            isRunning = true;
            document.getElementById('optimizationStatus').textContent = 'ƒêang ch·∫°y...';
        }
        
        // Stop auto play
        function stopAutoPlay() {
            if (autoPlayInterval) {
                clearInterval(autoPlayInterval);
                autoPlayInterval = null;
            }
            isRunning = false;
            document.getElementById('optimizationStatus').textContent = 'ƒê√£ d·ª´ng';
        }
        
        // Update display
        function updateDisplay() {
            const currentFunc = functions[currentFunction];
            const currentValue = currentFunc.evaluate(currentX);
            const gradient = currentFunc.derivative(currentX);
            const updateStep = learningRate * gradient;
            
            document.getElementById('currentFunction').textContent = currentFunc.name;
            document.getElementById('derivativeFormula').textContent = currentFunc.derivativeString;
            document.getElementById('currentPoint').textContent = `x = ${currentX.toFixed(3)}`;
            document.getElementById('currentValue').textContent = `f(x) = ${currentValue.toFixed(3)}`;
            document.getElementById('currentGradient').textContent = `‚àáf(x) = ${gradient.toFixed(3)}`;
            document.getElementById('updateStep').textContent = `Œîx = ${updateStep.toFixed(3)}`;
            
            // Update iteration info
            const container = document.getElementById('iterationInfo');
            let html = '';
            
            const recentHistory = optimizationHistory.slice(-5);
            recentHistory.forEach((step, index) => {
                const isCurrent = step.iteration === currentIteration - 1;
                html += `
                    <div class="iteration-card ${isCurrent ? 'current' : ''}">
                        <strong>B∆∞·ªõc ${step.iteration}</strong><br>
                        x = ${step.x.toFixed(3)}<br>
                        f(x) = ${step.value.toFixed(3)}<br>
                        ‚àáf(x) = ${step.gradient.toFixed(3)}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        // Draw optimization
        function drawOptimization() {
            // Clear canvas
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Set up coordinate system
            const margin = 50;
            const width = canvas.width - 2 * margin;
            const height = canvas.height - 2 * margin;
            const xMin = -5;
            const xMax = 5;
            const scaleX = width / (xMax - xMin);
            const scaleY = height / 20; // Assuming function values are reasonable
            
            // Transform function
            function transform(x, y) {
                return {
                    x: margin + (x - xMin) * scaleX,
                    y: canvas.height - margin - (y + 10) * scaleY
                };
            }
            
            // Draw grid
            ctx.strokeStyle = '#f0f0f0';
            ctx.lineWidth = 1;
            for (let i = xMin; i <= xMax; i++) {
                const pos = transform(i, 0);
                ctx.beginPath();
                ctx.moveTo(pos.x, margin);
                ctx.lineTo(pos.x, canvas.height - margin);
                ctx.stroke();
            }
            for (let i = -10; i <= 10; i++) {
                const pos = transform(0, i);
                ctx.beginPath();
                ctx.moveTo(margin, pos.y);
                ctx.lineTo(canvas.width - margin, pos.y);
                ctx.stroke();
            }
            
            // Draw axes
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            const origin = transform(0, 0);
            ctx.beginPath();
            ctx.moveTo(origin.x, margin);
            ctx.lineTo(origin.x, canvas.height - margin);
            ctx.moveTo(margin, origin.y);
            ctx.lineTo(canvas.width - margin, origin.y);
            ctx.stroke();
            
            // Draw axis labels
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('x', canvas.width / 2, canvas.height - 10);
            ctx.save();
            ctx.translate(20, canvas.height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('f(x)', 0, 0);
            ctx.restore();
            
            // Draw function
            const currentFunc = functions[currentFunction];
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let i = 0; i <= width; i++) {
                const x = xMin + (i / width) * (xMax - xMin);
                const y = currentFunc.evaluate(x);
                const pos = transform(x, y);
                if (i === 0) {
                    ctx.moveTo(pos.x, pos.y);
                } else {
                    ctx.lineTo(pos.x, pos.y);
                }
            }
            ctx.stroke();
            
            // Draw optimization path
            if (optimizationHistory.length > 0) {
                ctx.strokeStyle = '#ff6b6b';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                
                optimizationHistory.forEach((step, index) => {
                    const pos = transform(step.x, step.value);
                    if (index === 0) {
                        ctx.moveTo(pos.x, pos.y);
                    } else {
                        ctx.lineTo(pos.x, pos.y);
                    }
                });
                
                ctx.stroke();
                ctx.setLineDash([]);
                
                // Draw points
                optimizationHistory.forEach((step, index) => {
                    const pos = transform(step.x, step.value);
                    ctx.fillStyle = index === optimizationHistory.length - 1 ? '#ff6b6b' : '#4CAF50';
                    ctx.beginPath();
                    ctx.arc(pos.x, pos.y, 6, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    // Draw gradient arrows
                    if (index < optimizationHistory.length - 1) {
                        const nextStep = optimizationHistory[index + 1];
                        const gradient = step.gradient;
                        const arrowLength = 30;
                        const arrowAngle = Math.atan2(-gradient, 1);
                        
                        ctx.strokeStyle = '#ff6b6b';
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        ctx.moveTo(pos.x, pos.y);
                        ctx.lineTo(
                            pos.x + arrowLength * Math.cos(arrowAngle),
                            pos.y + arrowLength * Math.sin(arrowAngle)
                        );
                        ctx.stroke();
                        
                        // Arrow head
                        ctx.beginPath();
                        ctx.moveTo(
                            pos.x + arrowLength * Math.cos(arrowAngle),
                            pos.y + arrowLength * Math.sin(arrowAngle)
                        );
                        ctx.lineTo(
                            pos.x + (arrowLength - 10) * Math.cos(arrowAngle - 0.3),
                            pos.y + (arrowLength - 10) * Math.sin(arrowAngle - 0.3)
                        );
                        ctx.moveTo(
                            pos.x + arrowLength * Math.cos(arrowAngle),
                            pos.y + arrowLength * Math.sin(arrowAngle)
                        );
                        ctx.lineTo(
                            pos.x + (arrowLength - 10) * Math.cos(arrowAngle + 0.3),
                            pos.y + (arrowLength - 10) * Math.sin(arrowAngle + 0.3)
                        );
                        ctx.stroke();
                    }
                });
            }
            
            // Draw current point
            const currentValue = currentFunc.evaluate(currentX);
            const currentPos = transform(currentX, currentValue);
            
            ctx.fillStyle = '#ff6b6b';
            ctx.beginPath();
            ctx.arc(currentPos.x, currentPos.y, 8, 0, 2 * Math.PI);
            ctx.fill();
            
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'left';
            ctx.fillText(`x = ${currentX.toFixed(2)}`, currentPos.x + 10, currentPos.y - 10);
        }
        
        // Event listeners
        document.getElementById('learningRate').addEventListener('input', function() {
            document.getElementById('learningRateValue').value = this.value;
        });
        
        document.getElementById('learningRateValue').addEventListener('input', function() {
            document.getElementById('learningRate').value = this.value;
        });
        
        document.getElementById('startX').addEventListener('input', function() {
            document.getElementById('startXValue').value = this.value;
        });
        
        document.getElementById('startXValue').addEventListener('input', function() {
            document.getElementById('startX').value = this.value;
        });
        
        document.getElementById('maxIterations').addEventListener('input', function() {
            document.getElementById('maxIterationsValue').value = this.value;
        });
        
        document.getElementById('maxIterationsValue').addEventListener('input', function() {
            document.getElementById('maxIterations').value = this.value;
        });
        
        // Initialize
        drawOptimization();
        updateDisplay();
    </script>
</body>
</html> 