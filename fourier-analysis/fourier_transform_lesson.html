<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fourier Transform - B√†i H·ªçc T∆∞∆°ng T√°c</title>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    <script src="../math-simple.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-size: 2.8em;
            font-weight: 700;
            background: linear-gradient(45deg, #00d4ff, #ff6b6b);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .lesson-nav {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 10px;
        }

        .nav-button {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 0 5px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .nav-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-button.active {
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
        }

        .lesson-section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .lesson-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .theory-box {
            background: rgba(255, 215, 0, 0.1);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #FFD700;
        }

        .content-layout {
            display: grid;
            grid-template-columns: 1fr 450px;
            gap: 25px;
            margin-bottom: 25px;
        }

        .visualization-area {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .controls-panel {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #fff;
        }

        .slider-container {
            position: relative;
            margin-bottom: 10px;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 212, 255, 0.3);
        }

        .value-display {
            text-align: center;
            font-weight: bold;
            color: #00d4ff;
            margin-top: 5px;
        }

        .canvas-container {
            background: #000;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 15px;
        }

        canvas {
            border-radius: 8px;
            display: block;
        }

        .formula-box {
            background: rgba(0, 150, 255, 0.1);
            border: 1px solid rgba(0, 150, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .key-concept {
            background: rgba(255, 100, 100, 0.1);
            border-left: 4px solid #ff6464;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .example-box {
            background: rgba(100, 255, 100, 0.1);
            border-left: 4px solid #64ff64;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .step-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .step-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .step-number {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .interactive-demo {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .demo-title {
            color: #00d4ff;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .component-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .component-item.fundamental {
            border-left-color: #FF6B6B;
        }
        
        .component-item.harmonic {
            border-left-color: #4ECDC4;
        }
        
        .component-info {
            flex-grow: 1;
        }
        
        .component-controls {
            display: flex;
            gap: 8px;
        }
        
        .component-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .play-btn {
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            color: white;
        }
        
        .toggle-btn {
            background: linear-gradient(45deg, #4ECDC4, #44A08D);
            color: white;
        }
        
        .toggle-btn.disabled {
            background: #666;
            opacity: 0.5;
        }
        
        .component-btn:hover:not(.disabled) {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .chord-note-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 6px;
            border-left: 4px solid;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chord-note-item.note1 {
            border-left-color: #FF6B6B;
        }
        
        .chord-note-item.note2 {
            border-left-color: #4ECDC4;
        }
        
        .chord-note-item.note3 {
            border-left-color: #FFD93D;
        }
        
        .note-info {
            flex-grow: 1;
        }
        
        .note-controls {
            display: flex;
            gap: 6px;
        }
        
        .note-btn {
            padding: 4px 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            font-weight: bold;
            transition: all 0.3s ease;
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            color: white;
        }
        
        .note-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* New styles for complex number section */
        .complex-visual {
            background: rgba(138, 43, 226, 0.1);
            border: 2px solid rgba(138, 43, 226, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .euler-demo {
            background: rgba(255, 140, 0, 0.1);
            border: 2px solid rgba(255, 140, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .rotating-vector {
            display: inline-block;
            width: 200px;
            height: 200px;
            border: 2px solid #00d4ff;
            border-radius: 50%;
            position: relative;
            margin: 20px;
            background: radial-gradient(circle, rgba(0,212,255,0.1) 0%, transparent 100%);
        }

        .vector-line {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 80px;
            height: 2px;
            background: #ff6b6b;
            transform-origin: left center;
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .phasor-diagram {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .real-imaginary {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .frequency-spectrum {
            background: rgba(34, 193, 195, 0.1);
            border: 2px solid rgba(34, 193, 195, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .interactive-complex {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .complex-plane {
            width: 300px;
            height: 300px;
            border: 2px solid #00d4ff;
            background: rgba(0, 0, 0, 0.7);
            margin: 20px auto;
            position: relative;
        }

        .magnitude-phase {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .magnitude-phase > div {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .content-layout {
                grid-template-columns: 1fr;
            }
            
            .lesson-nav {
                flex-wrap: wrap;
            }
            
            .nav-button {
                margin: 2px;
                padding: 8px 16px;
                font-size: 12px;
            }

            .phasor-diagram {
                grid-template-columns: 1fr;
            }

            .magnitude-phase {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåä Fourier Transform - B√†i H·ªçc T∆∞∆°ng T√°c</h1>
        
        <div class="lesson-nav">
            <button class="nav-button active" onclick="showSection('intro')">Gi·ªõi Thi·ªáu</button>
            <button class="nav-button" onclick="showSection('history')">L·ªãch S·ª≠</button>
            <button class="nav-button" onclick="showSection('theory')">L√Ω Thuy·∫øt</button>
            <button class="nav-button" onclick="showSection('complex')">S·ªë Ph·ª©c</button>
            <button class="nav-button" onclick="showSection('examples')">V√≠ D·ª• Chi Ti·∫øt</button>
            <button class="nav-button" onclick="showSection('visualization')">Tr·ª±c Quan H√≥a</button>
            <button class="nav-button" onclick="showSection('applications')">·ª®ng D·ª•ng</button>
            <button class="nav-button" onclick="showSection('practice')">Th·ª±c H√†nh</button>
        </div>

        <!-- GI·ªöI THI·ªÜU -->
        <div id="intro" class="lesson-section active">
            <div class="theory-box">
                <h2>üéµ Fourier Transform l√† g√¨?</h2>
                <p>Fourier Transform (Bi·∫øn ƒë·ªïi Fourier) l√† m·ªôt trong nh·ªØng c√¥ng c·ª• to√°n h·ªçc m·∫°nh m·∫Ω nh·∫•t, cho ph√©p ch√∫ng ta:</p>
                <ul>
                    <li><strong>Ph√¢n t√≠ch t√≠n hi·ªáu:</strong> Chuy·ªÉn t·ª´ mi·ªÅn th·ªùi gian sang mi·ªÅn t·∫ßn s·ªë</li>
                    <li><strong>Hi·ªÉu √¢m thanh:</strong> T√°ch c√°c n·ªët nh·∫°c t·ª´ m·ªôt b·∫£n nh·∫°c ph·ª©c t·∫°p</li>
                    <li><strong>X·ª≠ l√Ω h√¨nh ·∫£nh:</strong> JPEG compression, edge detection</li>
                    <li><strong>Machine Learning:</strong> Feature extraction, convolution</li>
                </ul>
            </div>

            <div class="key-concept">
                <h3>üí° √ù t∆∞·ªüng c·ªët l√µi</h3>
                <p><strong>M·ªçi t√≠n hi·ªáu ph·ª©c t·∫°p ƒë·ªÅu c√≥ th·ªÉ ƒë∆∞·ª£c bi·ªÉu di·ªÖn nh∆∞ t·ªïng c·ªßa c√°c s√≥ng sin ƒë∆°n gi·∫£n!</strong></p>
                <p>Gi·ªëng nh∆∞ vi·ªác ph√¢n t√≠ch √°nh s√°ng tr·∫Øng th√†nh c√°c m√†u c·∫ßu v·ªìng qua lƒÉng k√≠nh, Fourier Transform ph√¢n t√≠ch t√≠n hi·ªáu th√†nh c√°c th√†nh ph·∫ßn t·∫ßn s·ªë.</p>
            </div>

            <div class="step-container">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <h4>T√≠n hi·ªáu ƒë·∫ßu v√†o</h4>
                    <p>M·ªôt t√≠n hi·ªáu ph·ª©c t·∫°p trong mi·ªÅn th·ªùi gian f(t)</p>
                </div>
                <div class="step-card">
                    <div class="step-number">2</div>
                    <h4>Bi·∫øn ƒë·ªïi Fourier</h4>
                    <p>√Åp d·ª•ng c√¥ng th·ª©c to√°n h·ªçc ƒë·ªÉ chuy·ªÉn ƒë·ªïi</p>
                </div>
                <div class="step-card">
                    <div class="step-number">3</div>
                    <h4>Ph·ªï t·∫ßn s·ªë</h4>
                    <p>K·∫øt qu·∫£ F(œâ) cho bi·∫øt th√†nh ph·∫ßn t·∫ßn s·ªë n√†o c√≥ trong t√≠n hi·ªáu</p>
                </div>
            </div>
        </div>

        <!-- L·ªäCH S·ª¨ -->
        <div id="history" class="lesson-section">
            <div class="theory-box">
                <h2>üìö L·ªãch S·ª≠ Ph√°t Tri·ªÉn Fourier Transform</h2>
                
                <h3>üé≠ Joseph Fourier (1768-1830)</h3>
                <p><strong>Nh√† to√°n h·ªçc v√† v·∫≠t l√Ω h·ªçc ng∆∞·ªùi Ph√°p</strong> - Joseph Fourier ƒë√£ ƒë·∫∑t n·ªÅn m√≥ng cho l√Ω thuy·∫øt bi·∫øn ƒë·ªïi Fourier khi nghi√™n c·ª©u v·ªÅ s·ª± truy·ªÅn nhi·ªát.</p>
                
                <div style="background: rgba(0, 212, 255, 0.1); padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #00d4ff;">
                    <h4>üî• Nghi√™n c·ª©u v·ªÅ truy·ªÅn nhi·ªát (1807)</h4>
                    <p>Fourier ph√°t hi·ªán r·∫±ng b·∫•t k·ª≥ h√†m s·ªë n√†o c≈©ng c√≥ th·ªÉ ƒë∆∞·ª£c bi·ªÉu di·ªÖn d∆∞·ªõi d·∫°ng t·ªïng c·ªßa c√°c h√†m sin v√† cos. √îng ƒë√£ tr√¨nh b√†y √Ω t∆∞·ªüng n√†y trong b√†i b√°o "M√©moire sur la propagation de la chaleur dans les corps solides" t·∫°i Vi·ªán H√†n l√¢m Khoa h·ªçc Paris.</p>
                </div>

                <h3>‚ö° Ph√°t tri·ªÉn hi·ªán ƒë·∫°i</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div style="background: rgba(255, 215, 0, 0.1); padding: 15px; border-radius: 8px;">
                        <h4>üî¨ Th·∫ø k·ª∑ 19-20</h4>
                        <ul>
                            <li><strong>Peter Gustav Lejeune Dirichlet (1829)</strong>: ƒê∆∞a ra ƒëi·ªÅu ki·ªán Dirichlet cho chu·ªói Fourier</li>
                            <li><strong>Georg Riemann (1850s)</strong>: Ph√°t tri·ªÉn l√Ω thuy·∫øt t√≠ch ph√¢n Riemann li√™n quan ƒë·∫øn Fourier</li>
                            <li><strong>Henri Lebesgue (1900s)</strong>: T·ªïng qu√°t h√≥a v·ªõi l√Ω thuy·∫øt ƒëo</li>
                        </ul>
                    </div>
                    <div style="background: rgba(255, 99, 132, 0.1); padding: 15px; border-radius: 8px;">
                        <h4>üíª K·ª∑ nguy√™n s·ªë (1960s)</h4>
                        <ul>
                            <li><strong>James Cooley & John Tukey (1965)</strong>: Ph√°t minh Fast Fourier Transform (FFT)</li>
                            <li><strong>C√°ch m·∫°ng x·ª≠ l√Ω t√≠n hi·ªáu s·ªë</strong></li>
                            <li><strong>·ª®ng d·ª•ng trong m√°y t√≠nh</strong></li>
                        </ul>
                    </div>
                </div>

                <h3>üåç T√°c ƒë·ªông l·ªãch s·ª≠</h3>
                <div style="background: rgba(76, 175, 80, 0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h4>üì° Cu·ªôc c√°ch m·∫°ng vi·ªÖn th√¥ng</h4>
                    <p>Fourier Transform ƒë√£ tr·ªü th√†nh n·ªÅn t·∫£ng cho:</p>
                    <ul>
                        <li><strong>Radio v√† TV</strong>: ƒêi·ªÅu ch·∫ø v√† gi·∫£i ƒëi·ªÅu ch·∫ø t√≠n hi·ªáu</li>
                        <li><strong>K·ª∑ nguy√™n Internet</strong>: X·ª≠ l√Ω t√≠n hi·ªáu s·ªë, n√©n d·ªØ li·ªáu</li>
                        <li><strong>Y h·ªçc hi·ªán ƒë·∫°i</strong>: MRI, CT scan</li>
                        <li><strong>√Çm nh·∫°c s·ªë</strong>: MP3, audio processing</li>
                    </ul>
                </div>

                <h3>üèÜ Di s·∫£n khoa h·ªçc</h3>
                <p>T·ª´ vi·ªác nghi√™n c·ª©u s·ª± truy·ªÅn nhi·ªát trong kim lo·∫°i c·ªßa Fourier, l√Ω thuy·∫øt n√†y ƒë√£ ph√°t tri·ªÉn th√†nh m·ªôt trong nh·ªØng c√¥ng c·ª• to√°n h·ªçc quan tr·ªçng nh·∫•t, ·∫£nh h∆∞·ªüng ƒë·∫øn h·∫ßu h·∫øt m·ªçi lƒ©nh v·ª±c khoa h·ªçc v√† c√¥ng ngh·ªá hi·ªán ƒë·∫°i.</p>
                
                <div style="text-align: center; background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px; margin-top: 20px;">
                    <p style="font-style: italic; color: #FFD700;">"To√°n h·ªçc l√† ng√¥n ng·ªØ m√† Ch√∫a ƒë√£ vi·∫øt n√™n v≈© tr·ª•" - Joseph Fourier</p>
                </div>
            </div>
        </div>

        <!-- L√ù THUY·∫æT -->
        <div id="theory" class="lesson-section">
            <div class="theory-box">
                <h2>üìê C√¥ng th·ª©c Fourier Transform</h2>
            </div>

            <div class="formula-box">
                <h3>Fourier Transform (Bi·∫øn ƒë·ªïi thu·∫≠n)</h3>
                <p>$$F(\omega) = \int_{-\infty}^{\infty} f(t) e^{-i\omega t} dt$$</p>
            </div>

            <div class="formula-box">
                <h3>Inverse Fourier Transform (Bi·∫øn ƒë·ªïi ngh·ªãch)</h3>
                <p>$$f(t) = \frac{1}{2\pi} \int_{-\infty}^{\infty} F(\omega) e^{i\omega t} d\omega$$</p>
            </div>

            <div class="key-concept">
                <h3>üßÆ Hi·ªÉu c√¥ng th·ª©c</h3>
                <ul>
                    <li><strong>f(t):</strong> T√≠n hi·ªáu g·ªëc trong mi·ªÅn th·ªùi gian</li>
                    <li><strong>F(œâ):</strong> Ph·ªï t·∫ßn s·ªë (th∆∞·ªùng l√† s·ªë ph·ª©c)</li>
                    <li><strong>œâ:</strong> T·∫ßn s·ªë g√≥c (rad/s)</li>
                    <li><strong>e^(-iœât):</strong> H√†m m≈© ph·ª©c = cos(œât) - i√ósin(œât)</li>
                </ul>
            </div>

            <div class="example-box">
                <h3>üéº V√≠ d·ª• ƒë∆°n gi·∫£n</h3>
                <p><strong>T√≠n hi·ªáu:</strong> f(t) = cos(2œÄf‚ÇÄt)</p>
                <p><strong>Fourier Transform:</strong> F(œâ) = œÄ[Œ¥(œâ - 2œÄf‚ÇÄ) + Œ¥(œâ + 2œÄf‚ÇÄ)]</p>
                <p><strong>√ù nghƒ©a:</strong> S√≥ng cos thu·∫ßn t√∫y ch·ªâ c√≥ hai t·∫ßn s·ªë: +f‚ÇÄ v√† -f‚ÇÄ</p>
            </div>

            <div class="theory-box">
                <h3>üìä T√≠nh ch·∫•t quan tr·ªçng</h3>
                <ul>
                    <li><strong>Tuy·∫øn t√≠nh:</strong> FT[af(t) + bg(t)] = aF(œâ) + bG(œâ)</li>
                    <li><strong>D·ªùi th·ªùi gian:</strong> FT[f(t-t‚ÇÄ)] = F(œâ)e^(-iœât‚ÇÄ)</li>
                    <li><strong>Modulation:</strong> FT[f(t)e^(iœâ‚ÇÄt)] = F(œâ-œâ‚ÇÄ)</li>
                    <li><strong>Convolution:</strong> FT[f*g] = F(œâ)√óG(œâ)</li>
                </ul>
            </div>
        </div>

        <!-- S·ªê PH·ª®C V√Ä FOURIER TRANSFORM -->
        <div id="complex" class="lesson-section">
            <div class="theory-box">
                <h2>üî¢ S·ªë Ph·ª©c trong Fourier Transform</h2>
                <p>S·ªë ph·ª©c l√† ch√¨a kh√≥a ƒë·ªÉ hi·ªÉu s√¢u v·ªÅ Fourier Transform. H√£y kh√°m ph√° t·∫°i sao!</p>
            </div>

            <div class="complex-visual">
                <h3>üåü C√¥ng th·ª©c Euler - C·∫ßu n·ªëi th·∫ßn k·ª≥</h3>
                <div class="euler-demo">
                    <h4>$$e^{i\theta} = \cos(\theta) + i\sin(\theta)$$</h4>
                    <p><strong>√ù nghƒ©a:</strong> S·ªë ph·ª©c tr√™n ƒë∆∞·ªùng tr√≤n ƒë∆°n v·ªã!</p>
                    
                    <div class="rotating-vector">
                        <div class="vector-line"></div>
                        <div style="position: absolute; top: -10px; left: 50%; transform: translateX(-50%); color: #00d4ff; font-size: 12px;">Im</div>
                        <div style="position: absolute; top: 50%; right: -15px; transform: translateY(-50%); color: #00d4ff; font-size: 12px;">Re</div>
                        <div style="position: absolute; bottom: 50%; left: 50%; color: #ff6b6b; font-size: 12px;">e^(iœât)</div>
                    </div>
                    
                    <p style="margin-top: 20px;">Vector xoay v·ªõi t·ªëc ƒë·ªô œâ rad/s</p>
                </div>
            </div>

            <div class="key-concept">
                <h3>üßÆ T·∫°i sao c·∫ßn s·ªë ph·ª©c?</h3>
                <div class="phasor-diagram">
                    <div class="real-imaginary">
                        <h4>üîµ Ph·∫ßn Th·ª±c (Real)</h4>
                        <p>$$\text{Re}[F(\omega)] = \int_{-\infty}^{\infty} f(t) \cos(\omega t) dt$$</p>
                        <p><strong>Th·ªÉ hi·ªán:</strong> Th√†nh ph·∫ßn cosine c·ªßa t√≠n hi·ªáu t·∫°i t·∫ßn s·ªë œâ</p>
                    </div>
                    <div class="real-imaginary">
                        <h4>üî¥ Ph·∫ßn ·∫¢o (Imaginary)</h4>
                        <p>$$\text{Im}[F(\omega)] = -\int_{-\infty}^{\infty} f(t) \sin(\omega t) dt$$</p>
                        <p><strong>Th·ªÉ hi·ªán:</strong> Th√†nh ph·∫ßn sine c·ªßa t√≠n hi·ªáu t·∫°i t·∫ßn s·ªë œâ</p>
                    </div>
                </div>
            </div>

            <div class="frequency-spectrum">
                <h3>üìä Bi·ªÉu di·ªÖn s·ªë ph·ª©c trong ph·ªï t·∫ßn s·ªë</h3>
                <div class="magnitude-phase">
                    <div>
                        <h4>üéµ ƒê·ªô l·ªõn (Magnitude)</h4>
                        <p>$$|F(\omega)| = \sqrt{[\text{Re}[F(\omega)]]^2 + [\text{Im}[F(\omega)]]^2}$$</p>
                        <p><strong>√ù nghƒ©a:</strong> "√Çm l∆∞·ª£ng" c·ªßa t·∫ßn s·ªë œâ trong t√≠n hi·ªáu</p>
                    </div>
                    <div>
                        <h4>üé≠ Pha (Phase)</h4>
                        <p>$$\phi(\omega) = \arctan\left(\frac{\text{Im}[F(\omega)]}{\text{Re}[F(\omega)]}\right)$$</p>
                        <p><strong>√ù nghƒ©a:</strong> "Th·ªùi ƒëi·ªÉm xu·∫•t hi·ªán" c·ªßa t·∫ßn s·ªë œâ</p>
                    </div>
                </div>
            </div>

            <div class="interactive-complex">
                <h3>üéÆ T∆∞∆°ng t√°c v·ªõi s·ªë ph·ª©c</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h4>ƒêi·ªÅu khi·ªÉn s·ªë ph·ª©c:</h4>
                        <div class="control-group">
                            <label>ƒê·ªô l·ªõn (r): <span id="magnitudeValue">1.0</span></label>
                            <input type="range" id="magnitudeSlider" min="0.1" max="2" step="0.1" value="1" oninput="updateComplexDemo()">
                        </div>
                        <div class="control-group">
                            <label>Pha (Œ∏): <span id="phaseValue">0¬∞</span></label>
                            <input type="range" id="phaseSlider" min="0" max="360" step="5" value="0" oninput="updateComplexDemo()">
                        </div>
                        <div class="control-group">
                            <label>T·∫ßn s·ªë (f): <span id="freqValue">1 Hz</span></label>
                            <input type="range" id="freqSlider" min="0.1" max="3" step="0.1" value="1" oninput="updateComplexDemo()">
                        </div>
                    </div>
                    <div>
                        <div class="complex-plane" id="complexPlane">
                            <canvas id="complexCanvas" width="296" height="296"></canvas>
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <div>S·ªë ph·ª©c: <span id="complexNumber">1 + 0i</span></div>
                            <div>D·∫°ng Euler: <span id="eulerForm">1¬∑e^(i¬∑0¬∞)</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="example-box">
                <h3>üéº V√≠ d·ª• th·ª±c t·∫ø: Ph√¢n t√≠ch h·ª£p √¢m</h3>
                <p><strong>T√≠n hi·ªáu:</strong> f(t) = cos(2œÄt) + 0.5¬∑cos(4œÄt) + 0.25¬∑cos(6œÄt)</p>
                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin: 10px 0;">
                    <p><strong>Fourier Transform cho ta:</strong></p>
                    <ul>
                        <li>T·∫ßn s·ªë 1 Hz: Magnitude = 1, Phase = 0¬∞</li>
                        <li>T·∫ßn s·ªë 2 Hz: Magnitude = 0.5, Phase = 0¬∞</li>
                        <li>T·∫ßn s·ªë 3 Hz: Magnitude = 0.25, Phase = 0¬∞</li>
                    </ul>
                </div>
                <p><strong>K·∫øt lu·∫≠n:</strong> C√≥ th·ªÉ t√°ch ri√™ng t·ª´ng "n·ªët nh·∫°c" t·ª´ h·ª£p √¢m ph·ª©c t·∫°p!</p>
            </div>

            <div class="key-concept">
                <h3>üí° T·∫°i sao c·∫ßn t·∫ßn s·ªë √¢m?</h3>
                <p>Trong to√°n h·ªçc, <strong>t·∫ßn s·ªë √¢m</strong> kh√¥ng c√≥ nghƒ©a v·∫≠t l√Ω tr·ª±c ti·∫øp, nh∆∞ng:</p>
                <ul>
                    <li><strong>ƒê·ªëi x·ª©ng to√°n h·ªçc:</strong> cos(œât) c√≥ c·∫£ +œâ v√† -œâ</li>
                    <li><strong>X·ª≠ l√Ω t√≠n hi·ªáu ph·ª©c:</strong> T√°ch ƒë∆∞·ª£c t√≠n hi·ªáu xoay thu·∫≠n/ngh·ªãch</li>
                    <li><strong>Convolution theorem:</strong> Gi√∫p t√≠nh to√°n nhanh h∆°n</li>
                </ul>
            </div>
        </div>

        <!-- V√ç D·ª§ CHI TI·∫æT -->
        <div id="examples" class="lesson-section">
            <div class="theory-box">
                <h2>üìù V√≠ D·ª• Chi Ti·∫øt v·ªõi S·ªë Ph·ª©c</h2>
                <p>H√£y c√πng t√≠nh to√°n t·ª´ng b∆∞·ªõc ƒë·ªÉ hi·ªÉu r√µ c√°ch Fourier Transform ho·∫°t ƒë·ªông!</p>
            </div>

            <div class="example-box">
                <h3>üîç V√≠ d·ª• 1: T√≠n hi·ªáu Cosine ƒë∆°n gi·∫£n</h3>
                <p><strong>Cho:</strong> f(t) = cos(2œÄf‚ÇÄt) v·ªõi f‚ÇÄ = 5 Hz</p>
                
                <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin: 15px 0;">
                    <h4>B∆∞·ªõc 1: Vi·∫øt l·∫°i b·∫±ng c√¥ng th·ª©c Euler</h4>
                    <p>$$\cos(2\pi f_0 t) = \frac{e^{i2\pi f_0 t} + e^{-i2\pi f_0 t}}{2}$$</p>
                    
                    <h4>B∆∞·ªõc 2: √Åp d·ª•ng Fourier Transform</h4>
                    <p>$$F(\omega) = \int_{-\infty}^{\infty} \cos(2\pi f_0 t) e^{-i\omega t} dt$$</p>
                    
                    <h4>B∆∞·ªõc 3: K·∫øt qu·∫£</h4>
                    <p>$$F(\omega) = \pi[\delta(\omega - 2\pi f_0) + \delta(\omega + 2\pi f_0)]$$</p>
                    
                    <h4>Gi·∫£i th√≠ch:</h4>
                    <ul>
                        <li>Hai "gai" t·∫°i œâ = ¬±2œÄ√ó5 = ¬±31.4 rad/s</li>
                        <li>M·ªói gai c√≥ ƒë·ªô cao œÄ (magnitude)</li>
                        <li>Pha = 0¬∞ (v√¨ cosine b·∫Øt ƒë·∫ßu t·ª´ gi√° tr·ªã max)</li>
                    </ul>
                </div>
            </div>

            <div class="example-box">
                <h3>üîç V√≠ d·ª• 2: T√≠n hi·ªáu Sine v·ªõi pha kh√°c 0</h3>
                <p><strong>Cho:</strong> f(t) = sin(2œÄf‚ÇÄt + œÜ) v·ªõi f‚ÇÄ = 3 Hz, œÜ = œÄ/4</p>
                
                <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin: 15px 0;">
                    <h4>B∆∞·ªõc 1: Vi·∫øt l·∫°i b·∫±ng Euler</h4>
                    <p>$$\sin(2\pi f_0 t + \phi) = \frac{e^{i(2\pi f_0 t + \phi)} - e^{-i(2\pi f_0 t + \phi)}}{2i}$$</p>
                    
                    <h4>B∆∞·ªõc 2: T√°ch pha</h4>
                    <p>$$= \frac{e^{i\phi}e^{i2\pi f_0 t} - e^{-i\phi}e^{-i2\pi f_0 t}}{2i}$$</p>
                    
                    <h4>B∆∞·ªõc 3: Fourier Transform</h4>
                    <p>$$F(\omega) = \frac{\pi e^{i\phi}}{i}\delta(\omega - 2\pi f_0) - \frac{\pi e^{-i\phi}}{i}\delta(\omega + 2\pi f_0)$$</p>
                    
                    <h4>Gi·∫£i th√≠ch:</h4>
                    <ul>
                        <li>Hai gai t·∫°i œâ = ¬±2œÄ√ó3 = ¬±18.85 rad/s</li>
                        <li>Magnitude: |F(œâ)| = œÄ t·∫°i c·∫£ hai t·∫ßn s·ªë</li>
                        <li>Phase: +œÄ/4 t·∫°i +18.85, -œÄ/4 t·∫°i -18.85</li>
                        <li>D·ªãch pha œÜ = œÄ/4 = 45¬∞ th·ªÉ hi·ªán t√≠n hi·ªáu b·∫Øt ƒë·∫ßu s·ªõm h∆°n</li>
                    </ul>
                </div>
            </div>

            <div class="example-box">
                <h3>üîç V√≠ d·ª• 3: Xung Gaussian</h3>
                <p><strong>Cho:</strong> f(t) = e^(-t¬≤/2œÉ¬≤) (Gaussian pulse)</p>
                
                <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin: 15px 0;">
                    <h4>T√≠nh ch·∫•t ƒë·∫∑c bi·ªát:</h4>
                    <p>$$F(\omega) = \sigma\sqrt{2\pi} \cdot e^{-\sigma^2\omega^2/2}$$</p>
                    
                    <h4>√ù nghƒ©a quan tr·ªçng:</h4>
                    <ul>
                        <li><strong>Gaussian ‚Üí Gaussian:</strong> Fourier Transform c·ªßa Gaussian v·∫´n l√† Gaussian!</li>
                        <li><strong>Uncertainty Principle:</strong> œÉ nh·ªè (xung h·∫πp) ‚Üí ph·ªï t·∫ßn s·ªë r·ªông</li>
                        <li><strong>·ª®ng d·ª•ng:</strong> Window function trong x·ª≠ l√Ω t√≠n hi·ªáu</li>
                    </ul>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <canvas id="gaussianDemo" width="400" height="200" style="border: 1px solid #00d4ff; border-radius: 5px;"></canvas>
                        <div style="margin-top: 10px;">
                            <label>œÉ (ƒë·ªô r·ªông): <span id="sigmaValue">1.0</span></label><br>
                            <input type="range" id="sigmaSlider" min="0.5" max="3" step="0.1" value="1" oninput="updateGaussianDemo()">
                        </div>
                    </div>
                </div>
            </div>

            <div class="example-box">
                <h3>üîç V√≠ d·ª• 4: S√≥ng vu√¥ng - Series Fourier</h3>
                <p><strong>Cho:</strong> S√≥ng vu√¥ng v·ªõi chu k·ª≥ T</p>
                
                <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin: 15px 0;">
                    <h4>Fourier Series:</h4>
                    <p>$$f(t) = \frac{4}{\pi}\sum_{n=1,3,5,...}^{\infty} \frac{\sin(2\pi nf_0 t)}{n}$$</p>
                    
                    <h4>Ph·ªï t·∫ßn s·ªë:</h4>
                    <ul>
                        <li><strong>T·∫ßn s·ªë c∆° b·∫£n:</strong> f‚ÇÄ = 1/T</li>
                        <li><strong>Harmonic l·∫ª:</strong> 3f‚ÇÄ, 5f‚ÇÄ, 7f‚ÇÄ, ...</li>
                        <li><strong>Amplitude gi·∫£m:</strong> 1/n (1, 1/3, 1/5, 1/7, ...)</li>
                        <li><strong>Kh√¥ng c√≥ harmonic ch·∫µn!</strong></li>
                    </ul>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <canvas id="squareWaveDemo" width="400" height="200" style="border: 1px solid #00d4ff; border-radius: 5px;"></canvas>
                        <div style="margin-top: 10px;">
                            <label>S·ªë harmonics: <span id="harmonicsValue">5</span></label><br>
                            <input type="range" id="harmonicsSlider" min="1" max="15" step="2" value="5" oninput="updateSquareWaveDemo()">
                        </div>
                    </div>
                </div>
            </div>

            <div class="key-concept">
                <h3>üéØ K·∫øt lu·∫≠n t·ª´ c√°c v√≠ d·ª•</h3>
                <ul>
                    <li><strong>T√≠n hi·ªáu ƒë∆°n gi·∫£n:</strong> Ph·ªï t·∫ßn s·ªë t·∫≠p trung (√≠t gai)</li>
                    <li><strong>T√≠n hi·ªáu ph·ª©c t·∫°p:</strong> Ph·ªï t·∫ßn s·ªë r·ªông (nhi·ªÅu harmonic)</li>
                    <li><strong>T√≠n hi·ªáu kh√¥ng li√™n t·ª•c:</strong> Ph·ªï t·∫ßn s·ªë v√¥ h·∫°n</li>
                    <li><strong>Pha quan tr·ªçng:</strong> Quy·∫øt ƒë·ªãnh h√¨nh d·∫°ng t√≠n hi·ªáu</li>
                    <li><strong>S·ªë ph·ª©c c·∫ßn thi·∫øt:</strong> L∆∞u tr·ªØ c·∫£ magnitude v√† phase</li>
                </ul>
            </div>
        </div>

        <!-- TR·ª∞C QUAN H√ìA -->
        <div id="visualization" class="lesson-section">
            <div class="theory-box">
                <h2>üëÅÔ∏è Tr·ª±c Quan H√≥a Fourier Transform</h2>
                <p>Th·ª±c nghi·ªám v·ªõi c√°c t√≠n hi·ªáu kh√°c nhau v√† quan s√°t ph·ªï t·∫ßn s·ªë c·ªßa ch√∫ng!</p>
            </div>

            <div class="content-layout">
                <div class="visualization-area">
                    <div class="canvas-container">
                        <canvas id="timeCanvas" width="400" height="200"></canvas>
                        <div style="text-align: center; color: #00d4ff; font-weight: bold;">Mi·ªÅn Th·ªùi Gian f(t)</div>
                    </div>
                    
                    <div class="canvas-container">
                        <canvas id="freqCanvas" width="400" height="200"></canvas>
                        <div style="text-align: center; color: #ff6b6b; font-weight: bold;">Mi·ªÅn T·∫ßn S·ªë |F(œâ)|</div>
                    </div>
                </div>

                <div class="controls-panel">
                    <div class="control-group">
                        <label>Lo·∫°i t√≠n hi·ªáu:</label>
                        <select id="signalType" onchange="updateVisualization()" style="width: 100%; padding: 8px; border-radius: 5px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3);">
                            <option value="sine">S√≥ng Sin</option>
                            <option value="cosine">S√≥ng Cosine</option>
                            <option value="square">S√≥ng Vu√¥ng</option>
                            <option value="sawtooth">S√≥ng RƒÉng C∆∞a</option>
                            <option value="triangle">S√≥ng Tam Gi√°c</option>
                            <option value="gaussian">Gaussian Pulse</option>
                            <option value="compound">T√≠n hi·ªáu H·ªón H·ª£p</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label>T·∫ßn s·ªë ch√≠nh (Hz):</label>
                        <div class="slider-container">
                            <input type="range" id="frequency" min="0.5" max="10" step="0.1" value="2" oninput="updateVisualization()">
                            <div class="value-display" id="freqValue">2.0 Hz</div>
                        </div>
                        <button id="playFreqBtn" onclick="playSingleTone()" style="width: 100%; padding: 8px; background: linear-gradient(45deg, #ff6b6b, #ff8e53); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; margin-top: 8px; font-size: 14px;">
                            üîä Play Frequency Sound
                        </button>
                    </div>

                    <div class="control-group">
                        <label>Bi√™n ƒë·ªô:</label>
                        <div class="slider-container">
                            <input type="range" id="amplitude" min="0.1" max="2" step="0.1" value="1" oninput="updateVisualization()">
                            <div class="value-display" id="ampValue">1.0</div>
                        </div>
                    </div>

                    <div class="control-group" id="phase-control">
                        <label>Pha (radians):</label>
                        <div class="slider-container">
                            <input type="range" id="phase" min="0" max="6.28" step="0.1" value="0" oninput="updateVisualization()">
                            <div class="value-display" id="phaseValue">0.0 rad</div>
                        </div>
                    </div>

                    <div class="control-group" id="harmonics-control" style="display: none;">
                        <label>S·ªë harmonics:</label>
                        <div class="slider-container">
                            <input type="range" id="harmonics" min="1" max="10" step="1" value="3" oninput="updateVisualization()">
                            <div class="value-display" id="harmonicsValue">3</div>
                        </div>
                    </div>

                    <div class="control-group" id="compound-controls" style="display: none;">
                        <label>T·∫ßn s·ªë th·ª© 2 (Hz):</label>
                        <div class="slider-container">
                            <input type="range" id="freq2" min="0.5" max="10" step="0.1" value="5" oninput="updateVisualization()">
                            <div class="value-display" id="freq2Value">5.0 Hz</div>
                        </div>
                        <label>Bi√™n ƒë·ªô th·ª© 2:</label>
                        <div class="slider-container">
                            <input type="range" id="amp2" min="0.1" max="1" step="0.1" value="0.5" oninput="updateVisualization()">
                            <div class="value-display" id="amp2Value">0.5</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="interactive-demo">
                <div class="demo-title">üéöÔ∏è Th·ª≠ nghi·ªám t∆∞∆°ng t√°c</div>
                <div style="background: rgba(255, 193, 7, 0.2); padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid #FFC107;">
                    <strong>üîä Audio Playback:</strong> Click the sound buttons to hear the actual frequencies! 
                    (Note: Some browsers require user interaction before playing audio)
                </div>
                <p>‚Ä¢ <strong>S√≥ng Sin/Cosine:</strong> Ch·ªâ c√≥ 1 t·∫ßn s·ªë duy nh·∫•t trong ph·ªï</p>
                <p>‚Ä¢ <strong>S√≥ng Vu√¥ng:</strong> C√≥ nhi·ªÅu harmonics l·∫ª (1f, 3f, 5f, ...)</p>
                <p>‚Ä¢ <strong>S√≥ng RƒÉng C∆∞a:</strong> C√≥ t·∫•t c·∫£ harmonics (1f, 2f, 3f, ...)</p>
                <p>‚Ä¢ <strong>Gaussian Pulse:</strong> Ph·ªï t·∫ßn s·ªë c≈©ng l√† Gaussian</p>
                <p>‚Ä¢ <strong>T√≠n hi·ªáu H·ªón H·ª£p:</strong> T·ªïng c·ªßa nhi·ªÅu t·∫ßn s·ªë</p>
            </div>

            <!-- COMPONENT BREAKDOWN SECTION -->
            <div id="component-analysis" style="margin-top: 40px;">
                <div class="theory-box">
                    <h2>üéº Component Analysis - View & Hear Each Harmonic</h2>
                    <p>Explore individual frequency components that make up complex waveforms!</p>
                </div>

                <div class="content-layout">
                    <div class="visualization-area">
                        <div class="canvas-container">
                            <canvas id="componentsCanvas" width="400" height="300"></canvas>
                            <div style="text-align: center; color: #00d4ff; font-weight: bold;">Individual Components</div>
                        </div>
                        
                        <div class="canvas-container">
                            <canvas id="compositeCanvas" width="400" height="200"></canvas>
                            <div style="text-align: center; color: #ff6b6b; font-weight: bold;">Composite Signal</div>
                        </div>
                    </div>

                    <div class="controls-panel">
                        <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                            <h3 style="margin-top: 0; color: #FFD700;">üéØ Component Controls</h3>
                            
                            <div style="margin-bottom: 15px;">
                                <button onclick="playAllComponents()" style="width: 100%; padding: 12px; background: linear-gradient(45deg, #4CAF50, #45a049); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-bottom: 10px;">
                                    üéµ Play All Components Sequentially
                                </button>
                                <button onclick="playCompositeSound()" style="width: 100%; padding: 12px; background: linear-gradient(45deg, #9C27B0, #7B1FA2); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                    üéº Play Composite Sound
                                </button>
                            </div>

                            <div class="control-group">
                                <label>Animation Speed:</label>
                                <div class="slider-container">
                                    <input type="range" id="animationSpeed" min="0.5" max="3" step="0.1" value="1" oninput="updateAnimationSpeed()">
                                    <div class="value-display" id="animSpeedValue">1.0x</div>
                                </div>
                            </div>

                            <div class="control-group">
                                <label>Show Components:</label>
                                <div style="margin-top: 10px;">
                                    <label style="display: inline-block; margin-right: 15px;">
                                        <input type="checkbox" id="showFundamental" checked onchange="updateComponentsDisplay()"> Fundamental
                                    </label>
                                    <label style="display: inline-block; margin-right: 15px;">
                                        <input type="checkbox" id="showHarmonics" checked onchange="updateComponentsDisplay()"> Harmonics
                                    </label>
                                    <label style="display: inline-block;">
                                        <input type="checkbox" id="showSum" checked onchange="updateComponentsDisplay()"> Sum
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Dynamic Component List -->
                        <div id="componentsList" style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px;">
                            <h3 style="margin-top: 0; color: #FFD700;">üéº Active Components</h3>
                            <div id="componentsContainer">
                                <!-- Will be populated dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ·ª®NG D·ª§NG -->
        <div id="applications" class="lesson-section">
            <div class="theory-box">
                <h2>üöÄ ·ª®ng D·ª•ng Th·ª±c T·∫ø</h2>
            </div>

            <div class="step-container">
                <div class="step-card">
                    <h3>üéµ √Çm Thanh & √Çm Nh·∫°c</h3>
                    <ul>
                        <li><strong>MP3/AAC Compression:</strong> Lo·∫°i b·ªè t·∫ßn s·ªë kh√¥ng c·∫ßn thi·∫øt</li>
                        <li><strong>Equalizer:</strong> ƒêi·ªÅu ch·ªânh t·ª´ng d·∫£i t·∫ßn</li>
                        <li><strong>Auto-Tune:</strong> S·ª≠a cao ƒë·ªô gi·ªçng h√°t</li>
                        <li><strong>Noise Cancellation:</strong> Lo·∫°i b·ªè ti·∫øng ·ªìn</li>
                    </ul>
                </div>

                <div class="step-card">
                    <h3>üì∑ X·ª≠ L√Ω H√¨nh ·∫¢nh</h3>
                    <ul>
                        <li><strong>JPEG Compression:</strong> DCT (Discrete Cosine Transform)</li>
                        <li><strong>Edge Detection:</strong> High-pass filtering</li>
                        <li><strong>Blur/Sharpen:</strong> Low-pass/High-pass filters</li>
                        <li><strong>Pattern Recognition:</strong> Template matching</li>
                    </ul>
                </div>

                <div class="step-card">
                    <h3>üì° Truy·ªÅn Th√¥ng</h3>
                    <ul>
                        <li><strong>Radio/TV:</strong> Modulation/Demodulation</li>
                        <li><strong>WiFi/4G/5G:</strong> OFDM (Orthogonal Frequency Division)</li>
                        <li><strong>Radar:</strong> Object detection and ranging</li>
                        <li><strong>Sonar:</strong> Underwater navigation</li>
                    </ul>
                </div>

                <div class="step-card">
                    <h3>ü§ñ Machine Learning</h3>
                    <ul>
                        <li><strong>CNN Filters:</strong> T∆∞∆°ng t·ª± Fourier filters</li>
                        <li><strong>Speech Recognition:</strong> MFCC features</li>
                        <li><strong>Time Series:</strong> Frequency domain features</li>
                        <li><strong>Signal Processing:</strong> Feature extraction</li>
                    </ul>
                </div>

                <div class="step-card">
                    <h3>üè• Y H·ªçc</h3>
                    <ul>
                        <li><strong>MRI:</strong> Magnetic Resonance Imaging</li>
                        <li><strong>EEG/ECG:</strong> Brain/Heart signal analysis</li>
                        <li><strong>Ultrasound:</strong> Medical imaging</li>
                        <li><strong>X-ray CT:</strong> Computer Tomography</li>
                    </ul>
                </div>

                <div class="step-card">
                    <h3>üî¨ Khoa H·ªçc</h3>
                    <ul>
                        <li><strong>Spectroscopy:</strong> Chemical analysis</li>
                        <li><strong>Astronomy:</strong> Signal analysis from space</li>
                        <li><strong>Seismology:</strong> Earthquake analysis</li>
                        <li><strong>Quantum Physics:</strong> Wave function analysis</li>
                    </ul>
                </div>
            </div>

            <div class="example-box">
                <h3>üé§ V√≠ d·ª•: Gi·ªçng n√≥i con ng∆∞·ªùi</h3>
                <p>Khi b·∫°n n√≥i "Hello", Fourier Transform gi√∫p:</p>
                <ul>
                    <li><strong>Formants:</strong> X√°c ƒë·ªãnh c√°c t·∫ßn s·ªë ƒë·∫∑c tr∆∞ng c·ªßa nguy√™n √¢m</li>
                    <li><strong>Pitch:</strong> Ph√°t hi·ªán cao ƒë·ªô gi·ªçng n√≥i</li>
                    <li><strong>Phonemes:</strong> Ph√¢n bi·ªát c√°c √¢m t·ªë</li>
                    <li><strong>Compression:</strong> N√©n d·ªØ li·ªáu √¢m thanh hi·ªáu qu·∫£</li>
                </ul>
            </div>
        </div>

        <!-- TH·ª∞C H√ÄNH -->
        <div id="practice" class="lesson-section">
            <div class="theory-box">
                <h2>üéØ B√†i T·∫≠p Th·ª±c H√†nh</h2>
            </div>

            <div class="interactive-demo">
                <div class="demo-title">üß™ Th√≠ nghi·ªám 1: Ph√¢n t√≠ch t√≠n hi·ªáu √¢m nh·∫°c</div>
                
                <div class="content-layout">
                    <div class="visualization-area">
                        <div class="canvas-container">
                            <canvas id="musicCanvas" width="400" height="200"></canvas>
                            <div style="text-align: center; color: #00d4ff; font-weight: bold;">T√≠n hi·ªáu √¢m nh·∫°c</div>
                        </div>
                        
                        <div class="canvas-container">
                            <canvas id="musicSpectrumCanvas" width="400" height="200"></canvas>
                            <div style="text-align: center; color: #ff6b6b; font-weight: bold;">Ph·ªï √¢m nh·∫°c</div>
                        </div>
                    </div>

                    <div class="controls-panel">
                        <div class="control-group">
                            <label>Ch·ªçn h·ª£p √¢m:</label>
                            <select id="chordType" onchange="updateMusicVisualization()" style="width: 100%; padding: 8px; border-radius: 5px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3);">
                                <option value="C">H·ª£p √¢m C (Do-Mi-Sol)</option>
                                <option value="Am">H·ª£p √¢m Am (La-Do-Mi)</option>
                                <option value="F">H·ª£p √¢m F (Fa-La-Do)</option>
                                <option value="G">H·ª£p √¢m G (Sol-Si-Re)</option>
                                <option value="Dm">H·ª£p √¢m Dm (Re-Fa-La)</option>
                            </select>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                            <button onclick="playChord()" style="padding: 12px; background: linear-gradient(45deg, #00d4ff, #0099cc); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                üéµ Play Full Chord
                            </button>
                            <button onclick="playChordComponents()" style="padding: 12px; background: linear-gradient(45deg, #4CAF50, #45a049); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                ÔøΩ Play Components
                            </button>
                        </div>

                        <div style="margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                            <strong>Chord Analysis:</strong>
                            <p id="chordAnalysis">Ch·ªçn h·ª£p √¢m ƒë·ªÉ xem ph√¢n t√≠ch!</p>
                        </div>
                    </div>
                </div>

                <!-- DETAILED CHORD COMPONENT ANALYSIS -->
                <div style="margin-top: 30px;">
                    <h3 style="color: #FFD700; margin-bottom: 20px;">üéπ Individual Note Components</h3>
                    
                    <div class="content-layout">
                        <div class="visualization-area">
                            <div class="canvas-container">
                                <canvas id="chordComponentsCanvas" width="400" height="300"></canvas>
                                <div style="text-align: center; color: #00d4ff; font-weight: bold;">Individual Notes Waveforms</div>
                            </div>
                            
                            <div class="canvas-container">
                                <canvas id="chordCompositeCanvas" width="400" height="200"></canvas>
                                <div style="text-align: center; color: #ff6b6b; font-weight: bold;">Combined Chord Signal</div>
                            </div>
                        </div>

                        <div class="controls-panel">
                            <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px;">
                                <h4 style="margin-top: 0; color: #FFD700;">üéµ Chord Notes</h4>
                                <div id="chordNotesContainer">
                                    <!-- Will be populated dynamically -->
                                </div>
                                
                                <div style="margin-top: 20px;">
                                    <h4 style="color: #FFD700;">üéöÔ∏è Controls</h4>
                                    <div class="control-group">
                                        <label>Note Duration (seconds):</label>
                                        <div class="slider-container">
                                            <input type="range" id="noteDuration" min="0.5" max="3" step="0.1" value="1.5" oninput="updateNoteDuration()">
                                            <div class="value-display" id="noteDurationValue">1.5s</div>
                                        </div>
                                    </div>
                                    
                                    <div class="control-group">
                                        <label>Volume:</label>
                                        <div class="slider-container">
                                            <input type="range" id="chordVolume" min="0.1" max="0.3" step="0.01" value="0.15" oninput="updateChordVolume()">
                                            <div class="value-display" id="chordVolumeValue">0.15</div>
                                        </div>
                                    </div>

                                    <div style="margin-top: 15px;">
                                        <button onclick="playAllNotesSequential()" style="width: 100%; padding: 10px; background: linear-gradient(45deg, #9C27B0, #7B1FA2); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; margin-bottom: 8px;">
                                            üéº Play Notes Sequentially
                                        </button>
                                        <button onclick="playArpeggio()" style="width: 100%; padding: 10px; background: linear-gradient(45deg, #FF9800, #F57C00); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">
                                            üéπ Play Arpeggio
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="interactive-demo">
                <div class="demo-title">üîç Th√≠ nghi·ªám 2: L·ªçc t·∫ßn s·ªë</div>
                
                <div class="content-layout">
                    <div class="visualization-area">
                        <div class="canvas-container">
                            <canvas id="noisyCanvas" width="400" height="150"></canvas>
                            <div style="text-align: center; color: #00d4ff; font-weight: bold;">T√≠n hi·ªáu c√≥ nhi·ªÖu</div>
                        </div>
                        
                        <div class="canvas-container">
                            <canvas id="filteredCanvas" width="400" height="150"></canvas>
                            <div style="text-align: center; color: #64ff64; font-weight: bold;">T√≠n hi·ªáu ƒë√£ l·ªçc</div>
                        </div>
                    </div>

                    <div class="controls-panel">
                        <div class="control-group">
                            <label>Lo·∫°i b·ªô l·ªçc:</label>
                            <select id="filterType" onchange="updateFilter()" style="width: 100%; padding: 8px; border-radius: 5px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3);">
                                <option value="lowpass">Low-pass (Lo·∫°i b·ªè t·∫ßn s·ªë cao)</option>
                                <option value="highpass">High-pass (Lo·∫°i b·ªè t·∫ßn s·ªë th·∫•p)</option>
                                <option value="bandpass">Band-pass (Ch·ªâ gi·ªØ m·ªôt d·∫£i t·∫ßn)</option>
                                <option value="notch">Notch (Lo·∫°i b·ªè m·ªôt t·∫ßn s·ªë c·ª• th·ªÉ)</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label>T·∫ßn s·ªë c·∫Øt (Hz):</label>
                            <div class="slider-container">
                                <input type="range" id="cutoffFreq" min="1" max="20" step="0.5" value="5" oninput="updateFilter()">
                                <div class="value-display" id="cutoffValue">5.0 Hz</div>
                            </div>
                        </div>

                        <div class="control-group">
                            <label>M·ª©c nhi·ªÖu:</label>
                            <div class="slider-container">
                                <input type="range" id="noiseLevel" min="0" max="1" step="0.1" value="0.3" oninput="updateFilter()">
                                <div class="value-display" id="noiseValue">0.3</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="key-concept">
                <h3>üéì B√†i t·∫≠p t·ª± l√†m</h3>
                <ol>
                    <li><strong>T√≠n hi·ªáu Composite:</strong> T·∫°o t√≠n hi·ªáu g·ªìm 3 t·∫ßn s·ªë kh√°c nhau v√† ph√¢n t√≠ch ph·ªï</li>
                    <li><strong>Window Functions:</strong> So s√°nh Rectangular, Hanning, v√† Blackman windows</li>
                    <li><strong>Sampling Rate:</strong> Quan s√°t aliasing khi sampling rate qu√° th·∫•p</li>
                    <li><strong>Real-world Data:</strong> Ph√¢n t√≠ch t√≠n hi·ªáu t·ª´ microphone ho·∫∑c accelerometer</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        // Navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.lesson-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.nav-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Visualization variables
        let animationId;
        let timeData = [];
        let freqData = [];

        // Initialize canvases
        function initCanvases() {
            updateVisualization();
            updateMusicVisualization();
            updateFilter();
            
            // Initialize chord notes display
            updateChordNotesDisplay();
        }

        // Main visualization update
        function updateVisualization() {
            const signalType = document.getElementById('signalType').value;
            const frequency = parseFloat(document.getElementById('frequency').value);
            const amplitude = parseFloat(document.getElementById('amplitude').value);
            const phase = parseFloat(document.getElementById('phase').value);
            
            // Update display values
            document.getElementById('freqValue').textContent = frequency.toFixed(1) + ' Hz';
            document.getElementById('ampValue').textContent = amplitude.toFixed(1);
            document.getElementById('phaseValue').textContent = phase.toFixed(1) + ' rad';

            // Update play button text based on waveform
            updatePlayButtonText(signalType);

            // Show/hide controls based on signal type
            const harmonicsControl = document.getElementById('harmonics-control');
            const compoundControls = document.getElementById('compound-controls');
            
            if (signalType === 'square' || signalType === 'sawtooth' || signalType === 'triangle') {
                harmonicsControl.style.display = 'block';
                compoundControls.style.display = 'none';
                const harmonics = parseInt(document.getElementById('harmonics').value);
                document.getElementById('harmonicsValue').textContent = harmonics;
            } else if (signalType === 'compound') {
                harmonicsControl.style.display = 'none';
                compoundControls.style.display = 'block';
                const freq2 = parseFloat(document.getElementById('freq2').value);
                const amp2 = parseFloat(document.getElementById('amp2').value);
                document.getElementById('freq2Value').textContent = freq2.toFixed(1) + ' Hz';
                document.getElementById('amp2Value').textContent = amp2.toFixed(1);
            } else {
                harmonicsControl.style.display = 'none';
                compoundControls.style.display = 'none';
            }

            drawSignal();
            
            // Update component analysis
            initializeComponents();
        }

        function drawSignal() {
            const timeCanvas = document.getElementById('timeCanvas');
            const freqCanvas = document.getElementById('freqCanvas');
            
            if (!timeCanvas || !freqCanvas) return;
            
            const timeCtx = timeCanvas.getContext('2d');
            const freqCtx = freqCanvas.getContext('2d');
            
            const width = timeCanvas.width;
            const height = timeCanvas.height;
            
            // Clear canvases
            timeCtx.clearRect(0, 0, width, height);
            freqCtx.clearRect(0, 0, width, height);
            
            // Generate time domain data
            const numPoints = 1000;
            const duration = 2; // 2 seconds
            timeData = [];
            
            const signalType = document.getElementById('signalType').value;
            const frequency = parseFloat(document.getElementById('frequency').value);
            const amplitude = parseFloat(document.getElementById('amplitude').value);
            const phase = parseFloat(document.getElementById('phase').value);
            
            for (let i = 0; i < numPoints; i++) {
                const t = (i / numPoints) * duration;
                let y = 0;
                
                switch (signalType) {
                    case 'sine':
                        y = amplitude * Math.sin(2 * Math.PI * frequency * t + phase);
                        break;
                    case 'cosine':
                        y = amplitude * Math.cos(2 * Math.PI * frequency * t + phase);
                        break;
                    case 'square':
                        const harmonics = parseInt(document.getElementById('harmonics').value);
                        for (let n = 1; n <= harmonics; n += 2) {
                            y += (amplitude * 4 / Math.PI) * (1/n) * Math.sin(2 * Math.PI * n * frequency * t + phase);
                        }
                        break;
                    case 'sawtooth':
                        const sawHarmonics = parseInt(document.getElementById('harmonics').value);
                        for (let n = 1; n <= sawHarmonics; n++) {
                            y += (amplitude * 2 / Math.PI) * (Math.pow(-1, n+1) / n) * Math.sin(2 * Math.PI * n * frequency * t + phase);
                        }
                        break;
                    case 'triangle':
                        const triHarmonics = parseInt(document.getElementById('harmonics').value);
                        for (let n = 1; n <= triHarmonics; n += 2) {
                            y += (amplitude * 8 / (Math.PI * Math.PI)) * (Math.pow(-1, (n-1)/2) / (n*n)) * Math.sin(2 * Math.PI * n * frequency * t + phase);
                        }
                        break;
                    case 'gaussian':
                        const sigma = 0.1;
                        const mu = duration / 2;
                        y = amplitude * Math.exp(-0.5 * Math.pow((t - mu) / sigma, 2));
                        break;
                    case 'compound':
                        const freq2 = parseFloat(document.getElementById('freq2').value);
                        const amp2 = parseFloat(document.getElementById('amp2').value);
                        y = amplitude * Math.sin(2 * Math.PI * frequency * t + phase) + 
                            amp2 * Math.sin(2 * Math.PI * freq2 * t);
                        break;
                }
                
                timeData.push({t: t, y: y});
            }
            
            // Draw time domain
            drawTimeDomain(timeCtx, timeData, width, height);
            
            // Generate and draw frequency domain
            generateFrequencyDomain();
            drawFrequencyDomain(freqCtx, freqData, width, height);
        }

        function drawTimeDomain(ctx, data, width, height) {
            const padding = 20;
            const plotWidth = width - 2 * padding;
            const plotHeight = height - 2 * padding;
            
            // Draw axes
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding, height / 2);
            ctx.lineTo(width - padding, height / 2);
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.stroke();
            
            // Draw grid
            ctx.strokeStyle = '#333333';
            ctx.lineWidth = 0.5;
            for (let i = 1; i < 5; i++) {
                const x = padding + (i * plotWidth / 4);
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, height - padding);
                ctx.stroke();
            }
            
            // Draw signal
            ctx.strokeStyle = '#00d4ff';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            for (let i = 0; i < data.length; i++) {
                const x = padding + (data[i].t / 2) * plotWidth;
                const y = height / 2 - (data[i].y / 2) * (plotHeight / 2);
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = '#ffffff';
            ctx.font = '12px Arial';
            ctx.fillText('t (s)', width - 30, height / 2 + 20);
            ctx.fillText('f(t)', 5, 15);
        }

        function generateFrequencyDomain() {
            // Simple frequency analysis for visualization
            freqData = [];
            const maxFreq = 20;
            const freqStep = 0.1;
            
            const signalType = document.getElementById('signalType').value;
            const frequency = parseFloat(document.getElementById('frequency').value);
            const amplitude = parseFloat(document.getElementById('amplitude').value);
            
            for (let f = 0; f <= maxFreq; f += freqStep) {
                let magnitude = 0;
                
                switch (signalType) {
                    case 'sine':
                    case 'cosine':
                        if (Math.abs(f - frequency) < 0.2) {
                            magnitude = amplitude;
                        }
                        break;
                    case 'square':
                        const harmonics = parseInt(document.getElementById('harmonics').value);
                        for (let n = 1; n <= harmonics; n += 2) {
                            if (Math.abs(f - n * frequency) < 0.2) {
                                magnitude += (amplitude * 4 / Math.PI) * (1/n);
                            }
                        }
                        break;
                    case 'sawtooth':
                        const sawHarmonics = parseInt(document.getElementById('harmonics').value);
                        for (let n = 1; n <= sawHarmonics; n++) {
                            if (Math.abs(f - n * frequency) < 0.2) {
                                magnitude += (amplitude * 2 / Math.PI) * (1/n);
                            }
                        }
                        break;
                    case 'triangle':
                        const triHarmonics = parseInt(document.getElementById('harmonics').value);
                        for (let n = 1; n <= triHarmonics; n += 2) {
                            if (Math.abs(f - n * frequency) < 0.2) {
                                magnitude += (amplitude * 8 / (Math.PI * Math.PI)) * (1/(n*n));
                            }
                        }
                        break;
                    case 'gaussian':
                        const sigma = 0.1 * 2 * Math.PI;
                        magnitude = amplitude * Math.exp(-0.5 * Math.pow(f * sigma, 2));
                        break;
                    case 'compound':
                        const freq2 = parseFloat(document.getElementById('freq2').value);
                        const amp2 = parseFloat(document.getElementById('amp2').value);
                        if (Math.abs(f - frequency) < 0.2) {
                            magnitude += amplitude;
                        }
                        if (Math.abs(f - freq2) < 0.2) {
                            magnitude += amp2;
                        }
                        break;
                }
                
                freqData.push({f: f, magnitude: Math.abs(magnitude)});
            }
        }

        function drawFrequencyDomain(ctx, data, width, height) {
            const padding = 20;
            const plotWidth = width - 2 * padding;
            const plotHeight = height - 2 * padding;
            
            // Draw axes
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.stroke();
            
            // Find max magnitude for scaling
            const maxMag = Math.max(...data.map(d => d.magnitude), 0.1);
            
            // Draw frequency bars
            ctx.fillStyle = '#ff6b6b';
            const barWidth = plotWidth / data.length;
            
            for (let i = 0; i < data.length; i++) {
                const x = padding + (data[i].f / 20) * plotWidth;
                const barHeight = (data[i].magnitude / maxMag) * plotHeight;
                const y = height - padding - barHeight;
                
                ctx.fillRect(x - barWidth/2, y, barWidth, barHeight);
            }
            
            // Labels
            ctx.fillStyle = '#ffffff';
            ctx.font = '12px Arial';
            ctx.fillText('f (Hz)', width - 30, height - 5);
            ctx.fillText('|F(œâ)|', 5, 15);
        }

        // Music visualization
        function updateMusicVisualization() {
            const chordType = document.getElementById('chordType').value;
            let frequencies = [];
            let analysis = '';
            
            switch (chordType) {
                case 'C':
                    frequencies = [261.63, 329.63, 392.00]; // C4, E4, G4
                    analysis = 'H·ª£p √¢m C Major: Do (261.6Hz), Mi (329.6Hz), Sol (392.0Hz). T·ª∑ l·ªá t·∫ßn s·ªë 4:5:6 t·∫°o √¢m thanh h√†i h√≤a.';
                    break;
                case 'Am':
                    frequencies = [220.00, 261.63, 329.63]; // A3, C4, E4
                    analysis = 'H·ª£p √¢m A Minor: La (220.0Hz), Do (261.6Hz), Mi (329.6Hz). Minor chord c√≥ √¢m thanh bu·ªìn h∆°n major.';
                    break;
                case 'F':
                    frequencies = [174.61, 220.00, 261.63]; // F3, A3, C4
                    analysis = 'H·ª£p √¢m F Major: Fa (174.6Hz), La (220.0Hz), Do (261.6Hz). H·ª£p √¢m subdominant ph·ªï bi·∫øn.';
                    break;
                case 'G':
                    frequencies = [196.00, 246.94, 293.66]; // G3, B3, D4
                    analysis = 'H·ª£p √¢m G Major: Sol (196.0Hz), Si (246.9Hz), Re (293.7Hz). H·ª£p √¢m dominant m·∫°nh m·∫Ω.';
                    break;
                case 'Dm':
                    frequencies = [146.83, 174.61, 220.00]; // D3, F3, A3
                    analysis = 'H·ª£p √¢m D Minor: Re (146.8Hz), Fa (174.6Hz), La (220.0Hz). Minor chord v·ªõi c·∫£m gi√°c u s·∫ßu.';
                    break;
            }
            
            document.getElementById('chordAnalysis').textContent = analysis;
            
            // Draw music signal and spectrum
            drawMusicSignal(frequencies);
        }

        function drawMusicSignal(frequencies) {
            const musicCanvas = document.getElementById('musicCanvas');
            const spectrumCanvas = document.getElementById('musicSpectrumCanvas');
            
            if (!musicCanvas || !spectrumCanvas) return;
            
            const musicCtx = musicCanvas.getContext('2d');
            const spectrumCtx = spectrumCanvas.getContext('2d');
            
            const width = musicCanvas.width;
            const height = musicCanvas.height;
            
            // Clear canvases
            musicCtx.clearRect(0, 0, width, height);
            spectrumCtx.clearRect(0, 0, width, height);
            
            // Generate chord signal
            const numPoints = 1000;
            const duration = 1; // 1 second
            const chordData = [];
            
            for (let i = 0; i < numPoints; i++) {
                const t = (i / numPoints) * duration;
                let y = 0;
                
                frequencies.forEach(freq => {
                    y += Math.sin(2 * Math.PI * freq * t) / frequencies.length;
                });
                
                chordData.push({t: t, y: y});
            }
            
            // Draw time domain
            drawTimeDomain(musicCtx, chordData, width, height);
            
            // Draw frequency spectrum
            drawMusicSpectrum(spectrumCtx, frequencies, width, height);
        }

        function drawMusicSpectrum(ctx, frequencies, width, height) {
            const padding = 20;
            const plotWidth = width - 2 * padding;
            const plotHeight = height - 2 * padding;
            
            // Draw axes
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.stroke();
            
            // Draw frequency peaks
            const maxFreq = 500;
            frequencies.forEach(freq => {
                const x = padding + (freq / maxFreq) * plotWidth;
                const barHeight = plotHeight * 0.8;
                const y = height - padding - barHeight;
                
                ctx.fillStyle = '#ff6b6b';
                ctx.fillRect(x - 2, y, 4, barHeight);
                
                // Label frequency
                ctx.fillStyle = '#ffffff';
                ctx.font = '10px Arial';
                ctx.fillText(freq.toFixed(0), x - 10, y - 5);
            });
            
            // Labels
            ctx.fillStyle = '#ffffff';
            ctx.font = '12px Arial';
            ctx.fillText('T·∫ßn s·ªë (Hz)', width - 80, height - 5);
        }

        // Filter demo
        function updateFilter() {
            const filterType = document.getElementById('filterType').value;
            const cutoffFreq = parseFloat(document.getElementById('cutoffFreq').value);
            const noiseLevel = parseFloat(document.getElementById('noiseLevel').value);
            
            document.getElementById('cutoffValue').textContent = cutoffFreq.toFixed(1) + ' Hz';
            document.getElementById('noiseValue').textContent = noiseLevel.toFixed(1);
            
            drawFilterDemo(filterType, cutoffFreq, noiseLevel);
        }

        function drawFilterDemo(filterType, cutoffFreq, noiseLevel) {
            const noisyCanvas = document.getElementById('noisyCanvas');
            const filteredCanvas = document.getElementById('filteredCanvas');
            
            if (!noisyCanvas || !filteredCanvas) return;
            
            const noisyCtx = noisyCanvas.getContext('2d');
            const filteredCtx = filteredCanvas.getContext('2d');
            
            const width = noisyCanvas.width;
            const height = noisyCanvas.height;
            
            // Clear canvases
            noisyCtx.clearRect(0, 0, width, height);
            filteredCtx.clearRect(0, 0, width, height);
            
            // Generate noisy signal
            const numPoints = 500;
            const duration = 2;
            const noisyData = [];
            const filteredData = [];
            
            for (let i = 0; i < numPoints; i++) {
                const t = (i / numPoints) * duration;
                
                // Original signal (low frequency)
                const originalSignal = Math.sin(2 * Math.PI * 2 * t);
                
                // Add noise (high frequency)
                const noise = noiseLevel * (Math.random() - 0.5) * 2;
                const highFreqNoise = noiseLevel * 0.3 * Math.sin(2 * Math.PI * 15 * t);
                
                const noisySignal = originalSignal + noise + highFreqNoise;
                
                // Apply filter
                let filteredSignal = noisySignal;
                switch (filterType) {
                    case 'lowpass':
                        // Simple approximation - in reality would use FFT
                        filteredSignal = originalSignal + noise * 0.1;
                        break;
                    case 'highpass':
                        filteredSignal = noise + highFreqNoise;
                        break;
                    case 'bandpass':
                        if (Math.abs(2 - cutoffFreq) < 1) {
                            filteredSignal = originalSignal;
                        } else {
                            filteredSignal = noise * 0.2;
                        }
                        break;
                    case 'notch':
                        if (Math.abs(2 - cutoffFreq) < 0.5) {
                            filteredSignal = noise + highFreqNoise;
                        } else {
                            filteredSignal = noisySignal;
                        }
                        break;
                }
                
                noisyData.push({t: t, y: noisySignal});
                filteredData.push({t: t, y: filteredSignal});
            }
            
            // Draw signals
            drawFilterSignal(noisyCtx, noisyData, width, height, '#ff6b6b');
            drawFilterSignal(filteredCtx, filteredData, width, height, '#64ff64');
        }

        function drawFilterSignal(ctx, data, width, height, color) {
            const padding = 20;
            const plotWidth = width - 2 * padding;
            const plotHeight = height - 2 * padding;
            
            // Draw axes
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding, height / 2);
            ctx.lineTo(width - padding, height / 2);
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.stroke();
            
            // Draw signal
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            for (let i = 0; i < data.length; i++) {
                const x = padding + (data[i].t / 2) * plotWidth;
                const y = height / 2 - (data[i].y / 3) * (plotHeight / 2);
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
        }

        // Update play button text based on waveform
        function updatePlayButtonText(waveform) {
            const button = document.getElementById('playFreqBtn');
            if (!button) return;
            
            switch (waveform) {
                case 'square':
                    button.textContent = 'üîä Play Square Wave (Odd Harmonics)';
                    break;
                case 'sawtooth':
                    button.textContent = 'üîä Play Sawtooth (All Harmonics)';
                    break;
                case 'triangle':
                    button.textContent = 'üîä Play Triangle Wave (Harmonics)';
                    break;
                case 'compound':
                    button.textContent = 'üîä Play Compound Signal';
                    break;
                default:
                    button.textContent = 'üîä Play Pure Tone';
                    break;
            }
        }

        // Audio context for sound generation
        let audioContext = null;
        let isPlaying = false;

        // Initialize Audio Context (requires user interaction)
        function initAudioContext() {
            if (!audioContext) {
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.error('Web Audio API not supported:', e);
                    return false;
                }
            }
            
            // Resume context if suspended (required by browser policies)
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            
            return true;
        }

        // Create and play a tone with given frequency
        function playTone(frequency, duration = 1.0, volume = 0.1) {
            if (!initAudioContext()) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            // Configure oscillator
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            
            // Configure gain (volume) with envelope
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(volume, audioContext.currentTime + 0.05); // Attack
            gainNode.gain.linearRampToValueAtTime(volume * 0.8, audioContext.currentTime + 0.1); // Decay
            gainNode.gain.setValueAtTime(volume * 0.8, audioContext.currentTime + duration - 0.1); // Sustain
            gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + duration); // Release
            
            // Connect nodes
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            // Start and stop
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
            
            return oscillator;
        }

        // Play multiple tones simultaneously (chord)
        function playChord() {
            if (isPlaying) return; // Prevent overlapping
            
            const chordType = document.getElementById('chordType').value;
            let frequencies = [];
            
            switch (chordType) {
                case 'C': frequencies = [261.63, 329.63, 392.00]; break;
                case 'Am': frequencies = [220.00, 261.63, 329.63]; break;
                case 'F': frequencies = [174.61, 220.00, 261.63]; break;
                case 'G': frequencies = [196.00, 246.94, 293.66]; break;
                case 'Dm': frequencies = [146.83, 174.61, 220.00]; break;
            }
            
            if (!initAudioContext()) {
                alert(`Audio not supported. Chord ${chordType} frequencies: ${frequencies.map(f => f.toFixed(1)).join(', ')} Hz`);
                return;
            }
            
            isPlaying = true;
            const duration = 2.0;
            
            // Update button text
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = `Playing ${chordType}...`;
            button.disabled = true;
            
            // Play each frequency in the chord
            frequencies.forEach((freq, index) => {
                playTone(freq, duration, 0.08); // Lower volume for multiple tones
            });
            
            // Reset button after duration
            setTimeout(() => {
                isPlaying = false;
                button.textContent = originalText;
                button.disabled = false;
            }, duration * 1000);
        }

        // Add function to play single frequency (useful for demonstrations)
        function playSingleTone() {
            const frequency = parseFloat(document.getElementById('frequency').value);
            const amplitude = parseFloat(document.getElementById('amplitude').value);
            const waveform = document.getElementById('signalType').value;
            
            if (!initAudioContext()) {
                alert(`Audio not supported. Would play ${frequency.toFixed(1)} Hz`);
                return;
            }
            
            // For different waveforms, play harmonics
            if (waveform === 'square') {
                playHarmonics(frequency, amplitude, 'square');
            } else if (waveform === 'sawtooth') {
                playHarmonics(frequency, amplitude, 'sawtooth');
            } else if (waveform === 'triangle') {
                playHarmonics(frequency, amplitude, 'triangle');
            } else {
                // Scale amplitude to reasonable volume
                const volume = Math.min(amplitude * 0.1, 0.2);
                playTone(frequency, 1.5, volume);
            }
        }

        // Play harmonic series for complex waveforms
        function playHarmonics(fundamentalFreq, amplitude, waveType) {
            if (!initAudioContext()) return;
            
            const duration = 2.0;
            const baseVolume = Math.min(amplitude * 0.05, 0.1); // Lower volume for multiple harmonics
            
            let harmonics = [];
            
            switch (waveType) {
                case 'square':
                    // Odd harmonics only: 1, 3, 5, 7, 9...
                    for (let n = 1; n <= 9; n += 2) {
                        harmonics.push({
                            freq: fundamentalFreq * n,
                            amplitude: 1 / n // Decreasing amplitude
                        });
                    }
                    break;
                    
                case 'sawtooth':
                    // All harmonics: 1, 2, 3, 4, 5...
                    for (let n = 1; n <= 8; n++) {
                        harmonics.push({
                            freq: fundamentalFreq * n,
                            amplitude: 1 / n // Decreasing amplitude
                        });
                    }
                    break;
                    
                case 'triangle':
                    // Odd harmonics with different phase: 1, 3, 5, 7...
                    for (let n = 1; n <= 7; n += 2) {
                        harmonics.push({
                            freq: fundamentalFreq * n,
                            amplitude: 1 / (n * n) // Faster decreasing amplitude
                        });
                    }
                    break;
            }
            
            // Play each harmonic
            harmonics.forEach(harmonic => {
                const volume = baseVolume * harmonic.amplitude;
                playTone(harmonic.freq, duration, volume);
            });
        }

        // Initialize when page loads
        window.addEventListener('load', function() {
            initCanvases();
        });

        // Component Analysis Functions
        let currentComponents = [];
        let animationSpeed = 1.0;
        let componentAnimationId = null;

        // Update animation speed
        function updateAnimationSpeed() {
            animationSpeed = parseFloat(document.getElementById('animationSpeed').value);
            document.getElementById('animSpeedValue').textContent = animationSpeed.toFixed(1) + 'x';
        }

        // Update components display
        function updateComponentsDisplay() {
            drawComponentsVisualization();
        }

        // Calculate and display current signal components
        function updateComponentsList() {
            const signalType = document.getElementById('signalType').value;
            const frequency = parseFloat(document.getElementById('frequency').value);
            const amplitude = parseFloat(document.getElementById('amplitude').value);
            
            currentComponents = [];
            
            switch (signalType) {
                case 'sine':
                case 'cosine':
                    currentComponents.push({
                        type: 'fundamental',
                        frequency: frequency,
                        amplitude: amplitude,
                        harmonicNumber: 1,
                        phase: signalType === 'cosine' ? 0 : -Math.PI/2
                    });
                    break;
                    
                case 'square':
                    // Odd harmonics: 1, 3, 5, 7, 9...
                    for (let n = 1; n <= 9; n += 2) {
                        currentComponents.push({
                            type: n === 1 ? 'fundamental' : 'harmonic',
                            frequency: frequency * n,
                            amplitude: amplitude * (1 / n),
                            harmonicNumber: n,
                            phase: 0
                        });
                    }
                    break;
                    
                case 'sawtooth':
                    // All harmonics: 1, 2, 3, 4, 5...
                    for (let n = 1; n <= 8; n++) {
                        currentComponents.push({
                            type: n === 1 ? 'fundamental' : 'harmonic',
                            frequency: frequency * n,
                            amplitude: amplitude * (1 / n),
                            harmonicNumber: n,
                            phase: 0
                        });
                    }
                    break;
                    
                case 'triangle':
                    // Odd harmonics with different amplitude: 1, 3, 5, 7...
                    for (let n = 1; n <= 7; n += 2) {
                        currentComponents.push({
                            type: n === 1 ? 'fundamental' : 'harmonic',
                            frequency: frequency * n,
                            amplitude: amplitude * (1 / (n * n)),
                            harmonicNumber: n,
                            phase: 0
                        });
                    }
                    break;
                    
                case 'compound':
                    const freq2 = parseFloat(document.getElementById('freq2').value);
                    const amp2 = parseFloat(document.getElementById('amp2').value);
                    currentComponents.push({
                        type: 'fundamental',
                        frequency: frequency,
                        amplitude: amplitude,
                        harmonicNumber: 1,
                        phase: 0
                    });
                    currentComponents.push({
                        type: 'fundamental',
                        frequency: freq2,
                        amplitude: amp2,
                        harmonicNumber: Math.round(freq2 / frequency),
                        phase: 0
                    });
                    break;
            }
            
            renderComponentsList();
            drawComponentsVisualization();
        }

        // Render the components list UI
        function renderComponentsList() {
            const container = document.getElementById('componentsContainer');
            
            if (currentComponents.length === 0) {
                container.innerHTML = '<p>No components to display</p>';
                return;
            }
            
            let html = '';
            currentComponents.forEach((component, index) => {
                const freq = component.frequency.toFixed(1);
                const amp = component.amplitude.toFixed(3);
                const harmonic = component.harmonicNumber;
                
                html += `
                    <div class="component-item ${component.type}" id="component-${index}">
                        <div class="component-info">
                            <strong>${component.type === 'fundamental' ? 'Fundamental' : 'Harmonic'} ${harmonic}</strong><br>
                            <small>${freq} Hz | Amplitude: ${amp}</small>
                        </div>
                        <div class="component-controls">
                            <button class="component-btn play-btn" onclick="playComponent(${index})">
                                üîä Play
                            </button>
                            <button class="component-btn toggle-btn" id="toggle-${index}" onclick="toggleComponent(${index})">
                                ‚úì On
                            </button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Play individual component
        function playComponent(index) {
            if (index >= currentComponents.length) return;
            
            const component = currentComponents[index];
            if (!initAudioContext()) {
                alert(`Audio not supported. Component ${component.harmonicNumber}: ${component.frequency.toFixed(1)} Hz`);
                return;
            }
            
            const volume = Math.min(component.amplitude * 0.15, 0.2);
            playTone(component.frequency, 1.5, volume);
        }

        // Toggle component visibility/audibility
        function toggleComponent(index) {
            const button = document.getElementById(`toggle-${index}`);
            const component = currentComponents[index];
            
            component.enabled = !component.enabled;
            
            if (component.enabled) {
                button.textContent = '‚úì On';
                button.classList.remove('disabled');
            } else {
                button.textContent = '‚úó Off';
                button.classList.add('disabled');
            }
            
            drawComponentsVisualization();
        }

        // Play all components sequentially
        function playAllComponents() {
            if (currentComponents.length === 0) return;
            
            let index = 0;
            const playNext = () => {
                if (index < currentComponents.length) {
                    playComponent(index);
                    
                    // Highlight current component
                    document.querySelectorAll('.component-item').forEach(item => {
                        item.style.background = 'rgba(255, 255, 255, 0.1)';
                    });
                    
                    const currentItem = document.getElementById(`component-${index}`);
                    if (currentItem) {
                        currentItem.style.background = 'rgba(255, 215, 0, 0.3)';
                    }
                    
                    index++;
                    setTimeout(playNext, 1800); // Delay between components
                } else {
                    // Reset highlighting
                    document.querySelectorAll('.component-item').forEach(item => {
                        item.style.background = 'rgba(255, 255, 255, 0.1)';
                    });
                }
            };
            
            playNext();
        }

        // Play composite sound (all components together)
        function playCompositeSound() {
            if (!initAudioContext()) {
                alert('Audio not supported');
                return;
            }
            
            const duration = 2.0;
            const baseVolume = 0.08;
            
            currentComponents.forEach(component => {
                if (component.enabled !== false) {
                    const volume = baseVolume * component.amplitude;
                    playTone(component.frequency, duration, volume);
                }
            });
        }

        // Draw components visualization
        function drawComponentsVisualization() {
            const canvas = document.getElementById('componentsCanvas');
            const compositeCanvas = document.getElementById('compositeCanvas');
            
            if (!canvas || !compositeCanvas) return;
            
            const ctx = canvas.getContext('2d');
            const compositeCtx = compositeCanvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const compositeHeight = compositeCanvas.height;
            
            // Clear canvases
            ctx.clearRect(0, 0, width, height);
            compositeCtx.clearRect(0, 0, width, compositeHeight);
            
            if (currentComponents.length === 0) return;
            
            const showFundamental = document.getElementById('showFundamental').checked;
            const showHarmonics = document.getElementById('showHarmonics').checked;
            const showSum = document.getElementById('showSum').checked;
            
            const numPoints = 500;
            const timeRange = 2; // seconds
            const dt = timeRange / numPoints;
            
            const colors = ['#FF6B6B', '#4ECDC4', '#FFD93D', '#6BCF7F', '#4D96FF', '#9C88FF', '#FF9F40', '#FF6384'];
            
            // Draw individual components
            let yOffset = 40;
            const componentHeight = (height - 80) / Math.min(currentComponents.length, 6);
            
            currentComponents.forEach((component, index) => {
                if (component.enabled === false) return;
                
                const shouldShow = (component.type === 'fundamental' && showFundamental) || 
                                 (component.type === 'harmonic' && showHarmonics);
                
                if (!shouldShow) return;
                
                const y = yOffset + index * componentHeight;
                const amplitude = component.amplitude * (componentHeight * 0.3);
                
                ctx.strokeStyle = colors[index % colors.length];
                ctx.lineWidth = 2;
                ctx.beginPath();
                
                for (let i = 0; i < numPoints; i++) {
                    const t = i * dt;
                    const x = (i / numPoints) * width;
                    const value = amplitude * Math.sin(2 * Math.PI * component.frequency * t + component.phase);
                    const plotY = y + componentHeight/2 - value;
                    
                    if (i === 0) {
                        ctx.moveTo(x, plotY);
                    } else {
                        ctx.lineTo(x, plotY);
                    }
                }
                ctx.stroke();
                
                // Label
                ctx.fillStyle = colors[index % colors.length];
                ctx.font = '12px Arial';
                ctx.fillText(`${component.frequency.toFixed(1)} Hz`, 5, y + 15);
            });
            
            // Draw composite signal
            if (showSum && currentComponents.length > 1) {
                const compositeData = new Array(numPoints).fill(0);
                
                currentComponents.forEach(component => {
                    if (component.enabled === false) return;
                    
                    for (let i = 0; i < numPoints; i++) {
                        const t = i * dt;
                        const value = component.amplitude * Math.sin(2 * Math.PI * component.frequency * t + component.phase);
                        compositeData[i] += value;
                    }
                });
                
                // Normalize
                const maxVal = Math.max(...compositeData.map(Math.abs));
                const scale = (compositeHeight * 0.4) / (maxVal || 1);
                
                compositeCtx.strokeStyle = '#FF6B6B';
                compositeCtx.lineWidth = 3;
                compositeCtx.beginPath();
                
                for (let i = 0; i < numPoints; i++) {
                    const x = (i / numPoints) * width;
                    const y = compositeHeight/2 - compositeData[i] * scale;
                    
                    if (i === 0) {
                        compositeCtx.moveTo(x, y);
                    } else {
                        compositeCtx.lineTo(x, y);
                    }
                }
                compositeCtx.stroke();
            }
            
            // Draw axes
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 1;
            compositeCtx.strokeStyle = '#ffffff';
            compositeCtx.lineWidth = 1;
            
            // Time axis for components
            ctx.beginPath();
            ctx.moveTo(0, height - 20);
            ctx.lineTo(width, height - 20);
            ctx.stroke();
            
            // Time axis for composite
            compositeCtx.beginPath();
            compositeCtx.moveTo(0, compositeHeight - 20);
            compositeCtx.lineTo(width, compositeHeight - 20);
            compositeCtx.stroke();
        }

        // Initialize components when signal changes
        function initializeComponents() {
            // Initialize enabled state for all components
            currentComponents.forEach(component => {
                component.enabled = true;
            });
            updateComponentsList();
        }

        // Enhanced Music Chord Analysis Functions
        let currentChordNotes = [];
        let noteDuration = 1.5;
        let chordVolume = 0.15;

        // Note names and their frequencies
        const noteFrequencies = {
            'C': 261.63, 'C#': 277.18, 'D': 293.66, 'D#': 311.13, 'E': 329.63, 'F': 349.23,
            'F#': 369.99, 'G': 392.00, 'G#': 415.30, 'A': 440.00, 'A#': 466.16, 'B': 493.88
        };

        // Get chord frequencies and note names
        function getChordInfo(chordType) {
            const chordDefinitions = {
                'C': { frequencies: [261.63, 329.63, 392.00], notes: ['C', 'E', 'G'], fullName: 'C Major' },
                'Am': { frequencies: [220.00, 261.63, 329.63], notes: ['A', 'C', 'E'], fullName: 'A Minor' },
                'F': { frequencies: [174.61, 220.00, 261.63], notes: ['F', 'A', 'C'], fullName: 'F Major' },
                'G': { frequencies: [196.00, 246.94, 293.66], notes: ['G', 'B', 'D'], fullName: 'G Major' },
                'Dm': { frequencies: [146.83, 174.61, 220.00], notes: ['D', 'F', 'A'], fullName: 'D Minor' }
            };
            
            return chordDefinitions[chordType] || chordDefinitions['C'];
        }

        // Update note duration
        function updateNoteDuration() {
            noteDuration = parseFloat(document.getElementById('noteDuration').value);
            document.getElementById('noteDurationValue').textContent = noteDuration.toFixed(1) + 's';
        }

        // Update chord volume
        function updateChordVolume() {
            chordVolume = parseFloat(document.getElementById('chordVolume').value);
            document.getElementById('chordVolumeValue').textContent = chordVolume.toFixed(2);
        }

        // Play chord components separately
        function playChordComponents() {
            const chordType = document.getElementById('chordType').value;
            const chordInfo = getChordInfo(chordType);
            
            if (!initAudioContext()) {
                alert(`Audio not supported. ${chordInfo.fullName} notes: ${chordInfo.notes.join('-')}`);
                return;
            }
            
            // Play each note separately with delay
            chordInfo.frequencies.forEach((freq, index) => {
                setTimeout(() => {
                    playTone(freq, noteDuration * 0.8, chordVolume);
                    
                    // Highlight current note
                    highlightNote(index);
                }, index * 600);
            });
        }

        // Play individual note
        function playNote(noteIndex) {
            const chordType = document.getElementById('chordType').value;
            const chordInfo = getChordInfo(chordType);
            
            if (noteIndex >= chordInfo.frequencies.length) return;
            
            if (!initAudioContext()) {
                alert(`Audio not supported. Note: ${chordInfo.notes[noteIndex]} (${chordInfo.frequencies[noteIndex].toFixed(1)} Hz)`);
                return;
            }
            
            playTone(chordInfo.frequencies[noteIndex], noteDuration, chordVolume);
            highlightNote(noteIndex);
        }

        // Highlight note during playback
        function highlightNote(noteIndex) {
            // Reset all highlights
            document.querySelectorAll('.chord-note-item').forEach(item => {
                item.style.background = 'rgba(255, 255, 255, 0.1)';
            });
            
            // Highlight current note
            const noteItem = document.querySelector(`.note${noteIndex + 1}`);
            if (noteItem) {
                noteItem.style.background = 'rgba(255, 215, 0, 0.3)';
                
                // Remove highlight after duration
                setTimeout(() => {
                    noteItem.style.background = 'rgba(255, 255, 255, 0.1)';
                }, noteDuration * 1000);
            }
        }

        // Play all notes sequentially
        function playAllNotesSequential() {
            const chordType = document.getElementById('chordType').value;
            const chordInfo = getChordInfo(chordType);
            
            if (!initAudioContext()) {
                alert(`Audio not supported. Sequential notes: ${chordInfo.notes.join(' ‚Üí ')}`);
                return;
            }
            
            chordInfo.frequencies.forEach((freq, index) => {
                setTimeout(() => {
                    playTone(freq, noteDuration, chordVolume);
                    highlightNote(index);
                }, index * (noteDuration * 1000 + 200));
            });
        }

        // Play arpeggio (faster sequential)
        function playArpeggio() {
            const chordType = document.getElementById('chordType').value;
            const chordInfo = getChordInfo(chordType);
            
            if (!initAudioContext()) {
                alert(`Audio not supported. Arpeggio: ${chordInfo.notes.join(' ‚Üí ')}`);
                return;
            }
            
            const arpeggioSpeed = 400; // milliseconds between notes
            
            chordInfo.frequencies.forEach((freq, index) => {
                setTimeout(() => {
                    playTone(freq, 0.8, chordVolume);
                    highlightNote(index);
                }, index * arpeggioSpeed);
            });
        }

        // Update chord notes display
        function updateChordNotesDisplay() {
            const chordType = document.getElementById('chordType').value;
            const chordInfo = getChordInfo(chordType);
            const container = document.getElementById('chordNotesContainer');
            
            let html = '';
            chordInfo.frequencies.forEach((freq, index) => {
                const note = chordInfo.notes[index];
                html += `
                    <div class="chord-note-item note${index + 1}">
                        <div class="note-info">
                            <strong>${note}</strong><br>
                            <small>${freq.toFixed(1)} Hz</small>
                        </div>
                        <div class="note-controls">
                            <button class="note-btn" onclick="playNote(${index})">
                                üîä Play
                            </button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            
            // Update analysis text
            const analysisText = `${chordInfo.fullName}: ${chordInfo.notes.join(' - ')} (${chordInfo.frequencies.map(f => f.toFixed(1) + ' Hz').join(', ')})`;
            document.getElementById('chordAnalysis').textContent = analysisText;
            
            // Update visualization
            drawChordComponents();
        }

        // Draw chord components visualization
        function drawChordComponents() {
            const chordComponentsCanvas = document.getElementById('chordComponentsCanvas');
            const chordCompositeCanvas = document.getElementById('chordCompositeCanvas');
            
            if (!chordComponentsCanvas || !chordCompositeCanvas) return;
            
            const ctx = chordComponentsCanvas.getContext('2d');
            const compositeCtx = chordCompositeCanvas.getContext('2d');
            const width = chordComponentsCanvas.width;
            const height = chordComponentsCanvas.height;
            const compositeHeight = chordCompositeCanvas.height;
            
            // Clear canvases
            ctx.clearRect(0, 0, width, height);
            compositeCtx.clearRect(0, 0, width, compositeHeight);
            
            const chordType = document.getElementById('chordType').value;
            const chordInfo = getChordInfo(chordType);
            
            const numPoints = 500;
            const timeRange = 1; // seconds
            const dt = timeRange / numPoints;
            
            const colors = ['#FF6B6B', '#4ECDC4', '#FFD93D'];
            const componentHeight = height / 3;
            
            // Draw individual notes
            chordInfo.frequencies.forEach((freq, index) => {
                const y = index * componentHeight + componentHeight / 2;
                const amplitude = componentHeight * 0.3;
                
                ctx.strokeStyle = colors[index];
                ctx.lineWidth = 2;
                ctx.beginPath();
                
                for (let i = 0; i < numPoints; i++) {
                    const t = i * dt;
                    const x = (i / numPoints) * width;
                    const value = amplitude * Math.sin(2 * Math.PI * freq * t);
                    const plotY = y - value;
                    
                    if (i === 0) {
                        ctx.moveTo(x, plotY);
                    } else {
                        ctx.lineTo(x, plotY);
                    }
                }
                ctx.stroke();
                
                // Label
                ctx.fillStyle = colors[index];
                ctx.font = '14px Arial';
                ctx.fillText(`${chordInfo.notes[index]} (${freq.toFixed(1)} Hz)`, 5, y - componentHeight/2 + 20);
            });
            
            // Draw composite signal
            const compositeData = new Array(numPoints).fill(0);
            
            chordInfo.frequencies.forEach((freq, index) => {
                for (let i = 0; i < numPoints; i++) {
                    const t = i * dt;
                    const value = Math.sin(2 * Math.PI * freq * t);
                    compositeData[i] += value;
                }
            });
            
            // Normalize
            const maxVal = Math.max(...compositeData.map(Math.abs));
            const scale = (compositeHeight * 0.4) / (maxVal || 1);
            
            compositeCtx.strokeStyle = '#FF6B6B';
            compositeCtx.lineWidth = 3;
            compositeCtx.beginPath();
            
            for (let i = 0; i < numPoints; i++) {
                const x = (i / numPoints) * width;
                const y = compositeHeight/2 - compositeData[i] * scale;
                
                if (i === 0) {
                    compositeCtx.moveTo(x, y);
                } else {
                    compositeCtx.lineTo(x, y);
                }
            }
            compositeCtx.stroke();
            
            // Draw center lines
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 1;
            for (let i = 0; i < 3; i++) {
                const y = i * componentHeight + componentHeight / 2;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
            
            compositeCtx.strokeStyle = '#ffffff';
            compositeCtx.lineWidth = 1;
            compositeCtx.beginPath();
            compositeCtx.moveTo(0, compositeHeight / 2);
            compositeCtx.lineTo(width, compositeHeight / 2);
            compositeCtx.stroke();
        }

        // Enhance the existing updateMusicVisualization to include chord components
        const originalUpdateMusicVisualization = updateMusicVisualization;
        updateMusicVisualization = function() {
            if (originalUpdateMusicVisualization) {
                originalUpdateMusicVisualization();
            }
            updateChordNotesDisplay();
        };

        // Complex Number Demonstrations
        function updateComplexDemo() {
            const canvas = document.getElementById('complexCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width = 600;
            const height = canvas.height = 400;
            const centerX = width / 2;
            const centerY = height / 2;
            const scale = 80;
            
            // Clear canvas
            ctx.clearRect(0, 0, width, height);
            
            // Get parameters
            const amplitude = parseFloat(document.getElementById('complexAmplitude')?.value || 1);
            const frequency = parseFloat(document.getElementById('complexFrequency')?.value || 1);
            const phase = parseFloat(document.getElementById('complexPhase')?.value || 0);
            const time = Date.now() / 1000; // Current time
            
            // Draw axes
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(width, centerY);
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, height);
            ctx.stroke();
            
            // Draw grid
            ctx.strokeStyle = '#f0f0f0';
            for (let i = -3; i <= 3; i++) {
                if (i !== 0) {
                    ctx.beginPath();
                    ctx.moveTo(centerX + i * scale, 0);
                    ctx.lineTo(centerX + i * scale, height);
                    ctx.moveTo(0, centerY + i * scale);
                    ctx.lineTo(width, centerY + i * scale);
                    ctx.stroke();
                }
            }
            
            // Calculate complex exponential
            const angle = 2 * Math.PI * frequency * time + phase;
            const realPart = amplitude * Math.cos(angle);
            const imagPart = amplitude * Math.sin(angle);
            
            // Draw rotating vector (phasor)
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX + realPart * scale, centerY - imagPart * scale);
            ctx.stroke();
            
            // Draw point
            ctx.fillStyle = '#e74c3c';
            ctx.beginPath();
            ctx.arc(centerX + realPart * scale, centerY - imagPart * scale, 5, 0, 2 * Math.PI);
            ctx.fill();
            
            // Draw projections
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            
            // Real projection
            ctx.beginPath();
            ctx.moveTo(centerX + realPart * scale, centerY - imagPart * scale);
            ctx.lineTo(centerX + realPart * scale, centerY);
            ctx.stroke();
            
            // Imaginary projection
            ctx.beginPath();
            ctx.moveTo(centerX + realPart * scale, centerY - imagPart * scale);
            ctx.lineTo(centerX, centerY - imagPart * scale);
            ctx.stroke();
            
            ctx.setLineDash([]);
            
            // Labels
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Real', width - 30, centerY - 10);
            ctx.save();
            ctx.translate(20, 20);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Imaginary', 0, 0);
            ctx.restore();
            
            // Display values
            const valuesElement = document.getElementById('complexValues');
            if (valuesElement) {
                valuesElement.innerHTML = `
                    Real: ${realPart.toFixed(3)}<br>
                    Imaginary: ${imagPart.toFixed(3)}<br>
                    Magnitude: ${amplitude.toFixed(3)}<br>
                    Phase: ${(angle % (2 * Math.PI)).toFixed(3)} rad
                `;
            }
            
            requestAnimationFrame(updateComplexDemo);
        }
        
        function updateGaussianDemo() {
            const canvas = document.getElementById('gaussianCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width = 800;
            const height = canvas.height = 400;
            
            ctx.clearRect(0, 0, width, height);
            
            // Get parameters
            const sigma = parseFloat(document.getElementById('gaussianSigma')?.value || 1);
            const showFT = document.getElementById('showGaussianFT')?.checked || false;
            
            const timeScale = 40;
            const freqScale = 200;
            const centerY = height / 2;
            
            // Time domain
            if (!showFT) {
                ctx.strokeStyle = '#2980b9';
                ctx.lineWidth = 2;
                ctx.beginPath();
                
                for (let x = 0; x < width; x++) {
                    const t = (x - width/2) / timeScale;
                    const amplitude = Math.exp(-t*t / (2 * sigma*sigma));
                    const y = centerY - amplitude * centerY * 0.8;
                    
                    if (x === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();
                
                // Axes and labels
                ctx.strokeStyle = '#ddd';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(0, centerY);
                ctx.lineTo(width, centerY);
                ctx.moveTo(width/2, 0);
                ctx.lineTo(width/2, height);
                ctx.stroke();
                
                ctx.fillStyle = '#333';
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Gaussian Pulse (Time Domain)', width/2, 30);
                ctx.fillText('œÉ = ' + sigma, width/2, height - 20);
            } else {
                // Frequency domain (Fourier Transform of Gaussian)
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 2;
                ctx.beginPath();
                
                for (let x = 0; x < width; x++) {
                    const f = (x - width/2) / freqScale;
                    const amplitude = sigma * Math.sqrt(2 * Math.PI) * Math.exp(-2 * Math.PI*Math.PI * f*f * sigma*sigma);
                    const y = centerY - amplitude * 20;
                    
                    if (x === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();
                
                // Axes and labels
                ctx.strokeStyle = '#ddd';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(0, centerY);
                ctx.lineTo(width, centerY);
                ctx.moveTo(width/2, 0);
                ctx.lineTo(width/2, height);
                ctx.stroke();
                
                ctx.fillStyle = '#333';
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Fourier Transform (Frequency Domain)', width/2, 30);
                ctx.fillText('1/œÉ width scaling', width/2, height - 20);
            }
        }
        
        function updateSquareWaveDemo() {
            const canvas = document.getElementById('squareWaveCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width = 800;
            const height = canvas.height = 600;
            
            ctx.clearRect(0, 0, width, height);
            
            const harmonics = parseInt(document.getElementById('harmonicCount')?.value || 5);
            const showComponents = document.getElementById('showComponents')?.checked || false;
            
            const timeScale = 200;
            const amplitude = 100;
            const centerY = height / 3;
            
            // Draw axes
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(width, centerY);
            ctx.moveTo(width/2, 0);
            ctx.lineTo(width/2, height/2);
            ctx.stroke();
            
            // Square wave synthesis
            const points = [];
            for (let x = 0; x < width; x++) {
                const t = (x - width/2) / timeScale;
                let y = 0;
                
                // Add harmonics
                for (let n = 1; n <= harmonics; n += 2) {
                    const harmonic = (4 / (n * Math.PI)) * Math.sin(2 * Math.PI * n * t);
                    y += harmonic;
                    
                    // Draw individual components if requested
                    if (showComponents && n <= 5) {
                        ctx.strokeStyle = `hsl(${n * 60}, 70%, 50%)`;
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        
                        for (let x2 = 0; x2 < width; x2++) {
                            const t2 = (x2 - width/2) / timeScale;
                            const comp = (4 / (n * Math.PI)) * Math.sin(2 * Math.PI * n * t2);
                            const y2 = centerY - comp * amplitude;
                            
                            if (x2 === 0) ctx.moveTo(x2, y2);
                            else ctx.lineTo(x2, y2);
                        }
                        ctx.stroke();
                    }
                }
                
                points.push({x, y: centerY - y * amplitude});
            }
            
            // Draw synthesized wave
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            points.forEach((point, i) => {
                if (i === 0) ctx.moveTo(point.x, point.y);
                else ctx.lineTo(point.x, point.y);
            });
            ctx.stroke();
            
            // Draw ideal square wave for comparison
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            
            for (let x = 0; x < width; x++) {
                const t = (x - width/2) / timeScale;
                const square = Math.sign(Math.sin(2 * Math.PI * t));
                const y = centerY - square * amplitude;
                
                if (x === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Frequency spectrum
            const spectrumY = height * 2/3;
            const spectrumHeight = height/4;
            
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Frequency Spectrum', width/2, spectrumY - 20);
            
            // Draw spectrum
            for (let n = 1; n <= harmonics; n += 2) {
                const magnitude = 4 / (n * Math.PI);
                const x = width/2 + (n - harmonics/2) * 40;
                const barHeight = magnitude * spectrumHeight * 2;
                
                ctx.fillStyle = '#3498db';
                ctx.fillRect(x - 10, spectrumY + spectrumHeight - barHeight, 20, barHeight);
                
                ctx.fillStyle = '#333';
                ctx.font = '10px Arial';
                ctx.fillText(n.toString(), x, spectrumY + spectrumHeight + 15);
            }
            
            // Draw spectrum axes
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(0, spectrumY + spectrumHeight);
            ctx.lineTo(width, spectrumY + spectrumHeight);
            ctx.stroke();
        }
        
        // Initialize complex demos when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                updateComplexDemo();
                updateGaussianDemo();
                updateSquareWaveDemo();
                
                // Set up event listeners for controls
                const complexControls = ['complexAmplitude', 'complexFrequency', 'complexPhase'];
                complexControls.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('input', updateComplexDemo);
                    }
                });
                
                const gaussianControls = ['gaussianSigma', 'showGaussianFT'];
                gaussianControls.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('input', updateGaussianDemo);
                        element.addEventListener('change', updateGaussianDemo);
                    }
                });
                
                const squareWaveControls = ['harmonicCount', 'showComponents'];
                squareWaveControls.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('input', updateSquareWaveDemo);
                        element.addEventListener('change', updateSquareWaveDemo);
                    }
                });
            }, 100);
        });

        // MathJax configuration
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
</body>
</html>
