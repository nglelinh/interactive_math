<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chu·ªói Fourier - Minh H·ªça T∆∞∆°ng T√°c</title>
    <script src="../mathjax-config.js"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    <style>
        body {
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
        }
        
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            color: #2c3e50;
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .header p {
            color: #666;
            margin: 10px 0 0 0;
            font-size: 1.1rem;
        }
        
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .theory-section {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border-left: 5px solid #2196f3;
        }
        
        .theory-section h2 {
            color: #1976d2;
            margin: 0 0 20px 0;
            font-size: 1.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .interactive-section {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border-left: 5px solid #4caf50;
        }
        
        .interactive-section h2 {
            color: #2e7d32;
            margin: 0 0 20px 0;
            font-size: 1.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .math-content {
            background: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            line-height: 1.6;
        }
        
        .concept-box {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #2196f3;
        }
        
        .concept-box h4 {
            color: #1976d2;
            margin: 0 0 10px 0;
        }
        
        .visualization-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            margin-top: 10px;
        }
        
        .controls {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .control-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .control-row input[type="range"] {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            -webkit-appearance: none;
        }
        
        .control-row input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #2196f3;
            cursor: pointer;
        }
        
        .value-display {
            min-width: 50px;
            text-align: center;
            font-weight: bold;
            color: #2196f3;
        }
        
        canvas {
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
            display: block;
            margin: 20px auto;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .wave-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .info-card {
            background: rgba(33, 150, 243, 0.1);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #2196f3;
            text-align: center;
        }
        
        .info-card h4 {
            color: #1976d2;
            margin: 0 0 10px 0;
        }
        
        .wave-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .wave-btn {
            background: linear-gradient(45deg, #2196f3, #1976d2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .wave-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.4);
        }
        
        .wave-btn.active {
            background: linear-gradient(45deg, #4caf50, #2e7d32);
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>Chu·ªói Fourier</h1>
            <p>Kh√°m ph√° t∆∞∆°ng t√°c v·ªÅ l√Ω thuy·∫øt v√† ·ª©ng d·ª•ng c·ªßa chu·ªói Fourier</p>
        </div>

        <div class="content-wrapper">
            <div class="theory-section">
                <h2>üìñ L√ù THUY·∫æT</h2>
                
                <div class="math-content">
                    <h3>1. Chu·ªói Fourier</h3>
                    <p><strong>ƒê·ªãnh nghƒ©a:</strong> Chu·ªói Fourier c·ªßa h√†m tu·∫ßn ho√†n $f(x)$ v·ªõi chu k·ª≥ $2L$ l√†:</p>
                    $$f(x) = \frac{a_0}{2} + \sum_{n=1}^{\infty} \left[ a_n \cos\left(\frac{n\pi x}{L}\right) + b_n \sin\left(\frac{n\pi x}{L}\right) \right]$$
                    
                    <div class="concept-box">
                        <h4>H·ªá s·ªë Fourier:</h4>
                        $$a_0 = \frac{1}{L} \int_{-L}^{L} f(x) dx$$
                        $$a_n = \frac{1}{L} \int_{-L}^{L} f(x) \cos\left(\frac{n\pi x}{L}\right) dx$$
                        $$b_n = \frac{1}{L} \int_{-L}^{L} f(x) \sin\left(\frac{n\pi x}{L}\right) dx$$
                    </div>
                </div>

                <div class="math-content">
                    <h3>2. D·∫°ng Ph·ª©c c·ªßa Chu·ªói Fourier</h3>
                    <p><strong>Bi·ªÉu di·ªÖn ph·ª©c:</strong></p>
                    $$f(x) = \sum_{n=-\infty}^{\infty} c_n e^{i n \pi x / L}$$
                    
                    <p>v·ªõi h·ªá s·ªë ph·ª©c:</p>
                    $$c_n = \frac{1}{2L} \int_{-L}^{L} f(x) e^{-i n \pi x / L} dx$$
                    
                    <div class="concept-box">
                        <h4>M·ªëi li√™n h·ªá gi·ªØa c√°c h·ªá s·ªë:</h4>
                        <ul>
                            <li>$c_0 = \frac{a_0}{2}$</li>
                            <li>$c_n = \frac{a_n - ib_n}{2}$ (v·ªõi $n > 0$)</li>
                            <li>$c_{-n} = \frac{a_n + ib_n}{2} = \overline{c_n}$</li>
                        </ul>
                    </div>
                </div>

                <div class="math-content">
                    <h3>3. ƒêi·ªÅu Ki·ªán H·ªôi T·ª• Dirichlet</h3>
                    <p>Chu·ªói Fourier h·ªôi t·ª• t·∫°i $x$ n·∫øu:</p>
                    
                    <div class="concept-box">
                        <h4>ƒêi·ªÅu ki·ªán Dirichlet:</h4>
                        <ul>
                            <li><strong>Li√™n t·ª•c t·ª´ng kh√∫c:</strong> $f$ c√≥ h·ªØu h·∫°n ƒëi·ªÉm gi√°n ƒëo·∫°n</li>
                            <li><strong>Bi·∫øn ph√¢n b·ªã ch·∫∑n:</strong> $f$ c√≥ h·ªØu h·∫°n c·ª±c tr·ªã ƒë·ªãa ph∆∞∆°ng</li>
                            <li><strong>T√≠ch ph√¢n h·ªôi t·ª•:</strong> $\int_{-L}^{L} |f(x)| dx < \infty$</li>
                        </ul>
                        
                        <p>Khi ƒë√≥: $$S(x) = \frac{f(x^+) + f(x^-)}{2}$$</p>
                    </div>
                </div>

                <div class="math-content">
                    <h3>4. V√≠ D·ª• Chu·ªói Fourier C·ªï ƒêi·ªÉn</h3>
                    
                    <div class="concept-box">
                        <h4>S√≥ng vu√¥ng (Square Wave):</h4>
                        $$f(x) = \begin{cases} 1 & \text{if } 0 < x < \pi \\ -1 & \text{if } -\pi < x < 0 \end{cases}$$
                        $$f(x) = \frac{4}{\pi} \sum_{n=1,3,5,...}^{\infty} \frac{\sin(nx)}{n}$$
                    </div>
                    
                    <div class="concept-box">
                        <h4>S√≥ng rƒÉng c∆∞a (Sawtooth Wave):</h4>
                        $$f(x) = x \text{ for } x \in (-\pi, \pi)$$
                        $$f(x) = 2 \sum_{n=1}^{\infty} \frac{(-1)^{n+1}}{n} \sin(nx)$$
                    </div>
                    
                    <div class="concept-box">
                        <h4>S√≥ng tam gi√°c (Triangle Wave):</h4>
                        $$f(x) = \frac{8}{\pi^2} \sum_{n=1,3,5,...}^{\infty} \frac{(-1)^{(n-1)/2}}{n^2} \cos(nx)$$
                    </div>
                </div>

                <div class="math-content">
                    <h3>5. ·ª®ng D·ª•ng c·ªßa Chu·ªói Fourier</h3>
                    
                    <div class="concept-box">
                        <h4>X·ª≠ l√Ω t√≠n hi·ªáu:</h4>
                        <ul>
                            <li><strong>Ph√¢n t√≠ch t·∫ßn s·ªë:</strong> T√°ch t√≠n hi·ªáu th√†nh c√°c th√†nh ph·∫ßn t·∫ßn s·ªë</li>
                            <li><strong>L·ªçc t√≠n hi·ªáu:</strong> Lo·∫°i b·ªè nhi·ªÖu v√† c√°c t·∫ßn s·ªë kh√¥ng mong mu·ªën</li>
                            <li><strong>N√©n d·ªØ li·ªáu:</strong> Bi·ªÉu di·ªÖn t√≠n hi·ªáu b·∫±ng √≠t h·ªá s·ªë h∆°n</li>
                        </ul>
                    </div>
                    
                    <div class="concept-box">
                        <h4>Gi·∫£i ph∆∞∆°ng tr√¨nh vi ph√¢n:</h4>
                        <ul>
                            <li><strong>Ph∆∞∆°ng tr√¨nh nhi·ªát:</strong> $\frac{\partial u}{\partial t} = k \frac{\partial^2 u}{\partial x^2}$</li>
                            <li><strong>Ph∆∞∆°ng tr√¨nh s√≥ng:</strong> $\frac{\partial^2 u}{\partial t^2} = c^2 \frac{\partial^2 u}{\partial x^2}$</li>
                            <li><strong>ƒêi·ªÅu ki·ªán bi√™n tu·∫ßn ho√†n:</strong> S·ª≠ d·ª•ng t√≠nh ch·∫•t tr·ª±c giao</li>
                        </ul>
                    </div>
                </div>

                <div class="math-content" style="background: rgba(255, 215, 0, 0.1); border-left: 4px solid #FFD700; margin-top: 20px;">
                    <h3>üìö L·ªãch S·ª≠ Chu·ªói Fourier</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
                        <div style="background: rgba(255, 255, 255, 0.8); padding: 15px; border-radius: 8px;">
                            <h4>üé≠ Joseph Fourier (1768-1830)</h4>
                            <p><strong>B√†i to√°n truy·ªÅn nhi·ªát (1807):</strong> Fourier nghi√™n c·ª©u s·ª± truy·ªÅn nhi·ªát trong thanh kim lo·∫°i, ph√°t hi·ªán r·∫±ng b·∫•t k·ª≥ h√†m s·ªë tu·∫ßn ho√†n n√†o c≈©ng c√≥ th·ªÉ bi·ªÉu di·ªÖn b·∫±ng t·ªïng v√¥ h·∫°n c√°c h√†m sin v√† cos.</p>
                        </div>
                        <div style="background: rgba(255, 255, 255, 0.8); padding: 15px; border-radius: 8px;">
                            <h4>‚ö° Tranh c√£i ban ƒë·∫ßu</h4>
                            <p><strong>C√°c nh√† to√°n h·ªçc ƒë∆∞∆°ng th·ªùi</strong> nh∆∞ Lagrange v√† Laplace ban ƒë·∫ßu ho√†i nghi v·ªÅ t√≠nh ƒë√∫ng ƒë·∫Øn c·ªßa √Ω t∆∞·ªüng n√†y, ƒë·∫∑c bi·ªát v·ªõi c√°c h√†m kh√¥ng li√™n t·ª•c.</p>
                        </div>
                    </div>

                    <div style="background: rgba(0, 150, 255, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h4>üî¨ Ph√°t tri·ªÉn l√Ω thuy·∫øt</h4>
                        <ul>
                            <li><strong>Dirichlet (1829):</strong> ƒê∆∞a ra ƒëi·ªÅu ki·ªán h·ªôi t·ª• nghi√™m ng·∫∑t</li>
                            <li><strong>Riemann (1850s):</strong> Ph√°t tri·ªÉn l√Ω thuy·∫øt t√≠ch ph√¢n li√™n quan</li>
                            <li><strong>Fej√©r (1900):</strong> Ch·ª©ng minh t√≠nh h·ªôi t·ª• trong tr∆∞·ªùng h·ª£p t·ªïng qu√°t</li>
                        </ul>
                    </div>

                    <div style="background: rgba(76, 175, 80, 0.1); padding: 15px; border-radius: 8px;">
                        <h4>üåü T√°c ƒë·ªông l·ªãch s·ª≠</h4>
                        <p>Chu·ªói Fourier ƒë√£ m·ªü ra k·ª∑ nguy√™n m·ªõi trong to√°n h·ªçc v√† v·∫≠t l√Ω, tr·ªü th√†nh n·ªÅn t·∫£ng cho ph√¢n t√≠ch harmonic hi·ªán ƒë·∫°i v√† x·ª≠ l√Ω t√≠n hi·ªáu s·ªë.</p>
                    </div>
                </div>
            </div>

            <div class="interactive-section">
                <h2>üéÆ MINH H·ªåA T∆Ø∆†NG T√ÅC</h2>
                
                <div class="visualization-container">
                    <p><strong>H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:</strong></p>
                    <ul>
                        <li>üìä <strong>Ch·ªçn lo·∫°i s√≥ng:</strong> Square, Sawtooth, Triangle</li>
                        <li>üî¢ <strong>ƒêi·ªÅu ch·ªânh s·ªë h·∫°ng:</strong> Xem s·ª± h·ªôi t·ª• c·ªßa chu·ªói</li>
                        <li>‚ö° <strong>T·ªëc ƒë·ªô animation:</strong> Quan s√°t qu√° tr√¨nh x·∫•p x·ªâ</li>
                        <li>üéØ <strong>Ph√¢n t√≠ch ph·ªï:</strong> Xem bi√™n ƒë·ªô c√°c harmonic</li>
                    </ul>
                    
                    <div class="controls">
                        <div class="wave-selector">
                            <button class="wave-btn active" onclick="setWaveType('square')">S√≥ng Vu√¥ng</button>
                            <button class="wave-btn" onclick="setWaveType('sawtooth')">S√≥ng RƒÉng C∆∞a</button>
                            <button class="wave-btn" onclick="setWaveType('triangle')">S√≥ng Tam Gi√°c</button>
                            <button class="wave-btn" onclick="setWaveType('custom')">T√πy Ch·ªânh</button>
                        </div>
                        
                        <div class="control-group">
                            <div class="control-row">
                                <label>S·ªë h·∫°ng chu·ªói Fourier:</label>
                                <input type="range" id="termsSlider" min="1" max="50" value="5">
                                <div class="value-display" id="termsValue">5</div>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <div class="control-row">
                                <label>T·ªëc ƒë·ªô animation:</label>
                                <input type="range" id="speedSlider" min="0.1" max="2" step="0.1" value="1">
                                <div class="value-display" id="speedValue">1.0</div>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <div class="control-row">
                                <label>Bi√™n ƒë·ªô:</label>
                                <input type="range" id="amplitudeSlider" min="0.5" max="3" step="0.1" value="1">
                                <div class="value-display" id="amplitudeValue">1.0</div>
                            </div>
                        </div>
                    </div>
                    
                    <canvas id="canvas" width="800" height="400"></canvas>
                    
                    <div class="wave-info">
                        <div class="info-card">
                            <h4>H√†m G·ªëc</h4>
                            <p id="originalFunction">f(x) = square wave</p>
                        </div>
                        <div class="info-card">
                            <h4>S·ªë H·∫°ng Hi·ªán T·∫°i</h4>
                            <p id="currentTerms">N = 5</p>
                        </div>
                        <div class="info-card">
                            <h4>Sai S·ªë RMS</h4>
                            <p id="rmsError">0.000</p>
                        </div>
                        <div class="info-card">
                            <h4>H·ªôi T·ª•</h4>
                            <p id="convergenceStatus">ƒêang h·ªôi t·ª•</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        const termsSlider = document.getElementById("termsSlider");
        const speedSlider = document.getElementById("speedSlider");
        const amplitudeSlider = document.getElementById("amplitudeSlider");
        
        const width = canvas.width;
        const height = canvas.height;
        const centerY = height / 2;
        
        let currentWave = 'square';
        let animationSpeed = 1.0;
        let amplitude = 1.0;
        let animationId;
        let time = 0;
        
        // Wave type definitions
        const waveTypes = {
            square: {
                name: 'S√≥ng Vu√¥ng',
                formula: 'f(x) = 4/œÄ ‚àë sin(nx)/n (n l·∫ª)',
                fourierSeries: (x, terms) => {
                    let sum = 0;
                    for (let n = 1; n <= terms * 2; n += 2) {
                        sum += (4 / (n * Math.PI)) * Math.sin(n * x);
                    }
                    return sum;
                },
                original: (x) => {
                    const period = 2 * Math.PI;
                    const phase = ((x % period) + period) % period;
                    return phase < Math.PI ? 1 : -1;
                }
            },
            sawtooth: {
                name: 'S√≥ng RƒÉng C∆∞a',
                formula: 'f(x) = 2 ‚àë (-1)^(n+1) sin(nx)/n',
                fourierSeries: (x, terms) => {
                    let sum = 0;
                    for (let n = 1; n <= terms; n++) {
                        sum += (2 * Math.pow(-1, n + 1) / n) * Math.sin(n * x);
                    }
                    return sum;
                },
                original: (x) => {
                    const period = 2 * Math.PI;
                    const phase = ((x % period) + period) % period;
                    return (phase / Math.PI) - 1;
                }
            },
            triangle: {
                name: 'S√≥ng Tam Gi√°c',
                formula: 'f(x) = 8/œÄ¬≤ ‚àë (-1)^((n-1)/2) cos(nx)/n¬≤',
                fourierSeries: (x, terms) => {
                    let sum = 0;
                    for (let n = 1; n <= terms * 2; n += 2) {
                        const sign = Math.pow(-1, (n - 1) / 2);
                        sum += (8 / (Math.PI * Math.PI * n * n)) * sign * Math.cos(n * x);
                    }
                    return sum;
                },
                original: (x) => {
                    const period = 2 * Math.PI;
                    const phase = ((x % period) + period) % period;
                    return phase < Math.PI ? (2 * phase / Math.PI) - 1 : 3 - (2 * phase / Math.PI);
                }
            }
        };
        
        function setWaveType(type) {
            currentWave = type;
            
            // Update button states
            document.querySelectorAll('.wave-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update info
            updateWaveInfo();
            drawFourierSeries();
        }
        
        function updateWaveInfo() {
            const wave = waveTypes[currentWave];
            document.getElementById('originalFunction').textContent = wave.formula;
            document.getElementById('currentTerms').textContent = `N = ${termsSlider.value}`;
        }
        
        function drawAxes() {
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 1;
            
            // X-axis
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(width, centerY);
            ctx.stroke();
            
            // Y-axis
            ctx.beginPath();
            ctx.moveTo(width / 2, 0);
            ctx.lineTo(width / 2, height);
            ctx.stroke();
            
            // Grid lines
            ctx.strokeStyle = '#f0f0f0';
            ctx.lineWidth = 0.5;
            
            for (let i = 1; i < 8; i++) {
                const x = (i * width) / 8;
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            
            for (let i = 1; i < 4; i++) {
                const y = (i * height) / 4;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
            
            // Labels
            ctx.fillStyle = '#666';
            ctx.font = '12px Arial';
            ctx.fillText('-2œÄ', 10, centerY - 10);
            ctx.fillText('0', width/2 - 10, centerY - 10);
            ctx.fillText('2œÄ', width - 30, centerY - 10);
        }
        
        function drawOriginalFunction() {
            if (!waveTypes[currentWave]) return;
            
            ctx.strokeStyle = '#ff6b6b';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.globalAlpha = 0.7;
            
            ctx.beginPath();
            for (let x = 0; x < width; x++) {
                const t = ((x / width) - 0.5) * 4 * Math.PI; // Scale to [-2œÄ, 2œÄ]
                const y = waveTypes[currentWave].original(t) * amplitude;
                const scaledY = centerY - y * 80;
                
                if (x === 0) {
                    ctx.moveTo(x, scaledY);
                } else {
                    ctx.lineTo(x, scaledY);
                }
            }
            ctx.stroke();
            ctx.setLineDash([]);
            ctx.globalAlpha = 1;
        }
        
        function drawFourierSeries() {
            const terms = parseInt(termsSlider.value);
            
            ctx.clearRect(0, 0, width, height);
            drawAxes();
            drawOriginalFunction();
            
            if (!waveTypes[currentWave]) return;
            
            // Draw Fourier series approximation
            ctx.strokeStyle = '#007acc';
            ctx.lineWidth = 3;
            
            ctx.beginPath();
            let rmsError = 0;
            let pointCount = 0;
            
            for (let x = 0; x < width; x++) {
                const t = ((x / width) - 0.5) * 4 * Math.PI; // Scale to [-2œÄ, 2œÄ]
                const fourierY = waveTypes[currentWave].fourierSeries(t, terms) * amplitude;
                const originalY = waveTypes[currentWave].original(t) * amplitude;
                
                const scaledY = centerY - fourierY * 80;
                
                if (x === 0) {
                    ctx.moveTo(x, scaledY);
                } else {
                    ctx.lineTo(x, scaledY);
                }
                
                // Calculate RMS error
                if (x % 4 === 0) { // Sample every 4 pixels
                    rmsError += Math.pow(fourierY - originalY, 2);
                    pointCount++;
                }
            }
            
            ctx.stroke();
            
            // Update RMS error display
            rmsError = Math.sqrt(rmsError / pointCount);
            document.getElementById('rmsError').textContent = rmsError.toFixed(3);
            
            // Update convergence status
            const convergenceStatus = rmsError < 0.1 ? 'ƒê√£ h·ªôi t·ª• t·ªët' : 
                                     rmsError < 0.5 ? 'ƒêang h·ªôi t·ª•' : 'Ch∆∞a h·ªôi t·ª•';
            document.getElementById('convergenceStatus').textContent = convergenceStatus;
        }
        
        function updateSliderValues() {
            document.getElementById('termsValue').textContent = termsSlider.value;
            document.getElementById('speedValue').textContent = parseFloat(speedSlider.value).toFixed(1);
            document.getElementById('amplitudeValue').textContent = parseFloat(amplitudeSlider.value).toFixed(1);
            
            animationSpeed = parseFloat(speedSlider.value);
            amplitude = parseFloat(amplitudeSlider.value);
        }
        
        // Event listeners
        termsSlider.addEventListener('input', () => {
            updateSliderValues();
            updateWaveInfo();
            drawFourierSeries();
        });
        
        speedSlider.addEventListener('input', updateSliderValues);
        amplitudeSlider.addEventListener('input', () => {
            updateSliderValues();
            drawFourierSeries();
        });
        
        // Initialize
        updateSliderValues();
        updateWaveInfo();
        drawFourierSeries();
    </script>
</body>
</html>