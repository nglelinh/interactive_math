<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√≠nh Li√™n T·ª•c & Kh·∫£ Vi - Gi·∫£i T√≠ch Th·ª±c</title>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script src="../math-simple.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 30px;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 50%, #9b59b6 100%);
            color: #ffffff;
            line-height: 1.8;
            font-size: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            text-align: center;
            color: #ffffff;
            text-shadow: 4px 4px 8px rgba(0,0,0,0.8);
            font-size: 3.2em;
            margin-bottom: 40px;
            font-weight: 900;
            letter-spacing: 1px;
        }
        
        .theory-section {
            background: rgba(255, 215, 0, 0.15);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .control-group {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .control-group h3 {
            margin-top: 0;
            color: #FFD700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            font-size: 1.4em;
            font-weight: 700;
        }
        
        select, input[type="number"], input[type="range"], button {
            padding: 8px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            margin: 5px;
            font-size: 14px;
        }
        
        button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
            padding: 10px 15px;
        }
        
        button:hover {
            transform: scale(1.05);
        }
        
        .canvas-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        canvas {
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            background: white;
            display: block;
        }
        
        .definition-box {
            background: rgba(33, 150, 243, 0.15);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #2196F3;
            margin: 15px 0;
        }
        
        .theorem-box {
            background: rgba(156, 39, 176, 0.15);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #9C27B0;
            margin: 15px 0;
        }
        
        .example-box {
            background: rgba(76, 175, 80, 0.15);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
            margin: 15px 0;
        }
        
        .formula-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            text-align: center;
            margin: 10px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .epsilon-delta {
            background: rgba(255, 193, 7, 0.15);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #FFC107;
            margin: 10px 0;
        }
        
        .function-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }
        
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .concept-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
        }
        
        .concept-card h4 {
            margin-top: 0;
            color: #4CAF50;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            font-size: 1.6em;
            font-weight: 800;
        }
    </style>





</head>
<body>
    <div class="container">
        <h1>üìà T√≠nh Li√™n T·ª•c & Kh·∫£ Vi - Gi·∫£i T√≠ch Th·ª±c</h1>
        
        <!-- Historical Section -->
        <div style="background: linear-gradient(135deg, #2d1b69 0%, #11998e 100%); padding: 25px; border-radius: 15px; margin-bottom: 30px; border: 2px solid rgba(255, 255, 255, 0.1);">
            <h2 style="color: #FFD700; text-align: center; margin-bottom: 25px;">üìö L·ªãch S·ª≠ Gi·∫£i T√≠ch Th·ª±c</h2>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px;">
                    <h4 style="color: #00d4ff; margin-bottom: 15px;">üß† Augustin-Louis Cauchy (1789-1857)</h4>
                    <p><strong>C√°ch m·∫°ng Œµ-Œ¥:</strong> Cauchy ƒë∆∞a ra ƒë·ªãnh nghƒ©a nghi√™m ng·∫∑t ƒë·∫ßu ti√™n v·ªÅ t√≠nh li√™n t·ª•c v√† gi·ªõi h·∫°n, t·∫°o n·ªÅn m√≥ng cho gi·∫£i t√≠ch hi·ªán ƒë·∫°i.</p>
                </div>
                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px;">
                    <h4 style="color: #ff6b6b; margin-bottom: 15px;">‚ö° Karl Weierstrass (1815-1897)</h4>
                    <p><strong>Ti√™u chu·∫©n nghi√™m ng·∫∑t:</strong> Weierstrass ho√†n thi·ªán ƒë·ªãnh nghƒ©a Œµ-Œ¥ v√† ch·ª©ng minh nhi·ªÅu ƒë·ªãnh l√Ω c∆° b·∫£n v·ªÅ t√≠nh li√™n t·ª•c ƒë·ªÅu.</p>
                </div>
            </div>

            <div style="background: rgba(255, 215, 0, 0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h4 style="color: #FFD700; margin-bottom: 15px;">üåä Cu·ªôc kh·ªßng ho·∫£ng n·ªÅn m√≥ng</h4>
                <ul style="color: #ffffff; line-height: 1.8;">
                    <li><strong>Th·∫ø k·ª∑ 18:</strong> Euler, Lagrange s·ª≠ d·ª•ng calculus m√† kh√¥ng c√≥ n·ªÅn m√≥ng nghi√™m ng·∫∑t</li>
                    <li><strong>1820s-1870s:</strong> Cauchy, Weierstrass, Riemann x√¢y d·ª±ng l·∫°i to√†n b·ªô l√Ω thuy·∫øt</li>
                    <li><strong>Cantor (1870s):</strong> L√Ω thuy·∫øt t·∫≠p h·ª£p v√† s·ªë th·ª±c ho√†n ch·ªânh</li>
                </ul>
            </div>

            <div style="background: rgba(76, 175, 80, 0.15); padding: 20px; border-radius: 10px;">
                <h4 style="color: #4caf50; margin-bottom: 15px;">üåü Di s·∫£n hi·ªán ƒë·∫°i</h4>
                <p>T·ª´ nh·ªØng tranh c√£i v·ªÅ "infinitesimals", gi·∫£i t√≠ch th·ª±c ƒë√£ tr·ªü th√†nh n·ªÅn t·∫£ng v·ªØng ch·∫Øc cho to√†n b·ªô to√°n h·ªçc hi·ªán ƒë·∫°i, t·ª´ quantum mechanics ƒë·∫øn machine learning.</p>
            </div>
        </div>
        
        <div class="theory-section">
            <h2>üîç N·ªÅn T·∫£ng To√°n H·ªçc</h2>
            <p><strong>T√≠nh Li√™n T·ª•c:</strong> H√†m f li√™n t·ª•c t·∫°i x = c n·∫øu gi√° tr·ªã h√†m b·∫±ng gi·ªõi h·∫°n khi x ti·∫øn t·ªõi c.</p>
            <p><strong>T√≠nh Kh·∫£ Vi:</strong> H√†m f kh·∫£ vi t·∫°i x = c n·∫øu gi·ªõi h·∫°n c·ªßa th∆∞∆°ng s·ªë hi·ªáu t·ªìn t·∫°i.</p>
            <p><strong>M·ªëi Quan H·ªá Ch√≠nh:</strong> Kh·∫£ vi k√©o theo li√™n t·ª•c, nh∆∞ng li√™n t·ª•c kh√¥ng k√©o theo kh·∫£ vi.</p>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <h3>L·ª±a Ch·ªçn H√†m</h3>
                <label>Lo·∫°i H√†m:</label>
                <select id="functionType">
                    <option value="continuous">f(x) = x¬≤ (Li√™n t·ª•c & Kh·∫£ vi)</option>
                    <option value="abs">f(x) = |x| (Li√™n t·ª•c, kh√¥ng kh·∫£ vi t·∫°i 0)</option>
                    <option value="step">f(x) = floor(x) (Kh√¥ng li√™n t·ª•c c≈©ng kh√¥ng kh·∫£ vi)</option>
                    <option value="sin">f(x) = sin(1/x) (H√†nh vi dao ƒë·ªông)</option>
                    <option value="piecewise">H√†m t·ª´ng kh√∫c</option>
                    <option value="removable">Gian ƒëo·∫°n lo·∫°i ƒë∆∞·ª£c</option>
                    <option value="jump">Gian ƒëo·∫°n nh·∫£y</option>
                    <option value="infinite">Gian ƒëo·∫°n v√¥ h·∫°n</option>
                </select>
                <div id="functionInfo" class="function-info"></div>
            </div>
            
            <div class="control-group">
                <h3>Ph√¢n T√≠ch Œµ-Œ¥</h3>
                <label>ƒêi·ªÉm Quan T√¢m (c):</label>
                <input type="number" id="pointC" value="0" step="0.1" min="-5" max="5">
                <br>
                <label>Epsilon (Œµ):</label>
                <input type="range" id="epsilon" min="0.1" max="2" step="0.1" value="0.5">
                <span id="epsilonValue">0.5</span>
                <br>
                <label>Delta (Œ¥):</label>
                <input type="range" id="delta" min="0.1" max="2" step="0.1" value="0.5">
                <span id="deltaValue">0.5</span>
                <br>
                <button onclick="findOptimalDelta()">T√¨m Œ¥ T·ªëi ∆Øu</button>
                <div id="epsilonDeltaInfo" class="epsilon-delta"></div>
            </div>
            
            <div class="control-group">
                <h3>Th∆∞∆°ng S·ªë Hi·ªáu</h3>
                <label>ƒêi·ªÉm (x):</label>
                <input type="number" id="diffPoint" value="1" step="0.1" min="-3" max="3">
                <br>
                <label>B∆∞·ªõc nh·∫£y (h):</label>
                <input type="range" id="stepSize" min="0.01" max="1" step="0.01" value="0.5">
                <span id="stepValue">0.5</span>
                <br>
                <button onclick="animateLimitProcess()">M√¥ ph·ªèng h ‚Üí 0</button>
                <div id="differenceQuotientInfo" class="function-info"></div>
            </div>
        </div>
        
        <div class="canvas-container">
            <div>
                <h3 style="text-align: center;">ƒê·ªì Th·ªã H√†m</h3>
                <canvas id="functionCanvas" width="500" height="400"></canvas>
            </div>
            <div>
                <h3 style="text-align: center;">Minh H·ªça Œµ-Œ¥</h3>
                <canvas id="epsilonDeltaCanvas" width="500" height="400"></canvas>
            </div>
            <div>
                <h3 style="text-align: center;">Th∆∞∆°ng S·ªë Hi·ªáu</h3>
                <canvas id="differenceCanvas" width="500" height="400"></canvas>
            </div>
            <div>
                <h3 style="text-align: center;">Ph√¢n T√≠ch T√≠nh Li√™n T·ª•c</h3>
                <canvas id="continuityCanvas" width="500" height="400"></canvas>
            </div>
        </div>
        
        <div class="concept-grid">
            <div class="concept-card">
                <h4>üìê ƒê·ªãnh Nghƒ©a T√≠nh Li√™n T·ª•c</h4>
                <div class="definition-box">
                    <strong>ƒê·ªãnh nghƒ©a:</strong> f li√™n t·ª•c t·∫°i x = c n·∫øu:
                    <ol>
                        <li>f(c) ƒë∆∞·ª£c x√°c ƒë·ªãnh</li>
                        <li>lim(x‚Üíc) f(x) t·ªìn t·∫°i</li>
                        <li>lim(x‚Üíc) f(x) = f(c)</li>
                    </ol>
                </div>
                <div class="formula-box">
                    ƒê·ªãnh nghƒ©a Œµ-Œ¥:<br>
                    ‚àÄŒµ > 0, ‚àÉŒ¥ > 0 : |x - c| < Œ¥ ‚üπ |f(x) - f(c)| < Œµ
                </div>
                <div class="example-box">
                    <strong>C√°c Lo·∫°i Gian ƒêo·∫°n:</strong><br>
                    ‚Ä¢ Lo·∫°i ƒë∆∞·ª£c: lim t·ªìn t·∫°i nh∆∞ng ‚â† f(c)<br>
                    ‚Ä¢ Nh·∫£y: Gi·ªõi h·∫°n tr√°i v√† ph·∫£i t·ªìn t·∫°i nh∆∞ng kh√°c nhau<br>
                    ‚Ä¢ V√¥ h·∫°n: H√†m ti·∫øn t·ªõi ¬±‚àû
                </div>
            </div>
            
            <div class="concept-card">
                <h4>üéØ T√≠nh Kh·∫£ Vi</h4>
                <div class="definition-box">
                    <strong>ƒê·ªãnh nghƒ©a:</strong> f kh·∫£ vi t·∫°i x = c n·∫øu:
                    <div class="formula-box">
                        f'(c) = lim(h‚Üí0) [f(c+h) - f(c)]/h
                    </div>
                    t·ªìn t·∫°i (v√† h·ªØu h·∫°n).
                </div>
                <div class="theorem-box">
                    <strong>ƒê·ªãnh L√Ω C∆° B·∫£n:</strong> N·∫øu f kh·∫£ vi t·∫°i c, th√¨ f li√™n t·ª•c t·∫°i c.
                </div>
                <div class="example-box">
                    <strong>Ph·∫£n v√≠ d·ª•:</strong> f(x) = |x| li√™n t·ª•c t·∫°i 0 nh∆∞ng kh√¥ng kh·∫£ vi (g√≥c nh·ªçn).
                </div>
            </div>
            
            <div class="concept-card">
                <h4>üîç C√°c ƒê·ªãnh L√Ω Quan Tr·ªçng</h4>
                <div class="theorem-box">
                    <strong>ƒê·ªãnh l√Ω Gi√° tr·ªã Trung gian:</strong> N·∫øu f li√™n t·ª•c tr√™n [a,b] v√† k n·∫±m gi·ªØa f(a) v√† f(b), th√¨ ‚àÉc ‚àà (a,b) : f(c) = k.
                </div>
                <div class="theorem-box">
                    <strong>ƒê·ªãnh l√Ω Gi√° tr·ªã C·ª±c tr·ªã:</strong> N·∫øu f li√™n t·ª•c tr√™n [a,b], th√¨ f ƒë·∫°t gi√° tr·ªã l·ªõn nh·∫•t v√† nh·ªè nh·∫•t.
                </div>
                <div class="theorem-box">
                    <strong>ƒê·ªãnh l√Ω Gi√° tr·ªã Trung b√¨nh:</strong> N·∫øu f li√™n t·ª•c tr√™n [a,b] v√† kh·∫£ vi tr√™n (a,b), th√¨ ‚àÉc ‚àà (a,b) : f'(c) = [f(b)-f(a)]/(b-a).
                </div>
            </div>
            
            <div class="concept-card">
                <h4>‚ö° Uniform Continuity</h4>
                <div class="definition-box">
                    <strong>Definition:</strong> f is uniformly continuous on S if:
                    <div class="formula-box">
                        ‚àÄŒµ > 0, ‚àÉŒ¥ > 0 : ‚àÄx,y ‚àà S, |x-y| < Œ¥ ‚üπ |f(x)-f(y)| < Œµ
                    </div>
                </div>
                <div class="theorem-box">
                    <strong>Heine-Cantor Theorem:</strong> If f is continuous on a compact set K, then f is uniformly continuous on K.
                </div>
                <div class="example-box">
                    <strong>Example:</strong> f(x) = x¬≤ is continuous on ‚Ñù but not uniformly continuous on ‚Ñù.
                </div>
            </div>
            
            <div class="concept-card">
                <h4>üìä Higher Order Differentiability</h4>
                <div class="definition-box">
                    <strong>C^k Functions:</strong> Functions with k continuous derivatives.
                    <ul>
                        <li>C^0: Continuous functions</li>
                        <li>C^1: Continuously differentiable</li>
                        <li>C^‚àû: Infinitely differentiable (smooth)</li>
                        <li>C^œâ: Real analytic functions</li>
                    </ul>
                </div>
                <div class="example-box">
                    <strong>Examples:</strong><br>
                    ‚Ä¢ e^x ‚àà C^‚àû<br>
                    ‚Ä¢ |x|¬≥ ‚àà C^1 but not C^2<br>
                    ‚Ä¢ Weierstrass function: continuous but nowhere differentiable
                </div>
            </div>
            
            <div class="concept-card">
                <h4>üé≤ Applications</h4>
                <div class="example-box">
                    <strong>Physics:</strong><br>
                    ‚Ä¢ Position continuity ensures no teleportation<br>
                    ‚Ä¢ Velocity differentiability gives acceleration<br>
                    ‚Ä¢ Smooth functions model physical systems
                </div>
                <div class="example-box">
                    <strong>Optimization:</strong><br>
                    ‚Ä¢ Critical points where f'(x) = 0<br>
                    ‚Ä¢ Second derivative test for extrema<br>
                    ‚Ä¢ Lagrange multipliers for constrained optimization
                </div>
                <div class="example-box">
                    <strong>Numerical Analysis:</strong><br>
                    ‚Ä¢ Continuity ensures convergence of approximations<br>
                    ‚Ä¢ Differentiability enables Newton's method<br>
                    ‚Ä¢ Smoothness improves interpolation accuracy
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentFunction = 'continuous';
        let pointC = 0;
        let epsilon = 0.5;
        let delta = 0.5;
        let diffPoint = 1;
        let stepSize = 0.5;
        let animationRunning = false;
        
        // Function definitions
        const functions = {
            continuous: {
                f: (x) => x * x,
                name: 'f(x) = x¬≤',
                description: 'Continuous and differentiable everywhere',
                derivative: (x) => 2 * x,
                continuousAt: () => true,
                differentiableAt: () => true
            },
            abs: {
                f: (x) => Math.abs(x),
                name: 'f(x) = |x|',
                description: 'Continuous everywhere, not differentiable at x = 0',
                derivative: (x) => x > 0 ? 1 : x < 0 ? -1 : undefined,
                continuousAt: () => true,
                differentiableAt: (x) => x !== 0
            },
            step: {
                f: (x) => Math.floor(x),
                name: 'f(x) = floor(x)',
                description: 'Discontinuous at integers, not differentiable',
                derivative: (x) => x % 1 !== 0 ? 0 : undefined,
                continuousAt: (x) => x % 1 !== 0,
                differentiableAt: (x) => x % 1 !== 0
            },
            sin: {
                f: (x) => x !== 0 ? Math.sin(1/x) : 0,
                name: 'f(x) = sin(1/x) for x‚â†0, 0 for x=0',
                description: 'Oscillatory behavior near x = 0',
                derivative: (x) => x !== 0 ? -Math.cos(1/x)/(x*x) : undefined,
                continuousAt: (x) => x !== 0,
                differentiableAt: (x) => x !== 0
            },
            piecewise: {
                f: (x) => x < 0 ? x*x : x >= 0 ? 2*x : 0,
                name: 'f(x) = {x¬≤ if x<0; 2x if x‚â•0}',
                description: 'Piecewise function with corner at x = 0',
                derivative: (x) => x < 0 ? 2*x : x > 0 ? 2 : undefined,
                continuousAt: (x) => true,
                differentiableAt: (x) => x !== 0
            },
            removable: {
                f: (x) => x !== 1 ? (x*x - 1)/(x - 1) : 1.5,
                name: 'f(x) = (x¬≤-1)/(x-1) for x‚â†1, 1.5 for x=1',
                description: 'Removable discontinuity at x = 1',
                derivative: (x) => x !== 1 ? 2 : undefined,
                continuousAt: (x) => x !== 1,
                differentiableAt: (x) => x !== 1
            },
            jump: {
                f: (x) => x < 0 ? -1 : x > 0 ? 1 : 0,
                name: 'f(x) = sign(x)',
                description: 'Jump discontinuity at x = 0',
                derivative: (x) => x !== 0 ? 0 : undefined,
                continuousAt: (x) => x !== 0,
                differentiableAt: (x) => x !== 0
            },
            infinite: {
                f: (x) => x !== 0 ? 1/x : NaN,
                name: 'f(x) = 1/x',
                description: 'Infinite discontinuity at x = 0',
                derivative: (x) => x !== 0 ? -1/(x*x) : undefined,
                continuousAt: (x) => x !== 0,
                differentiableAt: (x) => x !== 0
            }
        };
        
        function updateFunction() {
            currentFunction = document.getElementById('functionType').value;
            const func = functions[currentFunction];
            
            document.getElementById('functionInfo').innerHTML = `
                <strong>${func.name}</strong><br>
                ${func.description}
            `;
            
            drawAll();
        }
        
        function updateEpsilonDelta() {
            pointC = parseFloat(document.getElementById('pointC').value);
            epsilon = parseFloat(document.getElementById('epsilon').value);
            delta = parseFloat(document.getElementById('delta').value);
            
            document.getElementById('epsilonValue').textContent = epsilon.toFixed(1);
            document.getElementById('deltaValue').textContent = delta.toFixed(1);
            
            const func = functions[currentFunction];
            const isContinuous = func.continuousAt(pointC);
            const fc = func.f(pointC);
            
            let info = `At x = ${pointC}:<br>`;
            info += `f(${pointC}) = ${isNaN(fc) ? 'undefined' : fc.toFixed(3)}<br>`;
            info += `Function is ${isContinuous ? 'continuous' : 'discontinuous'} at this point<br>`;
            
            if (isContinuous && !isNaN(fc)) {
                info += `For Œµ = ${epsilon}, we need Œ¥ such that:<br>`;
                info += `|x - ${pointC}| < Œ¥ ‚üπ |f(x) - ${fc.toFixed(3)}| < ${epsilon}`;
            }
            
            document.getElementById('epsilonDeltaInfo').innerHTML = info;
            
            drawAll();
        }
        
        function updateDifferenceQuotient() {
            diffPoint = parseFloat(document.getElementById('diffPoint').value);
            stepSize = parseFloat(document.getElementById('stepSize').value);
            
            document.getElementById('stepValue').textContent = stepSize.toFixed(2);
            
            const func = functions[currentFunction];
            const fx = func.f(diffPoint);
            const fxh = func.f(diffPoint + stepSize);
            const diffQuotient = (fxh - fx) / stepSize;
            const derivative = func.derivative ? func.derivative(diffPoint) : undefined;
            
            let info = `At x = ${diffPoint}, h = ${stepSize}:<br>`;
            info += `f(${diffPoint}) = ${fx.toFixed(3)}<br>`;
            info += `f(${diffPoint} + ${stepSize}) = ${fxh.toFixed(3)}<br>`;
            info += `Difference quotient = ${diffQuotient.toFixed(3)}<br>`;
            
            if (derivative !== undefined) {
                info += `True derivative = ${derivative.toFixed(3)}<br>`;
                info += `Error = ${Math.abs(diffQuotient - derivative).toFixed(3)}`;
            } else {
                info += `Derivative does not exist at this point`;
            }
            
            document.getElementById('differenceQuotientInfo').innerHTML = info;
            
            drawAll();
        }
        
        function findOptimalDelta() {
            const func = functions[currentFunction];
            const fc = func.f(pointC);
            
            if (!func.continuousAt(pointC) || isNaN(fc)) {
                alert('Function is not continuous at this point!');
                return;
            }
            
            // Binary search for optimal delta
            let optimalDelta = 0.01;
            for (let d = 0.01; d <= 2; d += 0.01) {
                let valid = true;
                for (let x = pointC - d; x <= pointC + d; x += 0.01) {
                    if (Math.abs(func.f(x) - fc) > epsilon) {
                        valid = false;
                        break;
                    }
                }
                if (valid) {
                    optimalDelta = d;
                    break;
                }
            }
            
            document.getElementById('delta').value = optimalDelta;
            delta = optimalDelta;
            updateEpsilonDelta();
        }
        
        async function animateLimitProcess() {
            if (animationRunning) return;
            animationRunning = true;
            
            const originalStep = stepSize;
            const steps = [1, 0.5, 0.25, 0.1, 0.05, 0.01, 0.005, 0.001];
            
            for (let step of steps) {
                stepSize = step;
                document.getElementById('stepSize').value = step;
                updateDifferenceQuotient();
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            
            animationRunning = false;
        }
        
        function drawFunction() {
            const canvas = document.getElementById('functionCanvas');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const func = functions[currentFunction];
            
            // Draw axes
            drawAxes(ctx, width, height);
            
            // Draw function
            ctx.strokeStyle = '#2196F3';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            let started = false;
            for (let x = -5; x <= 5; x += 0.01) {
                const y = func.f(x);
                if (isFinite(y) && Math.abs(y) < 10) {
                    const canvasX = (x + 5) / 10 * width;
                    const canvasY = height - (y + 5) / 10 * height;
                    
                    if (!started) {
                        ctx.moveTo(canvasX, canvasY);
                        started = true;
                    } else {
                        ctx.lineTo(canvasX, canvasY);
                    }
                } else {
                    started = false;
                }
            }
            ctx.stroke();
            
            // Mark point of interest
            const fc = func.f(pointC);
            if (isFinite(fc)) {
                const canvasX = (pointC + 5) / 10 * width;
                const canvasY = height - (fc + 5) / 10 * height;
                
                ctx.fillStyle = func.continuousAt(pointC) ? '#4CAF50' : '#f44336';
                ctx.beginPath();
                ctx.arc(canvasX, canvasY, 5, 0, 2 * Math.PI);
                ctx.fill();
            }
        }
        
        function drawEpsilonDelta() {
            const canvas = document.getElementById('epsilonDeltaCanvas');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const func = functions[currentFunction];
            const fc = func.f(pointC);
            
            if (!isFinite(fc)) return;
            
            // Draw axes
            drawAxes(ctx, width, height);
            
            // Draw function
            ctx.strokeStyle = '#2196F3';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            let started = false;
            for (let x = -5; x <= 5; x += 0.01) {
                const y = func.f(x);
                if (isFinite(y) && Math.abs(y) < 10) {
                    const canvasX = (x + 5) / 10 * width;
                    const canvasY = height - (y + 5) / 10 * height;
                    
                    if (!started) {
                        ctx.moveTo(canvasX, canvasY);
                        started = true;
                    } else {
                        ctx.lineTo(canvasX, canvasY);
                    }
                } else {
                    started = false;
                }
            }
            ctx.stroke();
            
            // Draw epsilon band
            const centerX = (pointC + 5) / 10 * width;
            const centerY = height - (fc + 5) / 10 * height;
            const epsilonHeight = epsilon / 10 * height;
            
            ctx.fillStyle = 'rgba(255, 193, 7, 0.3)';
            ctx.fillRect(0, centerY - epsilonHeight, width, 2 * epsilonHeight);
            
            // Draw delta interval
            const deltaWidth = delta / 10 * width;
            ctx.fillStyle = 'rgba(76, 175, 80, 0.3)';
            ctx.fillRect(centerX - deltaWidth, 0, 2 * deltaWidth, height);
            
            // Draw center point
            ctx.fillStyle = '#f44336';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 5, 0, 2 * Math.PI);
            ctx.fill();
        }
        
        function drawDifferenceQuotient() {
            const canvas = document.getElementById('differenceCanvas');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const func = functions[currentFunction];
            
            // Draw axes
            drawAxes(ctx, width, height);
            
            // Draw function
            ctx.strokeStyle = '#2196F3';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            let started = false;
            for (let x = -5; x <= 5; x += 0.01) {
                const y = func.f(x);
                if (isFinite(y) && Math.abs(y) < 10) {
                    const canvasX = (x + 5) / 10 * width;
                    const canvasY = height - (y + 5) / 10 * height;
                    
                    if (!started) {
                        ctx.moveTo(canvasX, canvasY);
                        started = true;
                    } else {
                        ctx.lineTo(canvasX, canvasY);
                    }
                } else {
                    started = false;
                }
            }
            ctx.stroke();
            
            // Draw secant line
            const x1 = diffPoint;
            const x2 = diffPoint + stepSize;
            const y1 = func.f(x1);
            const y2 = func.f(x2);
            
            if (isFinite(y1) && isFinite(y2)) {
                const canvas1X = (x1 + 5) / 10 * width;
                const canvas1Y = height - (y1 + 5) / 10 * height;
                const canvas2X = (x2 + 5) / 10 * width;
                const canvas2Y = height - (y2 + 5) / 10 * height;
                
                // Secant line
                ctx.strokeStyle = '#ff6b6b';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(canvas1X, canvas1Y);
                ctx.lineTo(canvas2X, canvas2Y);
                ctx.stroke();
                
                // Points
                ctx.fillStyle = '#ff6b6b';
                ctx.beginPath();
                ctx.arc(canvas1X, canvas1Y, 4, 0, 2 * Math.PI);
                ctx.arc(canvas2X, canvas2Y, 4, 0, 2 * Math.PI);
                ctx.fill();
                
                // Tangent line (if derivative exists)
                const derivative = func.derivative ? func.derivative(x1) : undefined;
                if (derivative !== undefined) {
                    const tangentLength = 2;
                    const tx1 = x1 - tangentLength;
                    const ty1 = y1 - derivative * tangentLength;
                    const tx2 = x1 + tangentLength;
                    const ty2 = y1 + derivative * tangentLength;
                    
                    const tcanvas1X = (tx1 + 5) / 10 * width;
                    const tcanvas1Y = height - (ty1 + 5) / 10 * height;
                    const tcanvas2X = (tx2 + 5) / 10 * width;
                    const tcanvas2Y = height - (ty2 + 5) / 10 * height;
                    
                    ctx.strokeStyle = '#4CAF50';
                    ctx.setLineDash([5, 5]);
                    ctx.beginPath();
                    ctx.moveTo(tcanvas1X, tcanvas1Y);
                    ctx.lineTo(tcanvas2X, tcanvas2Y);
                    ctx.stroke();
                    ctx.setLineDash([]);
                }
            }
        }
        
        function drawContinuityAnalysis() {
            const canvas = document.getElementById('continuityCanvas');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw classification of points
            const testPoints = [-2, -1, 0, 1, 2];
            const func = functions[currentFunction];
            
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            
            testPoints.forEach((x, i) => {
                const xPos = (i + 1) * width / (testPoints.length + 1);
                const isCont = func.continuousAt(x);
                const isDiff = func.differentiableAt(x);
                const y = func.f(x);
                
                // Draw classification
                ctx.fillStyle = isCont ? (isDiff ? '#4CAF50' : '#FF9800') : '#f44336';
                ctx.fillRect(xPos - 30, 50, 60, 80);
                
                ctx.fillStyle = '#333';
                ctx.fillText(`x = ${x}`, xPos, 40);
                ctx.fillText(isFinite(y) ? `f(${x}) = ${y.toFixed(2)}` : 'undefined', xPos, 150);
                
                ctx.fillStyle = 'white';
                ctx.fillText(isCont ? 'Continuous' : 'Discontinuous', xPos, 75);
                ctx.fillText(isDiff ? 'Differentiable' : 'Not Diff.', xPos, 95);
                ctx.fillText(`at x = ${x}`, xPos, 115);
            });
            
            // Legend
            ctx.fillStyle = '#4CAF50';
            ctx.fillRect(50, height - 100, 20, 20);
            ctx.fillStyle = '#333';
            ctx.textAlign = 'left';
            ctx.fillText('Continuous & Differentiable', 80, height - 85);
            
            ctx.fillStyle = '#FF9800';
            ctx.fillRect(50, height - 70, 20, 20);
            ctx.fillText('Continuous, Not Differentiable', 80, height - 55);
            
            ctx.fillStyle = '#f44336';
            ctx.fillRect(50, height - 40, 20, 20);
            ctx.fillText('Discontinuous', 80, height - 25);
        }
        
        function drawAxes(ctx, width, height) {
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 1;
            
            // Grid
            for (let i = 0; i <= 10; i++) {
                const x = i * width / 10;
                const y = i * height / 10;
                
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
            
            // Main axes
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            
            // X-axis (y = 0)
            const zeroY = height - (0 + 5) / 10 * height;
            ctx.beginPath();
            ctx.moveTo(0, zeroY);
            ctx.lineTo(width, zeroY);
            ctx.stroke();
            
            // Y-axis (x = 0)
            const zeroX = (0 + 5) / 10 * width;
            ctx.beginPath();
            ctx.moveTo(zeroX, 0);
            ctx.lineTo(zeroX, height);
            ctx.stroke();
        }
        
        function drawAll() {
            drawFunction();
            drawEpsilonDelta();
            drawDifferenceQuotient();
            drawContinuityAnalysis();
        }
        
        // Event listeners
        document.getElementById('functionType').addEventListener('change', updateFunction);
        document.getElementById('pointC').addEventListener('input', updateEpsilonDelta);
        document.getElementById('epsilon').addEventListener('input', updateEpsilonDelta);
        document.getElementById('delta').addEventListener('input', updateEpsilonDelta);
        document.getElementById('diffPoint').addEventListener('input', updateDifferenceQuotient);
        document.getElementById('stepSize').addEventListener('input', updateDifferenceQuotient);
        
        // Initialize
        updateFunction();
        updateEpsilonDelta();
        updateDifferenceQuotient();
    </script>
</body>
</html>
