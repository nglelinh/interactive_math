<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minh h·ªça Convex Sets</title>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    <script src="../math-config.js"></script>
    <style>
        body {
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
        }
        
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            color: #2c3e50;
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .header p {
            color: #666;
            margin: 10px 0 0 0;
            font-size: 1.1rem;
        }
        
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .theory-section {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border-left: 5px solid #2196f3;
        }
        
        .theory-section h2 {
            color: #1976d2;
            margin: 0 0 20px 0;
            font-size: 1.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .interactive-section {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border-left: 5px solid #4caf50;
        }
        
        .interactive-section h2 {
            color: #2e7d32;
            margin: 0 0 20px 0;
            font-size: 1.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .math-content {
            background: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            line-height: 1.6;
        }
        
        .concept-box {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #2196f3;
        }
        
        .concept-box h4 {
            color: #1976d2;
            margin: 0 0 10px 0;
        }
        
        .visualization-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            margin-top: 10px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .control-group {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }
        .control-group h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        .control-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .control-row label {
            min-width: 120px;
            margin-right: 10px;
        }
        input[type="range"] {
            flex: 1;
            margin-right: 10px;
        }
        input[type="number"] {
            width: 80px;
            padding: 5px;
            border: 2px solid #ddd;
            border-radius: 5px;
            background: white;
            color: #2c3e50;
        }
        button {
            background: linear-gradient(45deg, #2196f3, #1976d2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
            transition: all 0.3s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.4);
        }
        .canvas-container {
            text-align: center;
            margin: 20px 0;
        }
        canvas {
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            background: white;
        }
        .info-panel {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .info-panel h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        .formula {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }
        .convexity-test {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: bold;
        }
        .set-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .set-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .set-card.convex {
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }
        .set-card.non-convex {
            background: linear-gradient(45deg, #f44336, #d32f2f);
        }
    </style>





</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>T·∫≠p L·ªìi (Convex Sets)</h1>
            <p>Kh√°m ph√° t∆∞∆°ng t√°c v·ªÅ l√Ω thuy·∫øt v√† t√≠nh ch·∫•t c·ªßa t·∫≠p l·ªìi</p>
        </div>

        <div class="content-wrapper">
            <div class="theory-section">
                <h2>üìñ L√ù THUY·∫æT</h2>
                
                <div class="math-content">
                    <h3>1. ƒê·ªãnh Nghƒ©a T·∫≠p L·ªìi</h3>
                    <p><strong>ƒê·ªãnh nghƒ©a:</strong> T·∫≠p $C \subseteq \mathbb{R}^n$ ƒë∆∞·ª£c g·ªçi l√† <em>l·ªìi</em> n·∫øu:</p>
                    $$\lambda x + (1-\lambda)y \in C$$
                    v·ªõi m·ªçi $x, y \in C$ v√† $\lambda \in [0,1]$.
                    
                    <div class="concept-box">
                        <h4>√ù nghƒ©a h√¨nh h·ªçc:</h4>
                        <ul>
                            <li><strong>ƒêo·∫°n th·∫≥ng:</strong> ƒêo·∫°n th·∫≥ng n·ªëi hai ƒëi·ªÉm b·∫•t k√¨ n·∫±m ho√†n to√†n trong t·∫≠p</li>
                            <li><strong>Kh√¥ng c√≥ "l·ªï h·ªïng":</strong> T·∫≠p l·ªìi kh√¥ng th·ªÉ c√≥ ph·∫ßn l√µm v√†o trong</li>
                            <li><strong>T·ªï h·ª£p l·ªìi:</strong> M·ªçi ƒëi·ªÉm c√≥ th·ªÉ bi·ªÉu di·ªÖn qua t·ªï h·ª£p l·ªìi c·ªßa c√°c ƒëi·ªÉm c·ª±c tr·ªã</li>
                        </ul>
                    </div>
                </div>

                <div class="math-content">
                    <h3>2. V√≠ D·ª• T·∫≠p L·ªìi</h3>
                    
                    <div class="concept-box">
                        <h4>T·∫≠p l·ªìi c∆° b·∫£n:</h4>
                        <ul>
                            <li><strong>H√¨nh c·∫ßu:</strong> $\{x : \|x - x_c\|_2 \leq r\}$</li>
                            <li><strong>Ellipsoid:</strong> $\{x : (x-x_c)^T P^{-1} (x-x_c) \leq 1\}$</li>
                            <li><strong>Polyhedron:</strong> $\{x : Ax \leq b\}$</li>
                            <li><strong>Simplex:</strong> $\{x : x \geq 0, \mathbf{1}^T x = 1\}$</li>
                            <li><strong>H√¨nh n√≥n:</strong> $\{x : Ax = 0, x \geq 0\}$</li>
                        </ul>
                    </div>
                    
                    <div class="concept-box">
                        <h4>T·∫≠p kh√¥ng l·ªìi ph·ªï bi·∫øn:</h4>
                        <ul>
                            <li><strong>H√¨nh b√°n nguy·ªát:</strong> Hai h√¨nh tr√≤n giao nhau</li>
                            <li><strong>H√¨nh sao:</strong> T·∫≠p c√≥ c√°c "nh√°nh" ra ngo√†i</li>
                            <li><strong>H√¨nh xuy·∫øn (torus):</strong> B·ªÅ m·∫∑t kh√¥ng ƒë∆°n li√™n th√¥ng</li>
                            <li><strong>T·∫≠p r·ªùi r·∫°c:</strong> T·∫≠p c√≥ kho·∫£ng c√°ch gi·ªØa c√°c ƒëi·ªÉm</li>
                        </ul>
                    </div>
                </div>

                <div class="math-content">
                    <h3>3. Ph√©p To√°n T·∫≠p L·ªìi</h3>
                    <p><strong>Giao c·ªßa c√°c t·∫≠p l·ªìi:</strong></p>
                    $$\bigcap_{i} C_i \text{ l√† l·ªìi n·∫øu m·ªçi } C_i \text{ l√† l·ªìi}$$
                    
                    <p><strong>T·ªï h·ª£p affine:</strong></p>
                    $$\sum_{i} \alpha_i C_i = \{\sum_{i} \alpha_i x_i : x_i \in C_i\}$$
                    
                    <div class="concept-box">
                        <h4>T√≠nh ch·∫•t b·∫£o to√†n:</h4>
                        <ul>
                            <li><strong>Giao:</strong> Giao c·ªßa t·∫≠p l·ªìi lu√¥n l√† t·∫≠p l·ªìi</li>
                            <li><strong>T·ªïng Minkowski:</strong> $C_1 + C_2 = \{x + y : x \in C_1, y \in C_2\}$</li>
                            <li><strong>Ph√©p chi·∫øu:</strong> Chi·∫øu c·ªßa t·∫≠p l·ªìi l√† t·∫≠p l·ªìi</li>
                            <li><strong>Affine image:</strong> $\{Ax + b : x \in C\}$ l√† l·ªìi</li>
                        </ul>
                    </div>
                </div>

                <div class="math-content">
                    <h3>4. Convex Hull v√† Extreme Points</h3>
                    <p><strong>Convex Hull:</strong> T·∫≠p l·ªìi nh·ªè nh·∫•t ch·ª©a t·∫≠p $S$:</p>
                    $$\text{conv}(S) = \{\sum_{i=1}^k \lambda_i x_i : x_i \in S, \lambda_i \geq 0, \sum \lambda_i = 1\}$$
                    
                    <p><strong>Extreme Points:</strong> ƒêi·ªÉm $x \in C$ l√† extreme point n·∫øu:</p>
                    $$x = \lambda y + (1-\lambda)z, y,z \in C, \lambda \in (0,1) \Rightarrow x = y = z$$
                    
                    <div class="concept-box">
                        <h4>ƒê·ªãnh l√Ω Carath√©odory:</h4>
                        <p>M·ªçi ƒëi·ªÉm trong convex hull c·ªßa t·∫≠p $S \subset \mathbb{R}^n$ c√≥ th·ªÉ bi·ªÉu di·ªÖn b·ªüi t·ªï h·ª£p l·ªìi c·ªßa t·ªëi ƒëa $n+1$ ƒëi·ªÉm.</p>
                    </div>
                    
                    <div class="concept-box">
                        <h4>ƒê·ªãnh l√Ω Krein-Milman:</h4>
                        <p>T·∫≠p l·ªìi compact l√† convex hull c·ªßa c√°c extreme points c·ªßa n√≥.</p>
                    </div>
                </div>

                <div class="math-content">
                    <h3>5. Separating Hyperplanes</h3>
                    <p><strong>ƒê·ªãnh l√Ω t√°ch:</strong> Hai t·∫≠p l·ªìi r·ªùi nhau $C_1, C_2$ lu√¥n t·ªìn t·∫°i si√™u ph·∫≥ng t√°ch:</p>
                    $$a^T x \leq b \text{ v·ªõi } x \in C_1, \quad a^T x \geq b \text{ v·ªõi } x \in C_2$$
                    
                    <div class="concept-box">
                        <h4>·ª®ng d·ª•ng:</h4>
                        <ul>
                            <li><strong>Support Vector Machines:</strong> T√¨m si√™u ph·∫≥ng t·ªëi ∆∞u t√°ch c√°c l·ªõp</li>
                            <li><strong>Linear Programming:</strong> Ki·ªÉm tra t√≠nh kh·∫£ thi v√† t√¨m nghi·ªám</li>
                            <li><strong>Convex Analysis:</strong> Ch·ª©ng minh t√≠nh ch·∫•t c·ªßa h√†m l·ªìi</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="interactive-section">
                <h2>üéÆ MINH H·ªåA T∆Ø∆†NG T√ÅC</h2>
                
                <div class="visualization-container">
                    <p><strong>H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:</strong></p>
                    <ul>
                        <li>üî∑ <strong>Ch·ªçn lo·∫°i t·∫≠p:</strong> Thay ƒë·ªïi gi·ªØa c√°c h√¨nh d·∫°ng kh√°c nhau</li>
                        <li>‚öôÔ∏è <strong>ƒêi·ªÅu ch·ªânh tham s·ªë:</strong> Thay ƒë·ªïi k√≠ch th∆∞·ªõc, v·ªã tr√≠, h√¨nh d·∫°ng</li>
                        <li>üîç <strong>Ki·ªÉm tra t√≠nh l·ªìi:</strong> Quan s√°t ƒëo·∫°n th·∫≥ng n·ªëi hai ƒëi·ªÉm</li>
                        <li>üéØ <strong>Th√≠ch nghi·ªám:</strong> Click ƒë·ªÉ ch·ªçn hai ƒëi·ªÉm v√† xem ƒëo·∫°n n·ªëi</li>
                    </ul>
                    
                    <div class="container">
                        <h1>üî∑ Minh h·ªça T·∫≠p L·ªìi</h1>
        
        <div class="controls">
            <div class="control-group">
                <h3>üéØ Lo·∫°i t·∫≠p h·ª£p</h3>
                <div class="control-row">
                    <button onclick="setType('circle')">‚≠ï H√¨nh tr√≤n</button>
                    <button onclick="setType('rectangle')">‚¨ú H√¨nh ch·ªØ nh·∫≠t</button>
                </div>
                <div class="control-row">
                    <button onclick="setType('polygon')">üî∑ ƒêa gi√°c</button>
                    <button onclick="setType('halfspace')">üìê N·ª≠a m·∫∑t ph·∫≥ng</button>
                </div>
                <div class="formula">
                    <strong>ƒê·ªãnh nghƒ©a: </strong> T·∫≠p C l√† l·ªìi n·∫øu ‚àÄx,y ‚àà C v√† Œ∏ ‚àà [0,1], ta c√≥ Œ∏x + (1-Œ∏)y ‚àà C
                </div>
            </div>
            
            <div class="control-group">
                <h3>üìè Tham s·ªë h√¨nh d·∫°ng</h3>
                <div class="control-row">
                    <label>B√°n k√≠nh:</label>
                    <input type="range" id="radius" min="20" max="150" value="80" step="5">
                    <input type="number" id="radiusValue" value="80" min="20" max="150">
                </div>
                <div class="control-row">
                    <label>Chi·ªÅu r·ªông:</label>
                    <input type="range" id="width" min="50" max="200" value="120" step="10">
                    <input type="number" id="widthValue" value="120" min="50" max="200">
                </div>
                <div class="control-row">
                    <label>Chi·ªÅu cao:</label>
                    <input type="range" id="height" min="50" max="200" value="100" step="10">
                    <input type="number" id="heightValue" value="100" min="50" max="200">
                </div>
            </div>
            
            <div class="control-group">
                <h3>üé≤ ƒêi·ªÉm th·ª≠ nghi·ªám</h3>
                <div class="control-row">
                    <label>ƒêi·ªÉm A (x):</label>
                    <input type="range" id="pointAx" min="-200" max="200" value="-50" step="5">
                    <input type="number" id="pointAxValue" value="-50" min="-200" max="200">
                </div>
                <div class="control-row">
                    <label>ƒêi·ªÉm A (y):</label>
                    <input type="range" id="pointAy" min="-200" max="200" value="-30" step="5">
                    <input type="number" id="pointAyValue" value="-30" min="-200" max="200">
                </div>
                <div class="control-row">
                    <label>ƒêi·ªÉm B (x):</label>
                    <input type="range" id="pointBx" min="-200" max="200" value="50" step="5">
                    <input type="number" id="pointBxValue" value="50" min="-200" max="200">
                </div>
                <div class="control-row">
                    <label>ƒêi·ªÉm B (y):</label>
                    <input type="range" id="pointBy" min="-200" max="200" value="40" step="5">
                    <input type="number" id="pointByValue" value="40" min="-200" max="200">
                </div>
                <div class="control-row">
                    <label>Œ∏ (0-1):</label>
                    <input type="range" id="theta" min="0" max="1" value="0.5" step="0.05">
                    <input type="number" id="thetaValue" value="0.5" min="0" max="1" step="0.05">
                </div>
            </div>
        </div>
        
        <div class="canvas-container">
            <canvas id="convexCanvas" width="800" height="600"></canvas>
        </div>
        
        <div class="info-panel">
            <h3>üìä K·∫øt qu·∫£ ph√¢n t√≠ch</h3>
            <div id="convexityResult" class="convexity-test">
                <strong>K·∫øt qu·∫£ ki·ªÉm tra t√≠nh l·ªìi:</strong> <span id="convexityStatus">ƒêang t√≠nh...</span>
            </div>
            
            <h4>üîç Th√¥ng tin ƒëi·ªÉm:</h4>
            <div class="set-info" id="pointInfo">
                <!-- Point information will be displayed here -->
            </div>
            
            <h4>üìê C√¥ng th·ª©c t√≠nh:</h4>
            <div id="formulaInfo">
                <p><strong>ƒêi·ªÉm A:</strong> <span id="pointAFormula">(-50, -30)</span></p>
                <p><strong>ƒêi·ªÉm B:</strong> <span id="pointBFormula">(50, 40)</span></p>
                <p><strong>ƒêi·ªÉm trung gian:</strong> <span id="intermediateFormula">Œ∏A + (1-Œ∏)B</span></p>
                <p><strong>K·∫øt qu·∫£:</strong> <span id="resultFormula">ƒêang t√≠nh...</span></p>
            </div>
        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Canvas setup
        const canvas = document.getElementById('convexCanvas');
        const ctx = canvas.getContext('2d');
        
        // Set parameters
        let currentSetType = 'circle';
        let radius = 80;
        let width = 120;
        let height = 100;
        let pointA = {x: -50, y: -30};
        let pointB = {x: 50, y: 40};
        let theta = 0.5;
        
        // Update parameters
        function updateParameters() {
            radius = parseFloat(document.getElementById('radiusValue').value);
            width = parseFloat(document.getElementById('widthValue').value);
            height = parseFloat(document.getElementById('heightValue').value);
            pointA.x = parseFloat(document.getElementById('pointAxValue').value);
            pointA.y = parseFloat(document.getElementById('pointAyValue').value);
            pointB.x = parseFloat(document.getElementById('pointBxValue').value);
            pointB.y = parseFloat(document.getElementById('pointByValue').value);
            theta = parseFloat(document.getElementById('thetaValue').value);
            
            drawConvexSet();
            updatePointInfo();
        }
        
        // Set set type
        function setType(type) {
            currentSetType = type;
            drawConvexSet();
            updatePointInfo();
        }
        
        // Check if point is inside set
        function isPointInSet(x, y) {
            const centerX = 0;
            const centerY = 0;
            
            switch(currentSetType) {
                case 'circle':
                    const distance = Math.sqrt((x - centerX) ** 2 + (y - centerY) ** 2);
                    return distance <= radius;
                case 'rectangle':
                    return Math.abs(x) <= width/2 && Math.abs(y) <= height/2;
                case 'polygon':
                    // Simple hexagon
                    const angle = Math.atan2(y, x);
                    const distanceFromCenter = Math.sqrt(x**2 + y**2);
                    const maxRadius = radius * (1 + 0.3 * Math.cos(6 * angle));
                    return distanceFromCenter <= maxRadius;
                case 'halfspace':
                    return x + y <= radius;
                default:
                    return false;
            }
        }
        
        // Calculate intermediate point
        function calculateIntermediatePoint() {
            return {
                x: theta * pointA.x + (1 - theta) * pointB.x,
                y: theta * pointA.y + (1 - theta) * pointB.y
            };
        }
        
        // Check convexity
        function checkConvexity() {
            const intermediate = calculateIntermediatePoint();
            const pointAInSet = isPointInSet(pointA.x, pointA.y);
            const pointBInSet = isPointInSet(pointB.x, pointB.y);
            const intermediateInSet = isPointInSet(intermediate.x, intermediate.y);
            
            return {
                pointAInSet,
                pointBInSet,
                intermediateInSet,
                isConvex: pointAInSet && pointBInSet && intermediateInSet
            };
        }
        
        // Draw the convex set
        function drawConvexSet() {
            // Clear canvas
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Set up coordinate system
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const scale = 2;
            
            // Transform function
            function transform(x, y) {
                return {
                    x: centerX + x * scale,
                    y: centerY - y * scale
                };
            }
            
            // Draw grid
            ctx.strokeStyle = '#f0f0f0';
            ctx.lineWidth = 1;
            for (let i = -200; i <= 200; i += 20) {
                const pos = transform(i, 0);
                ctx.beginPath();
                ctx.moveTo(pos.x, 0);
                ctx.lineTo(pos.x, canvas.height);
                ctx.stroke();
            }
            for (let i = -200; i <= 200; i += 20) {
                const pos = transform(0, i);
                ctx.beginPath();
                ctx.moveTo(0, pos.y);
                ctx.lineTo(canvas.width, pos.y);
                ctx.stroke();
            }
            
            // Draw axes
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            const origin = transform(0, 0);
            ctx.beginPath();
            ctx.moveTo(origin.x, 0);
            ctx.lineTo(origin.x, canvas.height);
            ctx.moveTo(0, origin.y);
            ctx.lineTo(canvas.width, origin.y);
            ctx.stroke();
            
            // Draw axis labels
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('x', canvas.width / 2, canvas.height - 10);
            ctx.save();
            ctx.translate(20, canvas.height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('y', 0, 0);
            ctx.restore();
            
            // Draw the set
            ctx.fillStyle = 'rgba(255, 107, 107, 0.3)';
            ctx.strokeStyle = '#ff6b6b';
            ctx.lineWidth = 3;
            
            switch(currentSetType) {
                case 'circle':
                    const circlePos = transform(0, 0);
                    ctx.beginPath();
                    ctx.arc(circlePos.x, circlePos.y, radius * scale, 0, 2 * Math.PI);
                    ctx.fill();
                    ctx.stroke();
                    break;
                    
                case 'rectangle':
                    const rectPos = transform(-width/2, height/2);
                    ctx.fillRect(rectPos.x, rectPos.y, width * scale, height * scale);
                    ctx.strokeRect(rectPos.x, rectPos.y, width * scale, height * scale);
                    break;
                    
                case 'polygon':
                    ctx.beginPath();
                    for (let i = 0; i < 6; i++) {
                        const angle = (i * Math.PI) / 3;
                        const x = radius * Math.cos(angle);
                        const y = radius * Math.sin(angle);
                        const pos = transform(x, y);
                        if (i === 0) {
                            ctx.moveTo(pos.x, pos.y);
                        } else {
                            ctx.lineTo(pos.x, pos.y);
                        }
                    }
                    ctx.closePath();
                    ctx.fill();
                    ctx.stroke();
                    break;
                    
                case 'halfspace':
                    const halfspacePoints = [
                        transform(-200, radius + 200),
                        transform(200, radius + 200),
                        transform(200, -200),
                        transform(-200, -200)
                    ];
                    ctx.beginPath();
                    ctx.moveTo(halfspacePoints[0].x, halfspacePoints[0].y);
                    for (let i = 1; i < halfspacePoints.length; i++) {
                        ctx.lineTo(halfspacePoints[i].x, halfspacePoints[i].y);
                    }
                    ctx.closePath();
                    ctx.fill();
                    ctx.stroke();
                    break;
            }
            
            // Draw test points
            const pointAPos = transform(pointA.x, pointA.y);
            const pointBPos = transform(pointB.x, pointB.y);
            const intermediate = calculateIntermediatePoint();
            const intermediatePos = transform(intermediate.x, intermediate.y);
            
            // Draw line segment between A and B
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(pointAPos.x, pointAPos.y);
            ctx.lineTo(pointBPos.x, pointBPos.y);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Draw points
            const convexity = checkConvexity();
            
            // Point A
            ctx.fillStyle = convexity.pointAInSet ? '#4CAF50' : '#f44336';
            ctx.beginPath();
            ctx.arc(pointAPos.x, pointAPos.y, 8, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('A', pointAPos.x + 10, pointAPos.y - 10);
            
            // Point B
            ctx.fillStyle = convexity.pointBInSet ? '#4CAF50' : '#f44336';
            ctx.beginPath();
            ctx.arc(pointBPos.x, pointBPos.y, 8, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('B', pointBPos.x + 10, pointBPos.y - 10);
            
            // Intermediate point
            ctx.fillStyle = convexity.intermediateInSet ? '#4CAF50' : '#f44336';
            ctx.beginPath();
            ctx.arc(intermediatePos.x, intermediatePos.y, 6, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'left';
            ctx.fillText(`Œ∏=${theta.toFixed(2)}`, intermediatePos.x + 10, intermediatePos.y - 10);
            
            // Update convexity result
            const status = convexity.isConvex ? '‚úÖ T·∫¨P L·ªíI' : '‚ùå KH√îNG L·ªíI';
            document.getElementById('convexityStatus').textContent = status;
            document.getElementById('convexityResult').className = 
                convexity.isConvex ? 'convexity-test' : 'convexity-test non-convex';
        }
        
        // Update point information
        function updatePointInfo() {
            const intermediate = calculateIntermediatePoint();
            const convexity = checkConvexity();
            
            document.getElementById('pointAFormula').textContent = `(${pointA.x}, ${pointA.y})`;
            document.getElementById('pointBFormula').textContent = `(${pointB.x}, ${pointB.y})`;
            document.getElementById('intermediateFormula').textContent = 
                `Œ∏A + (1-Œ∏)B = ${theta.toFixed(2)}√ó(${pointA.x}, ${pointA.y}) + ${(1-theta).toFixed(2)}√ó(${pointB.x}, ${pointB.y})`;
            document.getElementById('resultFormula').textContent = 
                `= (${intermediate.x.toFixed(1)}, ${intermediate.y.toFixed(1)})`;
            
            const container = document.getElementById('pointInfo');
            container.innerHTML = `
                <div class="set-card ${convexity.pointAInSet ? 'convex' : 'non-convex'}">
                    <strong>ƒêi·ªÉm A</strong><br>
                    (${pointA.x}, ${pointA.y})<br>
                    ${convexity.pointAInSet ? '‚úÖ Trong t·∫≠p' : '‚ùå Ngo√†i t·∫≠p'}
                </div>
                <div class="set-card ${convexity.pointBInSet ? 'convex' : 'non-convex'}">
                    <strong>ƒêi·ªÉm B</strong><br>
                    (${pointB.x}, ${pointB.y})<br>
                    ${convexity.pointBInSet ? '‚úÖ Trong t·∫≠p' : '‚ùå Ngo√†i t·∫≠p'}
                </div>
                <div class="set-card ${convexity.intermediateInSet ? 'convex' : 'non-convex'}">
                    <strong>ƒêi·ªÉm trung gian</strong><br>
                    (${intermediate.x.toFixed(1)}, ${intermediate.y.toFixed(1)})<br>
                    ${convexity.intermediateInSet ? '‚úÖ Trong t·∫≠p' : '‚ùå Ngo√†i t·∫≠p'}
                </div>
                <div class="set-card ${convexity.isConvex ? 'convex' : 'non-convex'}">
                    <strong>K·∫øt lu·∫≠n</strong><br>
                    ${convexity.isConvex ? '‚úÖ T·∫¨P L·ªíI' : '‚ùå KH√îNG L·ªíI'}<br>
                    Œ∏ = ${theta.toFixed(2)}
                </div>
            `;
        }
        
        // Event listeners
        document.getElementById('radius').addEventListener('input', function() {
            document.getElementById('radiusValue').value = this.value;
            updateParameters();
        });
        
        document.getElementById('radiusValue').addEventListener('input', function() {
            document.getElementById('radius').value = this.value;
            updateParameters();
        });
        
        document.getElementById('width').addEventListener('input', function() {
            document.getElementById('widthValue').value = this.value;
            updateParameters();
        });
        
        document.getElementById('widthValue').addEventListener('input', function() {
            document.getElementById('width').value = this.value;
            updateParameters();
        });
        
        document.getElementById('height').addEventListener('input', function() {
            document.getElementById('heightValue').value = this.value;
            updateParameters();
        });
        
        document.getElementById('heightValue').addEventListener('input', function() {
            document.getElementById('height').value = this.value;
            updateParameters();
        });
        
        document.getElementById('pointAx').addEventListener('input', function() {
            document.getElementById('pointAxValue').value = this.value;
            updateParameters();
        });
        
        document.getElementById('pointAxValue').addEventListener('input', function() {
            document.getElementById('pointAx').value = this.value;
            updateParameters();
        });
        
        document.getElementById('pointAy').addEventListener('input', function() {
            document.getElementById('pointAyValue').value = this.value;
            updateParameters();
        });
        
        document.getElementById('pointAyValue').addEventListener('input', function() {
            document.getElementById('pointAy').value = this.value;
            updateParameters();
        });
        
        document.getElementById('pointBx').addEventListener('input', function() {
            document.getElementById('pointBxValue').value = this.value;
            updateParameters();
        });
        
        document.getElementById('pointBxValue').addEventListener('input', function() {
            document.getElementById('pointBx').value = this.value;
            updateParameters();
        });
        
        document.getElementById('pointBy').addEventListener('input', function() {
            document.getElementById('pointByValue').value = this.value;
            updateParameters();
        });
        
        document.getElementById('pointByValue').addEventListener('input', function() {
            document.getElementById('pointBy').value = this.value;
            updateParameters();
        });
        
        document.getElementById('theta').addEventListener('input', function() {
            document.getElementById('thetaValue').value = this.value;
            updateParameters();
        });
        
        document.getElementById('thetaValue').addEventListener('input', function() {
            document.getElementById('theta').value = this.value;
            updateParameters();
        });
        
        // Initialize
        updateParameters();
    </script>
</body>
</html> 
