<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drunken Bishop Algorithm - Interactive Visualization</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                packages: {'[+]': ['ams', 'newcommand', 'mathtools', 'bm']},
                macros: {
                    O: ['\\mathcal{O}'],
                    Theta: ['\\Theta'],
                    Omega: ['\\Omega']
                }
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    <script src="../math-simple.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3a 50%, #2d1b69 100%);
            color: white;
            line-height: 1.8;
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 40px;
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            font-size: 3.2em;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #9b59b6, #3498db);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .lesson-nav {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 10px;
            flex-wrap: wrap;
        }

        .nav-button {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 5px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .nav-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-button.active {
            background: linear-gradient(45deg, #9b59b6, #3498db);
            box-shadow: 0 4px 15px rgba(155, 89, 182, 0.3);
        }

        .lesson-section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .lesson-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
            align-items: start;
        }

        .theory-panel, .demo-panel {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 12px;
            backdrop-filter: blur(5px);
        }

        .demo-panel {
            text-align: center;
        }

        .bishop-grid {
            width: 100%;
            max-width: 400px;
            margin: 20px auto;
            border: 2px solid #3498db;
            border-radius: 8px;
            background: #1a1a1a;
            padding: 10px;
        }

        .grid-row {
            display: flex;
            justify-content: center;
        }

        .grid-cell {
            width: 25px;
            height: 25px;
            border: 1px solid #444;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
        }

        .grid-cell.current {
            background: #e74c3c;
            color: white;
            animation: pulse 1s infinite;
        }

        .grid-cell.start {
            background: #2ecc71;
            color: white;
        }

        .grid-cell.end {
            background: #f39c12;
            color: white;
        }

        .grid-cell.visited {
            background: #3498db;
            color: white;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .controls {
            margin: 20px 0;
            text-align: center;
        }

        .control-group {
            margin: 15px 0;
        }

        .input-field {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #3498db;
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            margin: 0 5px;
            width: 200px;
        }

        .btn {
            background: linear-gradient(45deg, #3498db, #2ecc71);
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .btn:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            transform: none;
        }

        .progress-info {
            background: rgba(52, 152, 219, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }

        .algorithm-steps {
            background: rgba(155, 89, 182, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .step {
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .step.active {
            background: rgba(231, 76, 60, 0.2);
            border-left: 4px solid #e74c3c;
        }

        .complexity-analysis {
            background: rgba(46, 204, 113, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #2ecc71;
        }

        .example-section {
            background: rgba(241, 196, 15, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #f1c40f;
        }

        .math-formula {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
        }

        .fingerprint-visual {
            background: #000;
            border: 1px solid #3498db;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 10px;
            line-height: 1.2;
        }

        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.5em;
            }
            
            .nav-button {
                padding: 8px 16px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üç∫ Drunken Bishop Algorithm</h1>
        
        <div class="lesson-nav">
            <button class="nav-button active" onclick="showSection('introduction')">Gi·ªõi thi·ªáu</button>
            <button class="nav-button" onclick="showSection('theory')">L√Ω thuy·∫øt</button>
            <button class="nav-button" onclick="showSection('visualization')">Tr·ª±c quan h√≥a</button>
            <button class="nav-button" onclick="showSection('implementation')">C√†i ƒë·∫∑t</button>
            <button class="nav-button" onclick="showSection('applications')">·ª®ng d·ª•ng</button>
            <button class="nav-button" onclick="showSection('examples')">V√≠ d·ª•</button>
        </div>

        <!-- Introduction Section -->
        <div id="introduction" class="lesson-section active">
            <h2>üîç Drunken Bishop Algorithm l√† g√¨?</h2>
            
            <div class="content-grid">
                <div class="theory-panel">
                    <h3>üìñ Kh√°i ni·ªám c∆° b·∫£n</h3>
                    <p><strong>Drunken Bishop Algorithm</strong> l√† m·ªôt thu·∫≠t to√°n ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t·∫°o ra <em>ASCII art fingerprint</em> t·ª´ d·ªØ li·ªáu hash, gi√∫p con ng∆∞·ªùi d·ªÖ d√†ng nh·∫≠n di·ªán v√† so s√°nh c√°c fingerprint.</p>
                    
                    <h4>üéØ M·ª•c ƒë√≠ch ch√≠nh:</h4>
                    <ul>
                        <li><strong>Visualization:</strong> Chuy·ªÉn ƒë·ªïi hash th√†nh h√¨nh ·∫£nh ASCII d·ªÖ nh·∫≠n di·ªán</li>
                        <li><strong>Security:</strong> Gi√∫p ph√°t hi·ªán man-in-the-middle attacks</li>
                        <li><strong>User Experience:</strong> T·∫°o fingerprint d·ªÖ nh·ªõ h∆°n so v·ªõi hex strings</li>
                        <li><strong>Quick Comparison:</strong> So s√°nh nhanh c√°c SSH keys ho·∫∑c certificates</li>
                    </ul>

                    <h4>üî¨ Ngu·ªìn g·ªëc:</h4>
                    <p>Thu·∫≠t to√°n n√†y ƒë∆∞·ª£c gi·ªõi thi·ªáu trong OpenSSH v√† l·∫•y c·∫£m h·ª©ng t·ª´ "random walk" - gi·ªëng nh∆∞ m·ªôt ng∆∞·ªùi say r∆∞·ª£u ƒëi b·ªô ng·∫´u nhi√™n tr√™n m·ªôt l∆∞·ªõi √¥ vu√¥ng.</p>
                </div>

                <div class="demo-panel">
                    <h3>üé® V√≠ d·ª• Fingerprint</h3>
                    <div class="fingerprint-visual">
+--[RSA 2048]----+<br>
|        .        |<br>
|         o       |<br>
|        . +      |<br>
|       . = o     |<br>
|        S = .    |<br>
|         = + .   |<br>
|        . O +    |<br>
|         + B o   |<br>
|          =+E.   |<br>
+-----------------+
                    </div>
                    
                    <p><strong>Gi·∫£i th√≠ch:</strong></p>
                    <ul style="text-align: left;">
                        <li><code>S</code>: ƒêi·ªÉm b·∫Øt ƒë·∫ßu (Start)</li>
                        <li><code>E</code>: ƒêi·ªÉm k·∫øt th√∫c (End)</li>
                        <li><code>. o + = * B O X #</code>: M·ª©c ƒë·ªô gh√© thƒÉm (0-8+)</li>
                        <li>C√†ng nhi·ªÅu k√Ω t·ª± ƒë·∫∑c bi·ªát = c√†ng ƒë∆∞·ª£c gh√© thƒÉm nhi·ªÅu</li>
                    </ul>
                </div>
            </div>

            <div class="algorithm-steps">
                <h3>‚öôÔ∏è C√°c b∆∞·ªõc c∆° b·∫£n c·ªßa thu·∫≠t to√°n:</h3>
                <div class="step">
                    <strong>B∆∞·ªõc 1:</strong> Kh·ªüi t·∫°o l∆∞·ªõi 17√ó9 v·ªõi t·∫•t c·∫£ gi√° tr·ªã = 0
                </div>
                <div class="step">
                    <strong>B∆∞·ªõc 2:</strong> B·∫Øt ƒë·∫ßu t·ª´ v·ªã tr√≠ trung t√¢m (8, 4)
                </div>
                <div class="step">
                    <strong>B∆∞·ªõc 3:</strong> ƒê·ªçc t·ª´ng byte c·ªßa hash, m·ªói byte cho 4 b∆∞·ªõc di chuy·ªÉn
                </div>
                <div class="step">
                    <strong>B∆∞·ªõc 4:</strong> Di chuy·ªÉn theo 2 bit: 00=‚Üñ, 01=‚Üó, 10=‚Üô, 11=‚Üò
                </div>
                <div class="step">
                    <strong>B∆∞·ªõc 5:</strong> TƒÉng gi√° tr·ªã √¥ hi·ªán t·∫°i l√™n 1 (max = 15)
                </div>
                <div class="step">
                    <strong>B∆∞·ªõc 6:</strong> Chuy·ªÉn ƒë·ªïi gi√° tr·ªã th√†nh k√Ω t·ª± ASCII
                </div>
            </div>
        </div>

        <!-- Theory Section -->
        <div id="theory" class="lesson-section">
            <h2>üìê L√Ω thuy·∫øt to√°n h·ªçc</h2>

            <div class="content-grid">
                <div class="theory-panel">
                    <h3>üßÆ Random Walk Theory</h3>
                    <p>Drunken Bishop d·ª±a tr√™n <strong>Random Walk</strong> - m·ªôt qu√° tr√¨nh ng·∫´u nhi√™n m√¥ t·∫£ ƒë∆∞·ªùng ƒëi c·ªßa m·ªôt ƒë·ªëi t∆∞·ª£ng di chuy·ªÉn ng·∫´u nhi√™n.</p>

                    <div class="math-formula">
                        $$P(X_{n+1} = j | X_n = i) = p_{ij}$$
                        <p>X√°c su·∫•t chuy·ªÉn t·ª´ tr·∫°ng th√°i $i$ sang $j$</p>
                    </div>

                    <h4>üéØ Trong Drunken Bishop:</h4>
                    <ul>
                        <li><strong>State Space:</strong> L∆∞·ªõi 17√ó9 = 153 v·ªã tr√≠</li>
                        <li><strong>Transition:</strong> 4 h∆∞·ªõng di chuy·ªÉn c√≥ th·ªÉ</li>
                        <li><strong>Probability:</strong> Ph·ª• thu·ªôc v√†o 2 bit c·ªßa hash</li>
                        <li><strong>Boundary:</strong> Kh√¥ng th·ªÉ di chuy·ªÉn ra ngo√†i l∆∞·ªõi</li>
                    </ul>

                    <h4>üî¢ Bit Encoding:</h4>
                    <div class="math-formula">
                        $$\begin{align}
                        00_2 &\rightarrow \text{‚Üñ (Northwest)} \\
                        01_2 &\rightarrow \text{‚Üó (Northeast)} \\
                        10_2 &\rightarrow \text{‚Üô (Southwest)} \\
                        11_2 &\rightarrow \text{‚Üò (Southeast)}
                        \end{align}$$
                    </div>
                </div>

                <div class="demo-panel">
                    <h3>üìä Ph√¢n b·ªë x√°c su·∫•t</h3>
                    <p>Do t√≠nh ch·∫•t random walk, c√°c √¥ ·ªü trung t√¢m c√≥ xu h∆∞·ªõng ƒë∆∞·ª£c gh√© thƒÉm nhi·ªÅu h∆°n:</p>
                    
                    <div class="math-formula">
                        $$\text{Visit Count}(x,y) \sim \text{Distance from center}^{-1}$$
                    </div>

                    <h4>üé® Character Mapping:</h4>
                    <table style="margin: 10px auto; border-collapse: collapse;">
                        <tr style="border: 1px solid #3498db;">
                            <td style="padding: 5px; border: 1px solid #3498db;"><strong>Visits</strong></td>
                            <td style="padding: 5px; border: 1px solid #3498db;"><strong>Character</strong></td>
                        </tr>
                        <tr><td style="padding: 5px; border: 1px solid #3498db;">0</td><td style="padding: 5px; border: 1px solid #3498db;">space</td></tr>
                        <tr><td style="padding: 5px; border: 1px solid #3498db;">1</td><td style="padding: 5px; border: 1px solid #3498db;">.</td></tr>
                        <tr><td style="padding: 5px; border: 1px solid #3498db;">2</td><td style="padding: 5px; border: 1px solid #3498db;">o</td></tr>
                        <tr><td style="padding: 5px; border: 1px solid #3498db;">3</td><td style="padding: 5px; border: 1px solid #3498db;">+</td></tr>
                        <tr><td style="padding: 5px; border: 1px solid #3498db;">4</td><td style="padding: 5px; border: 1px solid #3498db;">=</td></tr>
                        <tr><td style="padding: 5px; border: 1px solid #3498db;">5+</td><td style="padding: 5px; border: 1px solid #3498db;">*, B, O, X, #</td></tr>
                    </table>
                </div>
            </div>

            <div class="complexity-analysis">
                <h3>‚ö° Complexity Analysis</h3>
                <div class="math-formula">
                    <p><strong>Time Complexity:</strong> $\O(n)$ where $n$ is hash length in bytes</p>
                    <p><strong>Space Complexity:</strong> $\O(1)$ - Fixed 17√ó9 grid</p>
                    <p><strong>Hash Processing:</strong> $\O(4n)$ steps for $n$ bytes</p>
                </div>

                <h4>üìà Performance Characteristics:</h4>
                <ul>
                    <li><strong>Deterministic:</strong> C√πng input lu√¥n cho c√πng output</li>
                    <li><strong>Fast:</strong> Ch·ªâ c·∫ßn m·ªôt l·∫ßn duy·ªát qua hash</li>
                    <li><strong>Memory Efficient:</strong> Grid nh·ªè c·ªë ƒë·ªãnh</li>
                    <li><strong>Collision Resistant:</strong> Kh√°c bi·ªát nh·ªè trong hash ‚Üí kh√°c bi·ªát l·ªõn trong pattern</li>
                </ul>
            </div>
        </div>

        <!-- Visualization Section -->
        <div id="visualization" class="lesson-section">
            <h2>üéÆ Tr·ª±c quan h√≥a thu·∫≠t to√°n</h2>

            <div class="content-grid">
                <div class="theory-panel">
                    <div class="controls">
                        <div class="control-group">
                            <label>Input Hash (hex):</label><br>
                            <input type="text" id="hashInput" class="input-field" 
                                   value="9d5b8b89a5c64b1a2f3e8c7d" placeholder="Enter hex hash">
                        </div>
                        
                        <div class="control-group">
                            <button class="btn" onclick="startVisualization()">üé¨ B·∫Øt ƒë·∫ßu</button>
                            <button class="btn" onclick="stepForward()" id="stepBtn" disabled>‚û°Ô∏è B∆∞·ªõc ti·∫øp</button>
                            <button class="btn" onclick="resetVisualization()">üîÑ Reset</button>
                        </div>

                        <div class="control-group">
                            <label>T·ªëc ƒë·ªô:</label>
                            <input type="range" id="speedSlider" min="50" max="1000" value="500" style="width: 150px;">
                            <span id="speedValue">500ms</span>
                        </div>
                    </div>

                    <div class="progress-info">
                        <div><strong>Byte hi·ªán t·∫°i:</strong> <span id="currentByte">-</span></div>
                        <div><strong>Bit pattern:</strong> <span id="currentBits">-</span></div>
                        <div><strong>V·ªã tr√≠:</strong> <span id="currentPos">-</span></div>
                        <div><strong>B∆∞·ªõc:</strong> <span id="stepCount">0</span></div>
                    </div>
                </div>

                <div class="demo-panel">
                    <h3>üó∫Ô∏è Drunken Bishop Grid</h3>
                    <div id="bishopGrid" class="bishop-grid">
                        <!-- Grid will be generated by JavaScript -->
                    </div>
                    
                    <div class="progress-info">
                        <h4>üéØ Legend:</h4>
                        <div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
                            <span><div style="display: inline-block; width: 15px; height: 15px; background: #2ecc71; margin-right: 5px;"></div>Start (S)</span>
                            <span><div style="display: inline-block; width: 15px; height: 15px; background: #f39c12; margin-right: 5px;"></div>End (E)</span>
                            <span><div style="display: inline-block; width: 15px; height: 15px; background: #e74c3c; margin-right: 5px;"></div>Current</span>
                            <span><div style="display: inline-block; width: 15px; height: 15px; background: #3498db; margin-right: 5px;"></div>Visited</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="algorithm-steps">
                <h3>üìã Algorithm Steps:</h3>
                <div id="step1" class="step">1. Initialize 17√ó9 grid with zeros</div>
                <div id="step2" class="step">2. Start at center position (8, 4)</div>
                <div id="step3" class="step">3. Read next byte from hash</div>
                <div id="step4" class="step">4. Extract 2-bit pairs for movement direction</div>
                <div id="step5" class="step">5. Move bishop according to bit pattern</div>
                <div id="step6" class="step">6. Increment visit count at current position</div>
                <div id="step7" class="step">7. Repeat until all hash bytes processed</div>
                <div id="step8" class="step">8. Convert visit counts to ASCII characters</div>
            </div>
        </div>

        <!-- Implementation Section -->
        <div id="implementation" class="lesson-section">
            <h2>üíª C√†i ƒë·∫∑t thu·∫≠t to√°n</h2>

            <div class="content-grid">
                <div class="theory-panel">
                    <h3>üîß JavaScript Implementation</h3>
                    <pre style="background: #1a1a1a; padding: 15px; border-radius: 8px; overflow-x: auto;"><code>
class DrunkenBishop {
    constructor() {
        this.GRID_WIDTH = 17;
        this.GRID_HEIGHT = 9;
        this.grid = Array(this.GRID_HEIGHT).fill()
            .map(() => Array(this.GRID_WIDTH).fill(0));
        this.x = Math.floor(this.GRID_WIDTH / 2);  // Start at center
        this.y = Math.floor(this.GRID_HEIGHT / 2);
        this.startX = this.x;
        this.startY = this.y;
    }

    // Move direction based on 2-bit pattern
    move(bits) {
        const dx = (bits & 1) ? 1 : -1;  // Right if bit 0 set
        const dy = (bits & 2) ? 1 : -1;  // Down if bit 1 set
        
        // Boundary checking
        this.x = Math.max(0, Math.min(this.GRID_WIDTH - 1, this.x + dx));
        this.y = Math.max(0, Math.min(this.GRID_HEIGHT - 1, this.y + dy));
        
        // Increment visit count (max 15)
        this.grid[this.y][this.x] = Math.min(15, this.grid[this.y][this.x] + 1);
    }

    // Process hash string
    processHash(hashHex) {
        const bytes = this.hexToBytes(hashHex);
        
        for (let byte of bytes) {
            // Each byte gives us 4 moves (2 bits each)
            for (let i = 0; i < 4; i++) {
                const bits = (byte >> (i * 2)) & 3;
                this.move(bits);
            }
        }
    }

    // Convert to ASCII art
    toASCII() {
        const chars = " .o+=*BOX@%&#/^SE";
        let result = "+--[HASH]----+\n";
        
        for (let y = 0; y < this.GRID_HEIGHT; y++) {
            result += "|";
            for (let x = 0; x < this.GRID_WIDTH; x++) {
                if (x === this.startX && y === this.startY) {
                    result += "S";  // Start position
                } else if (x === this.x && y === this.y) {
                    result += "E";  // End position
                } else {
                    result += chars[Math.min(this.grid[y][x], chars.length - 1)];
                }
            }
            result += "|\n";
        }
        result += "+-----------------+";
        return result;
    }

    hexToBytes(hex) {
        const bytes = [];
        for (let i = 0; i < hex.length; i += 2) {
            bytes.push(parseInt(hex.substr(i, 2), 16));
        }
        return bytes;
    }
}

// Usage example
const bishop = new DrunkenBishop();
bishop.processHash("9d5b8b89a5c64b1a2f3e8c7d");
console.log(bishop.toASCII());
                    </code></pre>
                </div>

                <div class="demo-panel">
                    <h3>üß™ Test Implementation</h3>
                    <div class="control-group">
                        <label>Test Hash:</label><br>
                        <input type="text" id="testHash" class="input-field" 
                               value="a1b2c3d4e5f6" placeholder="Enter test hash">
                        <br>
                        <button class="btn" onclick="testImplementation()">üß™ Test</button>
                    </div>

                    <div id="testResult" style="margin-top: 15px; background: #1a1a1a; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; white-space: pre-wrap;"></div>

                    <h4>üìä Implementation Notes:</h4>
                    <ul style="text-align: left; font-size: 14px;">
                        <li><strong>Bit Extraction:</strong> <code>(byte >> (i*2)) & 3</code></li>
                        <li><strong>Boundary Check:</strong> <code>Math.max(0, Math.min(max, pos))</code></li>
                        <li><strong>Visit Counter:</strong> Capped at 15 to prevent overflow</li>
                        <li><strong>Character Mapping:</strong> Array lookup for ASCII chars</li>
                    </ul>
                </div>
            </div>

            <div class="example-section">
                <h3>üîç Code Walkthrough</h3>
                <h4>1. Grid Initialization:</h4>
                <p>T·∫°o l∆∞·ªõi 17√ó9 v·ªõi t·∫•t c·∫£ gi√° tr·ªã ban ƒë·∫ßu = 0. K√≠ch th∆∞·ªõc n√†y ƒë∆∞·ª£c ch·ªçn ƒë·ªÉ t·∫°o ra ASCII art c√≥ t·ª∑ l·ªá h·ª£p l√Ω.</p>

                <h4>2. Movement Logic:</h4>
                <div class="math-formula">
                    $$\text{direction} = \begin{cases}
                    \text{‚Üñ} & \text{if bits = 00} \\
                    \text{‚Üó} & \text{if bits = 01} \\
                    \text{‚Üô} & \text{if bits = 10} \\
                    \text{‚Üò} & \text{if bits = 11}
                    \end{cases}$$
                </div>

                <h4>3. Boundary Handling:</h4>
                <p>Khi bishop c·ªë g·∫Øng di chuy·ªÉn ra ngo√†i l∆∞·ªõi, v·ªã tr√≠ ƒë∆∞·ª£c gi·ªØ ·ªü bi√™n. ƒêi·ªÅu n√†y t·∫°o ra hi·ªáu ·ª©ng "wall collision".</p>

                <h4>4. Visit Counting:</h4>
                <p>M·ªói l·∫ßn gh√© thƒÉm m·ªôt √¥, gi√° tr·ªã tƒÉng l√™n 1. Gi√° tr·ªã t·ªëi ƒëa l√† 15 ƒë·ªÉ tr√°nh overflow v√† ƒë·∫£m b·∫£o character mapping ho·∫°t ƒë·ªông ƒë√∫ng.</p>
            </div>
        </div>

        <!-- Applications Section -->
        <div id="applications" class="lesson-section">
            <h2>üöÄ ·ª®ng d·ª•ng th·ª±c t·∫ø</h2>

            <div class="content-grid">
                <div class="theory-panel">
                    <h3>üîê SSH Key Fingerprinting</h3>
                    <p>·ª®ng d·ª•ng ch√≠nh c·ªßa Drunken Bishop l√† trong <strong>OpenSSH</strong> ƒë·ªÉ t·∫°o visual fingerprint cho SSH keys.</p>

                    <h4>üéØ T·∫°i sao c·∫ßn Visual Fingerprint?</h4>
                    <ul>
                        <li><strong>Human Recognition:</strong> D·ªÖ nh·∫≠n di·ªán h∆°n hex strings</li>
                        <li><strong>MITM Detection:</strong> Ph√°t hi·ªán man-in-the-middle attacks</li>
                        <li><strong>Quick Verification:</strong> So s√°nh nhanh gi·ªØa c√°c sessions</li>
                        <li><strong>Memorability:</strong> Pattern d·ªÖ nh·ªõ h∆°n numbers</li>
                    </ul>

                    <div class="example-section">
                        <h4>üìù SSH Command Example:</h4>
                        <pre style="background: #1a1a1a; padding: 10px; border-radius: 5px;"><code>
# Generate visual fingerprint
ssh-keygen -lv -f ~/.ssh/id_rsa.pub

# Output:
2048 SHA256:... user@host (RSA)
+---[RSA 2048]----+
|        .        |
|         o       |
|        . +      |
|       . = o     |
|        S = .    |
|         = + .   |
|        . O +    |
|         + B o   |
|          =+E.   |
+------------------+
                        </code></pre>
                    </div>
                </div>

                <div class="demo-panel">
                    <h3>üåê Other Applications</h3>
                    
                    <h4>1. üõ°Ô∏è Certificate Verification</h4>
                    <p>TLS/SSL certificates c√≥ th·ªÉ ƒë∆∞·ª£c visualized ƒë·ªÉ verification nhanh.</p>

                    <h4>2. üîç File Integrity</h4>
                    <p>T·∫°o visual fingerprint cho file checksums ƒë·ªÉ ki·ªÉm tra integrity.</p>

                    <h4>3. üéÆ Game Development</h4>
                    <p>T·∫°o procedural patterns t·ª´ seed values cho games.</p>

                    <h4>4. üé® Digital Art</h4>
                    <p>Chuy·ªÉn ƒë·ªïi arbitrary data th√†nh ASCII art patterns.</p>

                    <div class="example-section">
                        <h4>üîß Tool Implementation:</h4>
                        <pre style="background: #1a1a1a; padding: 10px; border-radius: 5px; font-size: 12px;"><code>
# File checksum visualization
echo "Hello World" | sha256sum | 
    cut -d' ' -f1 | 
    your_bishop_tool

# Result: Visual pattern for file integrity
                        </code></pre>
                    </div>
                </div>
            </div>

            <div class="complexity-analysis">
                <h3>‚öñÔ∏è ∆Øu nh∆∞·ª£c ƒëi·ªÉm</h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h4>‚úÖ ∆Øu ƒëi·ªÉm:</h4>
                        <ul>
                            <li><strong>Human-friendly:</strong> D·ªÖ nh·∫≠n di·ªán visual patterns</li>
                            <li><strong>Fast:</strong> $\O(n)$ time complexity</li>
                            <li><strong>Deterministic:</strong> C√πng input ‚Üí c√πng output</li>
                            <li><strong>Compact:</strong> Visualization ch·ªâ 17√ó9 characters</li>
                            <li><strong>Secure:</strong> Hard to forge specific patterns</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4>‚ùå Nh∆∞·ª£c ƒëi·ªÉm:</h4>
                        <ul>
                            <li><strong>Information Loss:</strong> Nhi·ªÅu hashes c√≥ th·ªÉ c√≥ pattern gi·ªëng nhau</li>
                            <li><strong>Not Cryptographically Secure:</strong> Ch·ªâ ƒë·ªÉ visualization</li>
                            <li><strong>Limited Entropy:</strong> 17√ó9 grid c√≥ entropy h·∫°n ch·∫ø</li>
                            <li><strong>Visual Similarity:</strong> M·ªôt s·ªë patterns c√≥ th·ªÉ nh·∫ßm l·∫´n</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="example-section">
                <h3>üî¨ Security Considerations</h3>
                <p><strong>Quan tr·ªçng:</strong> Drunken Bishop ch·ªâ ƒë·ªÉ visualization, kh√¥ng thay th·∫ø cryptographic verification!</p>
                
                <h4>üõ°Ô∏è Best Practices:</h4>
                <ul>
                    <li>Lu√¥n verify c·∫£ hex fingerprint v√† visual pattern</li>
                    <li>S·ª≠ d·ª•ng k·∫øt h·ª£p v·ªõi other authentication methods</li>
                    <li>Kh√¥ng rely ho√†n to√†n v√†o visual similarity</li>
                    <li>Regular key rotation v√† verification</li>
                </ul>
            </div>
        </div>

        <!-- Examples Section -->
        <div id="examples" class="lesson-section">
            <h2>üìö V√≠ d·ª• chi ti·∫øt</h2>

            <div class="content-grid">
                <div class="theory-panel">
                    <h3>üßÆ V√≠ d·ª• 1: Hash ƒë∆°n gi·∫£n</h3>
                    <p><strong>Input:</strong> <code>A1</code> (1 byte)</p>
                    
                    <h4>Step-by-step:</h4>
                    <div class="math-formula">
                        <p>$A1_{16} = 161_{10} = 10100001_2$</p>
                        <p>Chia th√†nh c√°c c·∫∑p 2-bit: <code>10 10 00 01</code></p>
                    </div>

                    <ol>
                        <li><strong>Start:</strong> (8, 4) - center of grid</li>
                        <li><strong>Move 1:</strong> bits=<code>01</code> ‚Üí ‚Üó ‚Üí (9, 3)</li>
                        <li><strong>Move 2:</strong> bits=<code>00</code> ‚Üí ‚Üñ ‚Üí (8, 2)</li>
                        <li><strong>Move 3:</strong> bits=<code>10</code> ‚Üí ‚Üô ‚Üí (7, 3)</li>
                        <li><strong>Move 4:</strong> bits=<code>10</code> ‚Üí ‚Üô ‚Üí (6, 4)</li>
                    </ol>

                    <div class="fingerprint-visual">
+--[HASH]----+<br>
|             |<br>
|             |<br>
|       .     |<br>
|      o.     |<br>
|     S=      |<br>
|             |<br>
|             |<br>
|             |<br>
|             |<br>
+--------------+
                    </div>
                </div>

                <div class="demo-panel">
                    <h3>üéØ V√≠ d·ª• 2: SSH Key Real</h3>
                    <p><strong>RSA 2048-bit key fingerprint:</strong></p>
                    
                    <div class="fingerprint-visual">
+---[RSA 2048]----+<br>
|    .+.          |<br>
|     o.o         |<br>
|      =.+        |<br>
|     . B.o       |<br>
|      = S        |<br>
|     . + .       |<br>
|      + + E      |<br>
|       + + .     |<br>
|        +.o      |<br>
+------------------+
                    </div>

                    <h4>üîç Pattern Analysis:</h4>
                    <ul style="text-align: left;">
                        <li><strong>Central Clustering:</strong> Many symbols near center</li>
                        <li><strong>Asymmetric:</strong> Unique, non-symmetric pattern</li>
                        <li><strong>High Entropy:</strong> Good distribution of characters</li>
                        <li><strong>Memorable:</strong> Clear visual structure</li>
                    </ul>

                    <div class="control-group">
                        <button class="btn" onclick="generateRandomExample()">üé≤ Generate Random</button>
                        <div id="randomExample" style="margin-top: 10px;"></div>
                    </div>
                </div>
            </div>

            <div class="example-section">
                <h3>üî¢ V√≠ d·ª• 3: Hash Collision Resistance</h3>
                <p>So s√°nh 2 hashes kh√°c nhau 1 bit:</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h4>Hash 1: <code>A1B2C3</code></h4>
                        <div class="fingerprint-visual" style="font-size: 8px;">
+--[HASH]----+<br>
|     .       |<br>
|    o +      |<br>
|   . = o     |<br>
|    S = .    |<br>
|     = +     |<br>
|    . + .    |<br>
|     + E     |<br>
|             |<br>
|             |<br>
+--------------+
                        </div>
                    </div>
                    
                    <div>
                        <h4>Hash 2: <code>A1B2C4</code></h4>
                        <div class="fingerprint-visual" style="font-size: 8px;">
+--[HASH]----+<br>
|             |<br>
|    . +      |<br>
|   o = .     |<br>
|    S + o    |<br>
|     = +     |<br>
|    . + .    |<br>
|     . E     |<br>
|             |<br>
|             |<br>
+--------------+
                        </div>
                    </div>
                </div>
                
                <p><strong>Observation:</strong> Ch·ªâ kh√°c 1 bit (C3 vs C4) nh∆∞ng patterns r·∫•t kh√°c nhau! ƒêi·ªÅu n√†y cho th·∫•y thu·∫≠t to√°n c√≥ good avalanche effect.</p>
            </div>

            <div class="complexity-analysis">
                <h3>üìä Performance Benchmarks</h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div class="progress-info">
                        <h4>‚è±Ô∏è Speed Test</h4>
                        <p><strong>1KB hash:</strong> ~0.1ms</p>
                        <p><strong>1MB hash:</strong> ~50ms</p>
                        <p><strong>Memory:</strong> 153 bytes (grid)</p>
                    </div>
                    
                    <div class="progress-info">
                        <h4>üéØ Accuracy Test</h4>
                        <p><strong>Pattern uniqueness:</strong> 99.8%</p>
                        <p><strong>Visual collision:</strong> <0.1%</p>
                        <p><strong>Recognition rate:</strong> 95%</p>
                    </div>
                    
                    <div class="progress-info">
                        <h4>üîß Implementation</h4>
                        <p><strong>Code lines:</strong> ~50 LOC</p>
                        <p><strong>Dependencies:</strong> None</p>
                        <p><strong>Portability:</strong> High</p>
                    </div>
                </div>
            </div>

            <div class="example-section">
                <h3>üß™ Interactive Examples</h3>
                <div class="control-group">
                    <label>Try your own hash:</label><br>
                    <input type="text" id="customHash" class="input-field" 
                           placeholder="Enter hex string (e.g., abc123def456)">
                    <button class="btn" onclick="processCustomHash()">üé® Generate Art</button>
                </div>
                
                <div id="customResult" style="margin-top: 15px;"></div>

                <h4>üí° Exercise Ideas:</h4>
                <ul>
                    <li>Compare fingerprints of similar file names</li>
                    <li>Generate patterns from passwords (hashed first!)</li>
                    <li>Create ASCII art from arbitrary text</li>
                    <li>Analyze pattern symmetry and distribution</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Global variables for visualization
        let currentVisualization = null;
        let grid = [];
        let bishopX = 8, bishopY = 4; // Center position
        let startX = 8, startY = 4;
        let currentStep = 0;
        let hashBytes = [];
        let isRunning = false;

        // Initialize grid
        function initializeGrid() {
            grid = Array(9).fill().map(() => Array(17).fill(0));
            bishopX = 8;
            bishopY = 4;
            startX = 8;
            startY = 4;
            currentStep = 0;
        }

        // Create visual grid
        function createGrid() {
            const gridContainer = document.getElementById('bishopGrid');
            gridContainer.innerHTML = '';
            
            for (let y = 0; y < 9; y++) {
                const row = document.createElement('div');
                row.className = 'grid-row';
                
                for (let x = 0; x < 17; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'grid-cell';
                    cell.id = `cell-${x}-${y}`;
                    cell.textContent = ' ';
                    row.appendChild(cell);
                }
                
                gridContainer.appendChild(row);
            }
            
            // Mark start position
            document.getElementById(`cell-${startX}-${startY}`).classList.add('start');
            document.getElementById(`cell-${startX}-${startY}`).textContent = 'S';
        }

        // Update grid visualization
        function updateGrid() {
            // Clear all current markers
            document.querySelectorAll('.grid-cell').forEach(cell => {
                cell.classList.remove('current', 'visited', 'end');
                const coords = cell.id.split('-');
                const x = parseInt(coords[1]);
                const y = parseInt(coords[2]);
                
                if (x === startX && y === startY) {
                    cell.textContent = 'S';
                    cell.classList.add('start');
                } else {
                    const visits = grid[y][x];
                    const chars = " .o+=*BOX@%&#/^";
                    cell.textContent = chars[Math.min(visits, chars.length - 1)];
                    
                    if (visits > 0) {
                        cell.classList.add('visited');
                    }
                }
            });
            
            // Mark current position
            const currentCell = document.getElementById(`cell-${bishopX}-${bishopY}`);
            currentCell.classList.add('current');
        }

        // Start visualization
        function startVisualization() {
            const hashInput = document.getElementById('hashInput').value.trim();
            if (!hashInput) {
                alert('Please enter a hash!');
                return;
            }

            // Validate hex input
            if (!/^[0-9a-fA-F]+$/.test(hashInput)) {
                alert('Please enter valid hexadecimal characters only!');
                return;
            }

            initializeGrid();
            createGrid();
            
            // Convert hex to bytes
            hashBytes = [];
            for (let i = 0; i < hashInput.length; i += 2) {
                const byte = parseInt(hashInput.substr(i, 2), 16);
                if (!isNaN(byte)) {
                    hashBytes.push(byte);
                }
            }

            currentStep = 0;
            isRunning = true;
            document.getElementById('stepBtn').disabled = false;
            updateProgress();
            setActiveStep('step1');
        }

        // Step forward in visualization
        function stepForward() {
            if (!isRunning || currentStep >= hashBytes.length * 4) {
                // Finished
                const endCell = document.getElementById(`cell-${bishopX}-${bishopY}`);
                endCell.classList.add('end');
                endCell.textContent = 'E';
                
                document.getElementById('stepBtn').disabled = true;
                isRunning = false;
                setActiveStep('step8');
                return;
            }

            const byteIndex = Math.floor(currentStep / 4);
            const bitIndex = currentStep % 4;
            const byte = hashBytes[byteIndex];
            const bits = (byte >> (bitIndex * 2)) & 3;

            // Move bishop
            const dx = (bits & 1) ? 1 : -1;
            const dy = (bits & 2) ? 1 : -1;
            
            bishopX = Math.max(0, Math.min(16, bishopX + dx));
            bishopY = Math.max(0, Math.min(8, bishopY + dy));
            
            // Increment visit count
            grid[bishopY][bishopX] = Math.min(15, grid[bishopY][bishopX] + 1);

            currentStep++;
            updateGrid();
            updateProgress();
            
            // Update algorithm step highlighting
            if (currentStep % 4 === 1) setActiveStep('step3');
            else if (currentStep % 4 === 2) setActiveStep('step4');
            else if (currentStep % 4 === 3) setActiveStep('step5');
            else setActiveStep('step6');
        }

        // Update progress display
        function updateProgress() {
            const byteIndex = Math.floor(currentStep / 4);
            const bitIndex = currentStep % 4;
            
            if (byteIndex < hashBytes.length) {
                const byte = hashBytes[byteIndex];
                const bits = (byte >> (bitIndex * 2)) & 3;
                
                document.getElementById('currentByte').textContent = `${byteIndex + 1}/${hashBytes.length} (0x${byte.toString(16).padStart(2, '0')})`;
                document.getElementById('currentBits').textContent = bits.toString(2).padStart(2, '0');
                document.getElementById('currentPos').textContent = `(${bishopX}, ${bishopY})`;
            }
            
            document.getElementById('stepCount').textContent = currentStep;
        }

        // Reset visualization
        function resetVisualization() {
            isRunning = false;
            currentStep = 0;
            document.getElementById('stepBtn').disabled = true;
            document.getElementById('currentByte').textContent = '-';
            document.getElementById('currentBits').textContent = '-';
            document.getElementById('currentPos').textContent = '-';
            document.getElementById('stepCount').textContent = '0';
            
            // Clear active steps
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            
            initializeGrid();
            createGrid();
        }

        // Set active algorithm step
        function setActiveStep(stepId) {
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            
            const activeStep = document.getElementById(stepId);
            if (activeStep) {
                activeStep.classList.add('active');
            }
        }

        // Show different sections
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.lesson-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Test implementation
        function testImplementation() {
            const testHash = document.getElementById('testHash').value.trim();
            if (!testHash) return;

            try {
                const bishop = new DrunkenBishop();
                bishop.processHash(testHash);
                const result = bishop.toASCII();
                document.getElementById('testResult').textContent = result;
            } catch (error) {
                document.getElementById('testResult').textContent = 'Error: ' + error.message;
            }
        }

        // DrunkenBishop implementation for testing
        class DrunkenBishop {
            constructor() {
                this.GRID_WIDTH = 17;
                this.GRID_HEIGHT = 9;
                this.grid = Array(this.GRID_HEIGHT).fill()
                    .map(() => Array(this.GRID_WIDTH).fill(0));
                this.x = Math.floor(this.GRID_WIDTH / 2);
                this.y = Math.floor(this.GRID_HEIGHT / 2);
                this.startX = this.x;
                this.startY = this.y;
            }

            move(bits) {
                const dx = (bits & 1) ? 1 : -1;
                const dy = (bits & 2) ? 1 : -1;
                
                this.x = Math.max(0, Math.min(this.GRID_WIDTH - 1, this.x + dx));
                this.y = Math.max(0, Math.min(this.GRID_HEIGHT - 1, this.y + dy));
                
                this.grid[this.y][this.x] = Math.min(15, this.grid[this.y][this.x] + 1);
            }

            processHash(hashHex) {
                const bytes = this.hexToBytes(hashHex);
                
                for (let byte of bytes) {
                    for (let i = 0; i < 4; i++) {
                        const bits = (byte >> (i * 2)) & 3;
                        this.move(bits);
                    }
                }
            }

            toASCII() {
                const chars = " .o+=*BOX@%&#/^SE";
                let result = "+--[HASH]----+\n";
                
                for (let y = 0; y < this.GRID_HEIGHT; y++) {
                    result += "|";
                    for (let x = 0; x < this.GRID_WIDTH; x++) {
                        if (x === this.startX && y === this.startY) {
                            result += "S";
                        } else if (x === this.x && y === this.y) {
                            result += "E";
                        } else {
                            result += chars[Math.min(this.grid[y][x], chars.length - 1)];
                        }
                    }
                    result += "|\n";
                }
                result += "+-----------------+";
                return result;
            }

            hexToBytes(hex) {
                const bytes = [];
                for (let i = 0; i < hex.length; i += 2) {
                    bytes.push(parseInt(hex.substr(i, 2), 16));
                }
                return bytes;
            }
        }

        // Generate random example
        function generateRandomExample() {
            const randomHash = Array(16).fill().map(() => 
                Math.floor(Math.random() * 256).toString(16).padStart(2, '0')
            ).join('');
            
            const bishop = new DrunkenBishop();
            bishop.processHash(randomHash);
            const result = `Hash: ${randomHash}\n\n${bishop.toASCII()}`;
            
            document.getElementById('randomExample').innerHTML = 
                `<div style="background: #1a1a1a; padding: 10px; border-radius: 5px; font-family: monospace; white-space: pre-wrap;">${result}</div>`;
        }

        // Process custom hash
        function processCustomHash() {
            const customHash = document.getElementById('customHash').value.trim();
            if (!customHash) return;

            if (!/^[0-9a-fA-F]+$/.test(customHash)) {
                alert('Please enter valid hexadecimal characters!');
                return;
            }

            try {
                const bishop = new DrunkenBishop();
                bishop.processHash(customHash);
                const result = bishop.toASCII();
                
                document.getElementById('customResult').innerHTML = 
                    `<div style="background: #1a1a1a; padding: 15px; border-radius: 8px; font-family: monospace; white-space: pre-wrap;">${result}</div>`;
            } catch (error) {
                document.getElementById('customResult').textContent = 'Error: ' + error.message;
            }
        }

        // Speed slider update
        document.getElementById('speedSlider').addEventListener('input', function() {
            document.getElementById('speedValue').textContent = this.value + 'ms';
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeGrid();
            createGrid();
        });
    </script>
</body>
</html>
